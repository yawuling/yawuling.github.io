/*! For license information please see main.1.0.0-feature-1.0.0-init.js.LICENSE.txt */
(()=>{var e={486:(e,t,r)=>{"use strict";r.d(t,{Xb:()=>f,Gd:()=>_,cu:()=>h});var n=r(32),i=r(528),o=r(601),a=r(217),s=r(565),c=r(158),u=r(55),l=r(344),p=r(162),d=function(){function e(e){this.errors=0,this.sid=(0,i.DM)(),this.duration=0,this.status="ok",this.init=!0,this.ignoreDuration=!1;var t=(0,o.ph)();this.timestamp=t,this.started=t,e&&this.update(e)}return e.prototype.update=function(e){if(void 0===e&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),this.did||e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||(0,o.ph)(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=32===e.sid.length?e.sid:(0,i.DM)()),void 0!==e.init&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof e.duration)this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):"ok"===this.status?this.update({status:"exited"}):this.update()},e.prototype.toJSON=function(){return(0,p.Jr)({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:{release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent}})},e}(),f=function(){function e(e,t,r){void 0===t&&(t=new l.s),void 0===r&&(r=4),this._version=r,this._stack=[{}],this.getStackTop().scope=t,e&&this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=l.s.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1||!this.getStack().pop())},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var r=this._lastEventId=t&&t.event_id?t.event_id:(0,i.DM)(),o=t;if(!t){var a=void 0;try{throw new Error("Sentry syntheticException")}catch(e){a=e}o={originalException:e,syntheticException:a}}return this._invokeClient("captureException",e,(0,n.pi)((0,n.pi)({},o),{event_id:r})),r},e.prototype.captureMessage=function(e,t,r){var o=this._lastEventId=r&&r.event_id?r.event_id:(0,i.DM)(),a=r;if(!r){var s=void 0;try{throw new Error(e)}catch(e){s=e}a={originalException:e,syntheticException:s}}return this._invokeClient("captureMessage",e,t,(0,n.pi)((0,n.pi)({},a),{event_id:o})),o},e.prototype.captureEvent=function(e,t){var r=t&&t.event_id?t.event_id:(0,i.DM)();return"transaction"!==e.type&&(this._lastEventId=r),this._invokeClient("captureEvent",e,(0,n.pi)((0,n.pi)({},t),{event_id:r})),r},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var r=this.getStackTop(),i=r.scope,s=r.client;if(i&&s){var c=s.getOptions&&s.getOptions()||{},u=c.beforeBreadcrumb,l=void 0===u?null:u,p=c.maxBreadcrumbs,d=void 0===p?100:p;if(!(d<=0)){var f=(0,o.yW)(),h=(0,n.pi)({timestamp:f},e),g=l?(0,a.Cf)((function(){return l(h,t)})):h;null!==g&&i.addBreadcrumb(g,d)}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var r=this.getScope();r&&r.setTag(e,t)},e.prototype.setExtra=function(e,t){var r=this.getScope();r&&r.setExtra(e,t)},e.prototype.setContext=function(e,t){var r=this.getScope();r&&r.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),r=t.scope,n=t.client;r&&n&&e(r)},e.prototype.run=function(e){var t=g(this);try{e(this)}finally{g(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return(0,s.c)()&&a.kg.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},e.prototype.endSession=function(){var e=this.getStackTop(),t=e&&e.scope,r=t&&t.getSession();r&&r.close(),this._sendSessionUpdate(),t&&t.setSession()},e.prototype.startSession=function(e){var t=this.getStackTop(),r=t.scope,i=t.client,o=i&&i.getOptions()||{},a=o.release,s=o.environment,u=((0,c.R)().navigator||{}).userAgent,l=new d((0,n.pi)((0,n.pi)((0,n.pi)({release:a,environment:s},r&&{user:r.getUser()}),u&&{userAgent:u}),e));if(r){var p=r.getSession&&r.getSession();p&&"ok"===p.status&&p.update({status:"exited"}),this.endSession(),r.setSession(l)}return l},e.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,r=e.client;if(t){var n=t.getSession&&t.getSession();n&&r&&r.captureSession&&r.captureSession(n)}},e.prototype._invokeClient=function(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=this.getStackTop(),a=o.scope,s=o.client;s&&s[e]&&(t=s)[e].apply(t,(0,n.fl)(r,[a]))},e.prototype._callExtensionMethod=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=h(),i=n.__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[e])return i.extensions[e].apply(this,t);(0,s.c)()&&a.kg.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}();function h(){var e=(0,c.R)();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function g(e){var t=h(),r=v(t);return y(t,e),r}function _(){var e=h();return m(e)&&!v(e).isOlderThan(4)||y(e,new f),(0,u.KV)()?function(e){try{var t=h().__SENTRY__,r=t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active;if(!r)return v(e);if(!m(r)||v(r).isOlderThan(4)){var n=v(e).getStackTop();y(r,new f(n.client,l.s.clone(n.scope)))}return v(r)}catch(t){return v(e)}}(e):v(e)}function m(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function v(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new f),e.__SENTRY__.hub}function y(e,t){return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}},344:(e,t,r)=>{"use strict";r.d(t,{c:()=>l,s:()=>c});var n=r(32),i=r(674),o=r(601),a=r(362),s=r(158),c=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}return e.clone=function(t){var r=new e;return t&&(r._breadcrumbs=(0,n.fl)(t._breadcrumbs),r._tags=(0,n.pi)({},t._tags),r._extra=(0,n.pi)({},t._extra),r._contexts=(0,n.pi)({},t._contexts),r._user=t._user,r._level=t._level,r._span=t._span,r._session=t._session,r._transactionName=t._transactionName,r._fingerprint=t._fingerprint,r._eventProcessors=(0,n.fl)(t._eventProcessors),r._requestSession=t._requestSession),r},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.getRequestSession=function(){return this._requestSession},e.prototype.setRequestSession=function(e){return this._requestSession=e,this},e.prototype.setTags=function(e){return this._tags=(0,n.pi)((0,n.pi)({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var r;return this._tags=(0,n.pi)((0,n.pi)({},this._tags),((r={})[e]=t,r)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=(0,n.pi)((0,n.pi)({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var r;return this._extra=(0,n.pi)((0,n.pi)({},this._extra),((r={})[e]=t,r)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var r;return null===t?delete this._contexts[e]:this._contexts=(0,n.pi)((0,n.pi)({},this._contexts),((r={})[e]=t,r)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e=this.getSpan();return e&&e.transaction},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var r=t(this);return r instanceof e?r:this}return t instanceof e?(this._tags=(0,n.pi)((0,n.pi)({},this._tags),t._tags),this._extra=(0,n.pi)((0,n.pi)({},this._extra),t._extra),this._contexts=(0,n.pi)((0,n.pi)({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):(0,i.PO)(t)&&(t=t,this._tags=(0,n.pi)((0,n.pi)({},this._tags),t.tags),this._extra=(0,n.pi)((0,n.pi)({},this._extra),t.extra),this._contexts=(0,n.pi)((0,n.pi)({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var r="number"==typeof t?Math.min(t,100):100;if(r<=0)return this;var i=(0,n.pi)({timestamp:(0,o.yW)()},e);return this._breadcrumbs=(0,n.fl)(this._breadcrumbs,[i]).slice(-r),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){if(this._extra&&Object.keys(this._extra).length&&(e.extra=(0,n.pi)((0,n.pi)({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=(0,n.pi)((0,n.pi)({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=(0,n.pi)((0,n.pi)({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=(0,n.pi)((0,n.pi)({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=(0,n.pi)({trace:this._span.getTraceContext()},e.contexts);var r=this._span.transaction&&this._span.transaction.name;r&&(e.tags=(0,n.pi)({transaction:r},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=(0,n.fl)(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata=this._sdkProcessingMetadata,this._notifyEventProcessors((0,n.fl)(u(),this._eventProcessors),e,t)},e.prototype.setSDKProcessingMetadata=function(e){return this._sdkProcessingMetadata=(0,n.pi)((0,n.pi)({},this._sdkProcessingMetadata),e),this},e.prototype._notifyEventProcessors=function(e,t,r,o){var s=this;return void 0===o&&(o=0),new a.cW((function(a,c){var u=e[o];if(null===t||"function"!=typeof u)a(t);else{var l=u((0,n.pi)({},t),r);(0,i.J8)(l)?l.then((function(t){return s._notifyEventProcessors(e,t,r,o+1).then(a)})).then(null,c):s._notifyEventProcessors(e,l,r,o+1).then(a).then(null,c)}}))},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}();function u(){var e=(0,s.R)();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function l(e){u().push(e)}},470:(e,t,r)=>{"use strict";r.d(t,{d:()=>n,x:()=>i});var n="finishReason",i=["heartbeatFailed","idleTimeout","documentHidden"]},82:(e,t,r)=>{"use strict";r.d(t,{ro:()=>v,lb:()=>m});var n=r(32),i=r(486),o=r(565),a=r(217),s=r(674),c=r(55),u=r(165),l=r(617);function p(){var e=(0,l.x1)();if(e){var t="internal_error";(0,o.c)()&&a.kg.log("[Tracing] Transaction: "+t+" -> Global error occured"),e.setStatus(t)}}var d=r(512),f=r(281);function h(){var e=this.getScope();if(e){var t=e.getSpan();if(t)return{"sentry-trace":t.toTraceparent()}}return{}}function g(e,t,r){return(0,l.zu)(t)?void 0!==e.sampled?(e.setMetadata({transactionSampling:{method:"explicitly_set"}}),e):("function"==typeof t.tracesSampler?(i=t.tracesSampler(r),e.setMetadata({transactionSampling:{method:"client_sampler",rate:Number(i)}})):void 0!==r.parentSampled?(i=r.parentSampled,e.setMetadata({transactionSampling:{method:"inheritance"}})):(i=t.tracesSampleRate,e.setMetadata({transactionSampling:{method:"client_rate",rate:Number(i)}})),n=i,((0,s.i2)(n)||"number"!=typeof n&&"boolean"!=typeof n?((0,o.c)()&&a.kg.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(n)+" of type "+JSON.stringify(typeof n)+"."),0):!(n<0||n>1)||((0,o.c)()&&a.kg.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got "+n+"."),0))?i?(e.sampled=Math.random()<i,e.sampled?((0,o.c)()&&a.kg.log("[Tracing] starting "+e.op+" transaction - "+e.name),e):((0,o.c)()&&a.kg.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = "+Number(i)+")"),e)):((0,o.c)()&&a.kg.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):((0,o.c)()&&a.kg.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)):(e.sampled=!1,e);var n,i}function _(e,t){var r=this.getClient(),i=r&&r.getOptions()||{},o=new f.Y(e,this);return(o=g(o,i,(0,n.pi)({parentSampled:e.parentSampled,transactionContext:e},t))).sampled&&o.initSpanRecorder(i._experiments&&i._experiments.maxSpans),o}function m(e,t,r,i,o){var a=e.getClient(),s=a&&a.getOptions()||{},c=new d.io(t,e,r,i);return(c=g(c,s,(0,n.pi)({parentSampled:t.parentSampled,transactionContext:t},o))).sampled&&c.initSpanRecorder(s._experiments&&s._experiments.maxSpans),c}function v(){var t;(t=(0,i.cu)()).__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=_),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=h)),(0,c.KV)()&&function(){var t=(0,i.cu)();if(t.__SENTRY__){var r={mongodb:function(){return new((0,c.l$)(e,"./integrations/node/mongo").Mongo)},mongoose:function(){return new((0,c.l$)(e,"./integrations/node/mongo").Mongo)({mongoose:!0})},mysql:function(){return new((0,c.l$)(e,"./integrations/node/mysql").Mysql)},pg:function(){return new((0,c.l$)(e,"./integrations/node/postgres").Postgres)}},o=Object.keys(r).filter((function(e){return!!(0,c.$y)(e)})).map((function(e){try{return r[e]()}catch(e){return}})).filter((function(e){return e}));o.length>0&&(t.__SENTRY__.integrations=(0,n.fl)(t.__SENTRY__.integrations||[],o))}}(),(0,u.o)("error",p),(0,u.o)("unhandledrejection",p)}e=r.hmd(e)},512:(e,t,r)=>{"use strict";r.d(t,{io:()=>d,nT:()=>l});var n=r(32),i=r(601),o=r(565),a=r(217),s=r(470),c=r(808),u=r(281),l=1e3,p=function(e){function t(t,r,n,i){void 0===n&&(n="");var o=e.call(this,i)||this;return o._pushActivity=t,o._popActivity=r,o.transactionSpanId=n,o}return(0,n.ZT)(t,e),t.prototype.add=function(t){var r=this;t.spanId!==this.transactionSpanId&&(t.finish=function(e){t.endTimestamp="number"==typeof e?e:(0,i._I)(),r._popActivity(t.spanId)},void 0===t.endTimestamp&&this._pushActivity(t.spanId)),e.prototype.add.call(this,t)},t}(c.gB),d=function(e){function t(t,r,n,i){void 0===n&&(n=l),void 0===i&&(i=!1);var s=e.call(this,t,r)||this;return s._idleHub=r,s._idleTimeout=n,s._onScope=i,s.activities={},s._heartbeatCounter=0,s._finished=!1,s._beforeFinishCallbacks=[],r&&i&&(f(r),(0,o.c)()&&a.kg.log("Setting idle transaction on scope. Span ID: "+s.spanId),r.configureScope((function(e){return e.setSpan(s)}))),s._initTimeout=setTimeout((function(){s._finished||s.finish()}),s._idleTimeout),s}return(0,n.ZT)(t,e),t.prototype.finish=function(t){var r,s,c=this;if(void 0===t&&(t=(0,i._I)()),this._finished=!0,this.activities={},this.spanRecorder){(0,o.c)()&&a.kg.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);try{for(var u=(0,n.XA)(this._beforeFinishCallbacks),l=u.next();!l.done;l=u.next())(0,l.value)(this,t)}catch(e){r={error:e}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}this.spanRecorder.spans=this.spanRecorder.spans.filter((function(e){if(e.spanId===c.spanId)return!0;e.endTimestamp||(e.endTimestamp=t,e.setStatus("cancelled"),(0,o.c)()&&a.kg.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));var r=e.startTimestamp<t;return r||(0,o.c)()&&a.kg.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(e,void 0,2)),r})),(0,o.c)()&&a.kg.log("[Tracing] flushing IdleTransaction")}else(0,o.c)()&&a.kg.log("[Tracing] No active IdleTransaction");return this._onScope&&f(this._idleHub),e.prototype.finish.call(this,t)},t.prototype.registerBeforeFinishCallback=function(e){this._beforeFinishCallbacks.push(e)},t.prototype.initSpanRecorder=function(e){var t=this;this.spanRecorder||(this.spanRecorder=new p((function(e){t._finished||t._pushActivity(e)}),(function(e){t._finished||t._popActivity(e)}),this.spanId,e),(0,o.c)()&&a.kg.log("Starting heartbeat"),this._pingHeartbeat()),this.spanRecorder.add(this)},t.prototype._pushActivity=function(e){this._initTimeout&&(clearTimeout(this._initTimeout),this._initTimeout=void 0),(0,o.c)()&&a.kg.log("[Tracing] pushActivity: "+e),this.activities[e]=!0,(0,o.c)()&&a.kg.log("[Tracing] new activities count",Object.keys(this.activities).length)},t.prototype._popActivity=function(e){var t=this;if(this.activities[e]&&((0,o.c)()&&a.kg.log("[Tracing] popActivity "+e),delete this.activities[e],(0,o.c)()&&a.kg.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){var r=this._idleTimeout,n=(0,i._I)()+r/1e3;setTimeout((function(){t._finished||(t.setTag(s.d,s.x[1]),t.finish(n))}),r)}},t.prototype._beat=function(){if(!this._finished){var e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?((0,o.c)()&&a.kg.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this.setTag(s.d,s.x[0]),this.finish()):this._pingHeartbeat()}},t.prototype._pingHeartbeat=function(){var e=this;(0,o.c)()&&a.kg.log("pinging Heartbeat -> current counter: "+this._heartbeatCounter),setTimeout((function(){e._beat()}),5e3)},t}(u.Y);function f(e){if(e){var t=e.getScope();t&&t.getTransaction()&&t.setSpan(void 0)}}},808:(e,t,r)=>{"use strict";r.d(t,{Dr:()=>c,gB:()=>s});var n=r(32),i=r(528),o=r(601),a=r(162),s=function(){function e(e){void 0===e&&(e=1e3),this.spans=[],this._maxlen=e}return e.prototype.add=function(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)},e}(),c=function(){function e(e){if(this.traceId=(0,i.DM)(),this.spanId=(0,i.DM)().substring(16),this.startTimestamp=(0,o._I)(),this.tags={},this.data={},!e)return this;e.traceId&&(this.traceId=e.traceId),e.spanId&&(this.spanId=e.spanId),e.parentSpanId&&(this.parentSpanId=e.parentSpanId),"sampled"in e&&(this.sampled=e.sampled),e.op&&(this.op=e.op),e.description&&(this.description=e.description),e.data&&(this.data=e.data),e.tags&&(this.tags=e.tags),e.status&&(this.status=e.status),e.startTimestamp&&(this.startTimestamp=e.startTimestamp),e.endTimestamp&&(this.endTimestamp=e.endTimestamp)}return e.prototype.child=function(e){return this.startChild(e)},e.prototype.startChild=function(t){var r=new e((0,n.pi)((0,n.pi)({},t),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));return r.spanRecorder=this.spanRecorder,r.spanRecorder&&r.spanRecorder.add(r),r.transaction=this.transaction,r},e.prototype.setTag=function(e,t){var r;return this.tags=(0,n.pi)((0,n.pi)({},this.tags),((r={})[e]=t,r)),this},e.prototype.setData=function(e,t){var r;return this.data=(0,n.pi)((0,n.pi)({},this.data),((r={})[e]=t,r)),this},e.prototype.setStatus=function(e){return this.status=e,this},e.prototype.setHttpStatus=function(e){this.setTag("http.status_code",String(e));var t=function(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}(e);return"unknown_error"!==t&&this.setStatus(t),this},e.prototype.isSuccess=function(){return"ok"===this.status},e.prototype.finish=function(e){this.endTimestamp="number"==typeof e?e:(0,o._I)()},e.prototype.toTraceparent=function(){var e="";return void 0!==this.sampled&&(e=this.sampled?"-1":"-0"),this.traceId+"-"+this.spanId+e},e.prototype.toContext=function(){return(0,a.Jr)({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})},e.prototype.updateWithContext=function(e){var t,r,n,i,o;return this.data=null!=(t=e.data)?t:{},this.description=e.description,this.endTimestamp=e.endTimestamp,this.op=e.op,this.parentSpanId=e.parentSpanId,this.sampled=e.sampled,this.spanId=null!=(r=e.spanId)?r:this.spanId,this.startTimestamp=null!=(n=e.startTimestamp)?n:this.startTimestamp,this.status=e.status,this.tags=null!=(i=e.tags)?i:{},this.traceId=null!=(o=e.traceId)?o:this.traceId,this},e.prototype.getTraceContext=function(){return(0,a.Jr)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})},e.prototype.toJSON=function(){return(0,a.Jr)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})},e}()},281:(e,t,r)=>{"use strict";r.d(t,{Y:()=>l});var n=r(32),i=r(486),o=r(674),a=r(565),s=r(217),c=r(162),u=r(808),l=function(e){function t(t,r){var n=e.call(this,t)||this;return n._measurements={},n._hub=(0,i.Gd)(),(0,o.V9)(r,i.Xb)&&(n._hub=r),n.name=t.name||"",n.metadata=t.metadata||{},n._trimEnd=t.trimEnd,n.transaction=n,n}return(0,n.ZT)(t,e),t.prototype.setName=function(e){this.name=e},t.prototype.initSpanRecorder=function(e){void 0===e&&(e=1e3),this.spanRecorder||(this.spanRecorder=new u.gB(e)),this.spanRecorder.add(this)},t.prototype.setMeasurements=function(e){this._measurements=(0,n.pi)({},e)},t.prototype.setMetadata=function(e){this.metadata=(0,n.pi)((0,n.pi)({},this.metadata),e)},t.prototype.finish=function(t){var r=this;if(void 0===this.endTimestamp){if(this.name||((0,a.c)()&&s.kg.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),e.prototype.finish.call(this,t),!0===this.sampled){var n=this.spanRecorder?this.spanRecorder.spans.filter((function(e){return e!==r&&e.endTimestamp})):[];this._trimEnd&&n.length>0&&(this.endTimestamp=n.reduce((function(e,t){return e.endTimestamp&&t.endTimestamp?e.endTimestamp>t.endTimestamp?e:t:e})).endTimestamp);var i={contexts:{trace:this.getTraceContext()},spans:n,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:this.metadata};return Object.keys(this._measurements).length>0&&((0,a.c)()&&s.kg.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),i.measurements=this._measurements),(0,a.c)()&&s.kg.log("[Tracing] Finishing "+this.op+" transaction: "+this.name+"."),this._hub.captureEvent(i)}(0,a.c)()&&s.kg.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.");var o=this._hub.getClient(),c=o&&o.getTransport&&o.getTransport();c&&c.recordLostEvent&&c.recordLostEvent("sample_rate","transaction")}},t.prototype.toContext=function(){var t=e.prototype.toContext.call(this);return(0,c.Jr)((0,n.pi)((0,n.pi)({},t),{name:this.name,trimEnd:this._trimEnd}))},t.prototype.updateWithContext=function(t){var r;return e.prototype.updateWithContext.call(this,t),this.name=null!=(r=t.name)?r:"",this._trimEnd=t.trimEnd,this},t}(u.Dr)},617:(e,t,r)=>{"use strict";r.d(t,{WB:()=>s,XL:()=>a,x1:()=>o,zu:()=>i});var n=r(486);function i(e){var t=(0,n.Gd)().getClient(),r=e||t&&t.getOptions();return!!r&&("tracesSampleRate"in r||"tracesSampler"in r)}function o(e){var t=(e||(0,n.Gd)()).getScope();return t&&t.getTransaction()}function a(e){return e/1e3}function s(e){return 1e3*e}},786:(e,t,r)=>{"use strict";r.d(t,{R:()=>o,l:()=>s});var n=r(158),i=r(674);function o(e,t){try{for(var r=e,n=[],i=0,o=0,s=" > ".length,c=void 0;r&&i++<5&&!("html"===(c=a(r,t))||i>1&&o+n.length*s+c.length>=80);)n.push(c),o+=c.length,r=r.parentNode;return n.reverse().join(" > ")}catch(e){return"<unknown>"}}function a(e,t){var r,n,o,a,s,c=e,u=[];if(!c||!c.tagName)return"";u.push(c.tagName.toLowerCase());var l=t&&t.length?t.filter((function(e){return c.getAttribute(e)})).map((function(e){return[e,c.getAttribute(e)]})):null;if(l&&l.length)l.forEach((function(e){u.push("["+e[0]+'="'+e[1]+'"]')}));else if(c.id&&u.push("#"+c.id),(r=c.className)&&(0,i.HD)(r))for(n=r.split(/\s+/),s=0;s<n.length;s++)u.push("."+n[s]);var p=["type","name","title","alt"];for(s=0;s<p.length;s++)o=p[s],(a=c.getAttribute(o))&&u.push("["+o+'="'+a+'"]');return u.join("")}function s(){var e=(0,n.R)();try{return e.document.location.href}catch(e){return""}}},565:(e,t,r)=>{"use strict";function n(){return!0}function i(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}r.d(t,{c:()=>n,n:()=>i})},158:(e,t,r)=>{"use strict";r.d(t,{R:()=>o});var n=r(55),i={};function o(){return(0,n.KV)()?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:i}},165:(e,t,r)=>{"use strict";r.d(t,{o:()=>m});var n,i,o,a=r(32),s=r(565),c=r(158),u=r(674),l=r(217),p=r(162),d=r(60),f=r(402),h=(0,c.R)(),g={},_={};function m(e,t){g[e]=g[e]||[],g[e].push(t),function(e){if(!_[e])switch(_[e]=!0,e){case"console":"console"in h&&l.RU.forEach((function(e){e in h.console&&(0,p.hl)(h.console,e,(function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];v("console",{args:r,level:e}),t&&t.apply(h.console,r)}}))}));break;case"dom":!function(){if("document"in h){var e=v.bind(null,"dom"),t=w(e,!0);h.document.addEventListener("click",t,!1),h.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((function(t){var r=h[t]&&h[t].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&((0,p.hl)(r,"addEventListener",(function(t){return function(r,n,i){if("click"===r||"keypress"==r)try{var o=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},a=o[r]=o[r]||{refCount:0};if(!a.handler){var s=w(e);a.handler=s,t.call(this,r,s,i)}a.refCount+=1}catch(e){}return t.call(this,r,n,i)}})),(0,p.hl)(r,"removeEventListener",(function(e){return function(t,r,n){if("click"===t||"keypress"==t)try{var i=this.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount-=1,o.refCount<=0&&(e.call(this,t,o.handler,n),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,r,n)}})))}))}}();break;case"xhr":!function(){if("XMLHttpRequest"in h){var e=XMLHttpRequest.prototype;(0,p.hl)(e,"open",(function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this,i=t[1],o=n.__sentry_xhr__={method:(0,u.HD)(t[0])?t[0].toUpperCase():t[0],url:t[1]};(0,u.HD)(i)&&"POST"===o.method&&i.match(/sentry_key/)&&(n.__sentry_own_request__=!0);var a=function(){if(4===n.readyState){try{o.status_code=n.status}catch(e){}v("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:n})}};return"onreadystatechange"in n&&"function"==typeof n.onreadystatechange?(0,p.hl)(n,"onreadystatechange",(function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return a(),e.apply(n,t)}})):n.addEventListener("readystatechange",a),e.apply(n,t)}})),(0,p.hl)(e,"send",(function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.__sentry_xhr__&&void 0!==t[0]&&(this.__sentry_xhr__.body=t[0]),v("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}}();break;case"fetch":(0,f.t$)()&&(0,p.hl)(h,"fetch",(function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n={args:t,fetchData:{method:y(t),url:b(t)},startTimestamp:Date.now()};return v("fetch",(0,a.pi)({},n)),e.apply(h,t).then((function(e){return v("fetch",(0,a.pi)((0,a.pi)({},n),{endTimestamp:Date.now(),response:e})),e}),(function(e){throw v("fetch",(0,a.pi)((0,a.pi)({},n),{endTimestamp:Date.now(),error:e})),e}))}}));break;case"history":!function(){if((0,f.Bf)()){var e=h.onpopstate;h.onpopstate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=h.location.href,o=n;if(n=i,v("history",{from:o,to:i}),e)try{return e.apply(this,t)}catch(e){}},(0,p.hl)(h.history,"pushState",t),(0,p.hl)(h.history,"replaceState",t)}function t(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=t.length>2?t[2]:void 0;if(i){var o=n,a=String(i);n=a,v("history",{from:o,to:a})}return e.apply(this,t)}}}();break;case"error":S=h.onerror,h.onerror=function(e,t,r,n,i){return v("error",{column:n,error:i,line:r,msg:e,url:t}),!!S&&S.apply(this,arguments)};break;case"unhandledrejection":k=h.onunhandledrejection,h.onunhandledrejection=function(e){return v("unhandledrejection",e),!k||k.apply(this,arguments)};break;default:(0,s.c)()&&l.kg.warn("unknown instrumentation type:",e)}}(e)}function v(e,t){var r,n;if(e&&g[e])try{for(var i=(0,a.XA)(g[e]||[]),o=i.next();!o.done;o=i.next()){var c=o.value;try{c(t)}catch(t){(0,s.c)()&&l.kg.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+(0,d.$P)(c)+"\nError:",t)}}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}function y(e){return void 0===e&&(e=[]),"Request"in h&&(0,u.V9)(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function b(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in h&&(0,u.V9)(e[0],Request)?e[0].url:String(e[0])}function w(e,t){return void 0===t&&(t=!1),function(r){if(r&&o!==r&&!function(e){if("keypress"!==e.type)return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(r)){var n="keypress"===r.type?"input":r.type;(void 0===i||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(o,r))&&(e({event:r,name:n,global:t}),o=r),clearTimeout(i),i=h.setTimeout((function(){i=void 0}),1e3)}}}var S=null,k=null},674:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>_,HD:()=>u,J8:()=>g,Kj:()=>h,PO:()=>p,TX:()=>s,V9:()=>v,VW:()=>a,VZ:()=>i,cO:()=>d,fm:()=>c,i2:()=>m,kK:()=>f,pt:()=>l});var n=Object.prototype.toString;function i(e){switch(n.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return v(e,Error)}}function o(e,t){return n.call(e)==="[object "+t+"]"}function a(e){return o(e,"ErrorEvent")}function s(e){return o(e,"DOMError")}function c(e){return o(e,"DOMException")}function u(e){return o(e,"String")}function l(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function p(e){return o(e,"Object")}function d(e){return"undefined"!=typeof Event&&v(e,Event)}function f(e){return"undefined"!=typeof Element&&v(e,Element)}function h(e){return o(e,"RegExp")}function g(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function _(e){return p(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function m(e){return"number"==typeof e&&e!=e}function v(e,t){try{return e instanceof t}catch(e){return!1}}},217:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>u,RU:()=>c,kg:()=>d});var n=r(32),i=r(565),o=r(158),a=(0,o.R)(),s="Sentry Logger ",c=["debug","info","warn","error","log","assert"];function u(e){var t=(0,o.R)();if(!("console"in t))return e();var r=t.console,n={};c.forEach((function(e){e in t.console&&r[e].__sentry_original__&&(n[e]=r[e],r[e]=r[e].__sentry_original__)}));var i=e();return Object.keys(n).forEach((function(e){r[e]=n[e]})),i}var l=function(){function e(){this._enabled=!1}return e.prototype.disable=function(){this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&u((function(){var t;(t=a.console).log.apply(t,(0,n.fl)([s+"[Log]:"],e))}))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&u((function(){var t;(t=a.console).warn.apply(t,(0,n.fl)([s+"[Warn]:"],e))}))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&u((function(){var t;(t=a.console).error.apply(t,(0,n.fl)([s+"[Error]:"],e))}))},e}(),p=a.__SENTRY__||{},d=p.logger||new l;(0,i.c)()&&(p.logger=d,a.__SENTRY__=p)},528:(e,t,r)=>{"use strict";r.d(t,{DM:()=>a,Db:()=>l,EG:()=>p,YO:()=>d,en:()=>s,jH:()=>u});var n=r(32),i=r(158),o=r(162);function a(){var e=(0,i.R)(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var r=new Uint16Array(8);t.getRandomValues(r),r[3]=4095&r[3]|16384,r[4]=16383&r[4]|32768;var n=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(r[0])+n(r[1])+n(r[2])+n(r[3])+n(r[4])+n(r[5])+n(r[6])+n(r[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function s(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+r+n}}function c(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function u(e){var t=e.message,r=e.event_id;if(t)return t;var n=c(e);return n?n.type&&n.value?n.type+": "+n.value:n.type||n.value||r||"<unknown>":r||"<unknown>"}function l(e,t,r){var n=e.exception=e.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=r||"Error")}function p(e,t){var r=c(e);if(r){var i=r.mechanism;if(r.mechanism=(0,n.pi)((0,n.pi)((0,n.pi)({},{type:"generic",handled:!0}),i),t),t&&"data"in t){var o=(0,n.pi)((0,n.pi)({},i&&i.data),t.data);r.mechanism.data=o}}}function d(e){if(e&&e.__sentry_captured__)return!0;try{(0,o.xp)(e,"__sentry_captured__",!0)}catch(e){}return!1}},55:(e,t,r)=>{"use strict";r.d(t,{$y:()=>a,KV:()=>i,l$:()=>o});var n=r(565);function i(){return!(0,n.n)()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function o(e,t){return e.require(t)}function a(t){var r;try{r=o(e,t)}catch(e){}try{var n=o(e,"process").cwd;r=o(e,n()+"/node_modules/"+t)}catch(e){}return r}e=r.hmd(e)},162:(e,t,r)=>{"use strict";r.d(t,{$Q:()=>u,HK:()=>l,Jr:()=>_,Sh:()=>d,_j:()=>p,hl:()=>s,xp:()=>c,zf:()=>g});var n=r(32),i=r(786),o=r(674),a=r(706);function s(e,t,r){if(t in e){var n=e[t],i=r(n);if("function"==typeof i)try{u(i,n)}catch(e){}e[t]=i}}function c(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}function u(e,t){var r=t.prototype||{};e.prototype=t.prototype=r,c(e,"__sentry_original__",t)}function l(e){return e.__sentry_original__}function p(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}function d(e){var t=e;if((0,o.VZ)(e))t=(0,n.pi)({message:e.message,name:e.name,stack:e.stack},h(e));else if((0,o.cO)(e)){var r=e;t=(0,n.pi)({type:r.type,target:f(r.target),currentTarget:f(r.currentTarget)},h(r)),"undefined"!=typeof CustomEvent&&(0,o.V9)(e,CustomEvent)&&(t.detail=r.detail)}return t}function f(e){try{return(0,o.kK)(e)?(0,i.R)(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function h(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function g(e,t){void 0===t&&(t=40);var r=Object.keys(d(e));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=t)return(0,a.$G)(r[0],t);for(var n=r.length;n>0;n--){var i=r.slice(0,n).join(", ");if(!(i.length>t))return n===r.length?i:(0,a.$G)(i,t)}return""}function _(e){var t,r;if((0,o.PO)(e)){var i={};try{for(var a=(0,n.XA)(Object.keys(e)),s=a.next();!s.done;s=a.next()){var c=s.value;void 0!==e[c]&&(i[c]=_(e[c]))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}return Array.isArray(e)?e.map(_):e}},60:(e,t,r)=>{"use strict";r.d(t,{$P:()=>s,pE:()=>i});var n=r(32);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}));return function(e,t){var i,a,s,c;void 0===t&&(t=0);var u=[];try{for(var l=(0,n.XA)(e.split("\n").slice(t)),p=l.next();!p.done;p=l.next()){var d=p.value;try{for(var f=(s=void 0,(0,n.XA)(r)),h=f.next();!h.done;h=f.next()){var g=(0,h.value)(d);if(g){u.push(g);break}}}catch(e){s={error:e}}finally{try{h&&!h.done&&(c=f.return)&&c.call(f)}finally{if(s)throw s.error}}}}catch(e){i={error:e}}finally{try{p&&!p.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return o(u)}}function o(e){if(!e.length)return[];var t=e,r=t[0].function||"",i=t[t.length-1].function||"";return-1===r.indexOf("captureMessage")&&-1===r.indexOf("captureException")||(t=t.slice(1)),-1!==i.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,50).map((function(e){return(0,n.pi)((0,n.pi)({},e),{filename:e.filename||t[0].filename,function:e.function||"?"})})).reverse()}var a="<anonymous>";function s(e){try{return e&&"function"==typeof e&&e.name||a}catch(e){return a}}},706:(e,t,r)=>{"use strict";r.d(t,{$G:()=>i,nK:()=>o,zC:()=>a});var n=r(674);function i(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"..."}function o(e,t){if(!Array.isArray(e))return"";for(var r=[],n=0;n<e.length;n++){var i=e[n];try{r.push(String(i))}catch(e){r.push("[value cannot be serialized]")}}return r.join(t)}function a(e,t){return!!(0,n.HD)(e)&&((0,n.Kj)(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t))}},402:(e,t,r)=>{"use strict";r.d(t,{Ak:()=>a,Bf:()=>l,Du:()=>s,hv:()=>u,t$:()=>c});var n=r(565),i=r(158),o=r(217);function a(){if(!("fetch"in(0,i.R)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function s(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function c(){if(!a())return!1;var e=(0,i.R)();if(s(e.fetch))return!0;var t=!1,r=e.document;if(r&&"function"==typeof r.createElement)try{var c=r.createElement("iframe");c.hidden=!0,r.head.appendChild(c),c.contentWindow&&c.contentWindow.fetch&&(t=s(c.contentWindow.fetch)),r.head.removeChild(c)}catch(e){(0,n.c)()&&o.kg.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t}function u(){if(!a())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}function l(){var e=(0,i.R)(),t=e.chrome,r=t&&t.app&&t.app.runtime,n="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!r&&n}},362:(e,t,r)=>{"use strict";r.d(t,{$2:()=>o,WD:()=>i,cW:()=>a});var n=r(674);function i(e){return new a((function(t){t(e)}))}function o(e){return new a((function(t,r){r(e)}))}var a=function(){function e(e){var t=this;this._state=0,this._handlers=[],this._resolve=function(e){t._setResult(1,e)},this._reject=function(e){t._setResult(2,e)},this._setResult=function(e,r){0===t._state&&((0,n.J8)(r)?r.then(t._resolve,t._reject):(t._state=e,t._value=r,t._executeHandlers()))},this._executeHandlers=function(){if(0!==t._state){var e=t._handlers.slice();t._handlers=[],e.forEach((function(e){e[0]||(1===t._state&&e[1](t._value),2===t._state&&e[2](t._value),e[0]=!0)}))}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.prototype.then=function(t,r){var n=this;return new e((function(e,i){n._handlers.push([!1,function(r){if(t)try{e(t(r))}catch(e){i(e)}else e(r)},function(t){if(r)try{e(r(t))}catch(e){i(e)}else i(t)}]),n._executeHandlers()}))},e.prototype.catch=function(e){return this.then((function(e){return e}),e)},e.prototype.finally=function(t){var r=this;return new e((function(e,n){var i,o;return r.then((function(e){o=!1,i=e,t&&t()}),(function(e){o=!0,i=e,t&&t()})).then((function(){o?n(i):e(i)}))}))},e}()},601:(e,t,r)=>{"use strict";r.d(t,{Z1:()=>p,_I:()=>l,ph:()=>u,yW:()=>c});var n=r(158),i=r(55);e=r.hmd(e);var o={nowSeconds:function(){return Date.now()/1e3}},a=(0,i.KV)()?function(){try{return(0,i.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){var e=(0,n.R)().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),s=void 0===a?o:{nowSeconds:function(){return(a.timeOrigin+a.now())/1e3}},c=o.nowSeconds.bind(o),u=s.nowSeconds.bind(s),l=u,p=function(){var e=(0,n.R)().performance;if(e&&e.now){var t=36e5,r=e.now(),i=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+r-i):t,a=o<t,s=e.timing&&e.timing.navigationStart,c="number"==typeof s?Math.abs(s+r-i):t;return a||c<t?o<=c?e.timeOrigin:s:i}}()},352:(e,t,r)=>{"use strict";var n=r(0),i=r(306),o=i(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?i(r):r}},306:(e,t,r)=>{"use strict";var n=r(364),i=r(0),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||n.call(a,o),c=i("%Object.getOwnPropertyDescriptor%",!0),u=i("%Object.defineProperty%",!0),l=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=s(n,a,arguments);if(c&&u){var r=c(t,"length");r.configurable&&u(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var p=function(){return s(n,o,arguments)};u?u(e.exports,"apply",{value:p}):e.exports.apply=p},897:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,i="[object Function]";e.exports=function(e){var o=this;if("function"!=typeof o||n.call(o)!==i)throw new TypeError(t+o);for(var a,s=r.call(arguments,1),c=function(){if(this instanceof a){var t=o.apply(this,s.concat(r.call(arguments)));return Object(t)===t?t:this}return o.apply(e,s.concat(r.call(arguments)))},u=Math.max(0,o.length-s.length),l=[],p=0;p<u;p++)l.push("$"+p);if(a=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(c),o.prototype){var d=function(){};d.prototype=o.prototype,a.prototype=new d,d.prototype=null}return a}},364:(e,t,r)=>{"use strict";var n=r(897);e.exports=Function.prototype.bind||n},0:(e,t,r)=>{"use strict";var n,i=SyntaxError,o=Function,a=TypeError,s=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var u=function(){throw new a},l=c?function(){try{return u}catch(e){try{return c(arguments,"callee").get}catch(e){return u}}}():u,p=r(478)(),d=Object.getPrototypeOf||function(e){return e.__proto__},f={},h="undefined"==typeof Uint8Array?n:d(Uint8Array),g={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":p?d([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?d(d([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&p?d((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&p?d((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?d(""[Symbol.iterator]()):n,"%Symbol%":p?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":l,"%TypedArray%":h,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},_=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(r=d(i.prototype))}return g[t]=r,r},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=r(364),y=r(743),b=v.call(Function.call,Array.prototype.concat),w=v.call(Function.apply,Array.prototype.splice),S=v.call(Function.call,String.prototype.replace),k=v.call(Function.call,String.prototype.slice),P=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,x=/\\(\\)?/g,O=function(e){var t=k(e,0,1),r=k(e,-1);if("%"===t&&"%"!==r)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return S(e,P,(function(e,t,r,i){n[n.length]=r?S(i,x,"$1"):t||e})),n},E=function(e,t){var r,n=e;if(y(m,n)&&(n="%"+(r=m[n])[0]+"%"),y(g,n)){var o=g[n];if(o===f&&(o=_(n)),void 0===o&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');var r=O(e),n=r.length>0?r[0]:"",o=E("%"+n+"%",t),s=o.name,u=o.value,l=!1,p=o.alias;p&&(n=p[0],w(r,b([0,1],p)));for(var d=1,f=!0;d<r.length;d+=1){var h=r[d],_=k(h,0,1),m=k(h,-1);if(('"'===_||"'"===_||"`"===_||'"'===m||"'"===m||"`"===m)&&_!==m)throw new i("property names with quotes must have matching quotes");if("constructor"!==h&&f||(l=!0),y(g,s="%"+(n+="."+h)+"%"))u=g[s];else if(null!=u){if(!(h in u)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&d+1>=r.length){var v=c(u,h);u=(f=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:u[h]}else f=y(u,h),u=u[h];f&&!l&&(g[s]=u)}}return u}},478:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(280);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&i()}},280:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},743:(e,t,r)=>{"use strict";var n=r(364);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},638:(e,t,r)=>{r(863),e.exports=self.fetch.bind(self)},813:(e,t,r)=>{var n="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=n&&i&&"function"==typeof i.get?i.get:null,a=n&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=s&&c&&"function"==typeof c.get?c.get:null,l=s&&Set.prototype.forEach,p="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,g=Object.prototype.toString,_=Function.prototype.toString,m=String.prototype.match,v=String.prototype.slice,y=String.prototype.replace,b=String.prototype.toUpperCase,w=String.prototype.toLowerCase,S=RegExp.prototype.test,k=Array.prototype.concat,P=Array.prototype.join,x=Array.prototype.slice,O=Math.floor,E="function"==typeof BigInt?BigInt.prototype.valueOf:null,T=Object.getOwnPropertySymbols,j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,A="function"==typeof Symbol&&"object"==typeof Symbol.iterator,D="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,C=Object.prototype.propertyIsEnumerable,I=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function N(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||S.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-O(-e):O(e);if(n!==e){var i=String(n),o=v.call(t,i.length+1);return y.call(i,r,"$&_")+"."+y.call(y.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return y.call(t,r,"$&_")}var R=r(654).custom,L=R&&M(R)?R:null;function $(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function H(e){return y.call(String(e),/"/g,"&quot;")}function U(e){return!("[object Array]"!==J(e)||D&&"object"==typeof e&&D in e)}function M(e){if(A)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!j)return!1;try{return j.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,n,i){var s=r||{};if(q(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(q(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!q(s,"customInspect")||s.customInspect;if("boolean"!=typeof c&&"symbol"!==c)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(q(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(q(s,"numericSeparator")&&"boolean"!=typeof s.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var g=s.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return W(t,s);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var b=String(t);return g?N(t,b):b}if("bigint"==typeof t){var S=String(t)+"n";return g?N(t,S):S}var O=void 0===s.depth?5:s.depth;if(void 0===n&&(n=0),n>=O&&O>0&&"object"==typeof t)return U(t)?"[Array]":"[Object]";var T,R=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=P.call(Array(e.indent+1)," ")}return{base:r,prev:P.call(Array(t+1),r)}}(s,n);if(void 0===i)i=[];else if(F(i,t)>=0)return"[Circular]";function B(t,r,o){if(r&&(i=x.call(i)).push(r),o){var a={depth:s.depth};return q(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,n+1,i)}return e(t,s,n+1,i)}if("function"==typeof t){var K=function(e){if(e.name)return e.name;var t=m.call(_.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),Z=Y(t,B);return"[Function"+(K?": "+K:" (anonymous)")+"]"+(Z.length>0?" { "+P.call(Z,", ")+" }":"")}if(M(t)){var Q=A?y.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):j.call(t);return"object"!=typeof t||A?Q:z(Q)}if((T=t)&&"object"==typeof T&&("undefined"!=typeof HTMLElement&&T instanceof HTMLElement||"string"==typeof T.nodeName&&"function"==typeof T.getAttribute)){for(var ee="<"+w.call(String(t.nodeName)),te=t.attributes||[],re=0;re<te.length;re++)ee+=" "+te[re].name+"="+$(H(te[re].value),"double",s);return ee+=">",t.childNodes&&t.childNodes.length&&(ee+="..."),ee+"</"+w.call(String(t.nodeName))+">"}if(U(t)){if(0===t.length)return"[]";var ne=Y(t,B);return R&&!function(e){for(var t=0;t<e.length;t++)if(F(e[t],"\n")>=0)return!1;return!0}(ne)?"["+G(ne,R)+"]":"[ "+P.call(ne,", ")+" ]"}if(function(e){return!("[object Error]"!==J(e)||D&&"object"==typeof e&&D in e)}(t)){var ie=Y(t,B);return"cause"in t&&!C.call(t,"cause")?"{ ["+String(t)+"] "+P.call(k.call("[cause]: "+B(t.cause),ie),", ")+" }":0===ie.length?"["+String(t)+"]":"{ ["+String(t)+"] "+P.call(ie,", ")+" }"}if("object"==typeof t&&c){if(L&&"function"==typeof t[L])return t[L]();if("symbol"!==c&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var oe=[];return a.call(t,(function(e,r){oe.push(B(r,t,!0)+" => "+B(e,t))})),X("Map",o.call(t),oe,R)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ae=[];return l.call(t,(function(e){ae.push(B(e,t))})),X("Set",u.call(t),ae,R)}if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{p.call(e,p);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return V("WeakMap");if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{p.call(e,p)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return V("WeakSet");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{return f.call(e),!0}catch(e){}return!1}(t))return V("WeakRef");if(function(e){return!("[object Number]"!==J(e)||D&&"object"==typeof e&&D in e)}(t))return z(B(Number(t)));if(function(e){if(!e||"object"!=typeof e||!E)return!1;try{return E.call(e),!0}catch(e){}return!1}(t))return z(B(E.call(t)));if(function(e){return!("[object Boolean]"!==J(e)||D&&"object"==typeof e&&D in e)}(t))return z(h.call(t));if(function(e){return!("[object String]"!==J(e)||D&&"object"==typeof e&&D in e)}(t))return z(B(String(t)));if(!function(e){return!("[object Date]"!==J(e)||D&&"object"==typeof e&&D in e)}(t)&&!function(e){return!("[object RegExp]"!==J(e)||D&&"object"==typeof e&&D in e)}(t)){var se=Y(t,B),ce=I?I(t)===Object.prototype:t instanceof Object||t.constructor===Object,ue=t instanceof Object?"":"null prototype",le=!ce&&D&&Object(t)===t&&D in t?v.call(J(t),8,-1):ue?"Object":"",pe=(ce||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(le||ue?"["+P.call(k.call([],le||[],ue||[]),": ")+"] ":"");return 0===se.length?pe+"{}":R?pe+"{"+G(se,R)+"}":pe+"{ "+P.call(se,", ")+" }"}return String(t)};var B=Object.prototype.hasOwnProperty||function(e){return e in this};function q(e,t){return B.call(e,t)}function J(e){return g.call(e)}function F(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function W(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return W(v.call(e,0,t.maxStringLength),t)+n}return $(y.call(y.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,K),"single",t)}function K(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function z(e){return"Object("+e+")"}function V(e){return e+" { ? }"}function X(e,t,r,n){return e+" ("+t+") {"+(n?G(r,n):P.call(r,", "))+"}"}function G(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+P.call(e,","+r)+"\n"+t.prev}function Y(e,t){var r=U(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=q(e,i)?t(e[i],e):""}var o,a="function"==typeof T?T(e):[];if(A){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var c in e)q(e,c)&&(r&&String(Number(c))===c&&c<e.length||A&&o["$"+c]instanceof Symbol||(S.call(/[^\w$]/,c)?n.push(t(c,e)+": "+t(e[c],e)):n.push(c+": "+t(e[c],e))));if("function"==typeof T)for(var u=0;u<a.length;u++)C.call(e,a[u])&&n.push("["+t(a[u])+"]: "+t(e[a[u]],e));return n}},747:(e,t,r)=>{"use strict";var n=r(0),i=r(352),o=r(813),a=n("%TypeError%"),s=n("%WeakMap%",!0),c=n("%Map%",!0),u=i("WeakMap.prototype.get",!0),l=i("WeakMap.prototype.set",!0),p=i("WeakMap.prototype.has",!0),d=i("Map.prototype.get",!0),f=i("Map.prototype.set",!0),h=i("Map.prototype.has",!0),g=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new a("Side channel does not contain "+o(e))},get:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return u(e,n)}else if(c){if(t)return d(t,n)}else if(r)return function(e,t){var r=g(e,t);return r&&r.value}(r,n)},has:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return p(e,n)}else if(c){if(t)return h(t,n)}else if(r)return function(e,t){return!!g(e,t)}(r,n);return!1},set:function(n,i){s&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new s),l(e,n,i)):c?(t||(t=new c),f(t,n,i)):(r||(r={key:{},next:null}),function(e,t,r){var n=g(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(r,n,i))}};return n}},32:(e,t,r)=>{"use strict";r.d(t,{CR:()=>c,XA:()=>s,ZT:()=>i,_T:()=>a,fl:()=>u,pi:()=>o});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function s(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}},285:e=>{"use strict";var t=String.prototype.replace,r=/%20/g,n="RFC3986";e.exports={default:n,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:n}},474:(e,t,r)=>{"use strict";var n=r(801),i=r(888),o=r(285);e.exports={formats:o,parse:i,stringify:n}},888:(e,t,r)=>{"use strict";var n=r(867),i=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,r,n){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(o),u=s?o.slice(0,s.index):o,l=[];if(u){if(!r.plainObjects&&i.call(Object.prototype,u)&&!r.allowPrototypes)return;l.push(u)}for(var p=0;r.depth>0&&null!==(s=a.exec(o))&&p<r.depth;){if(p+=1,!r.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+o.slice(s.index)+"]"),function(e,t,r,n){for(var i=n?t:c(t,r),o=e.length-1;o>=0;--o){var a,s=e[o];if("[]"===s&&r.parseArrays)a=[].concat(i);else{a=r.plainObjects?Object.create(null):{};var u="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(u,10);r.parseArrays||""!==u?!isNaN(l)&&s!==u&&String(l)===u&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(a=[])[l]=i:"__proto__"!==u&&(a[u]=i):a={0:i}}i=a}return i}(l,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){var r,u={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,p=t.parameterLimit===1/0?void 0:t.parameterLimit,d=l.split(t.delimiter,p),f=-1,h=t.charset;if(t.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?h="utf-8":"utf8=%26%2310003%3B"===d[r]&&(h="iso-8859-1"),f=r,r=d.length);for(r=0;r<d.length;++r)if(r!==f){var g,_,m=d[r],v=m.indexOf("]="),y=-1===v?m.indexOf("="):v+1;-1===y?(g=t.decoder(m,a.decoder,h,"key"),_=t.strictNullHandling?null:""):(g=t.decoder(m.slice(0,y),a.decoder,h,"key"),_=n.maybeMap(c(m.slice(y+1),t),(function(e){return t.decoder(e,a.decoder,h,"value")}))),_&&t.interpretNumericEntities&&"iso-8859-1"===h&&(_=s(_)),m.indexOf("[]=")>-1&&(_=o(_)?[_]:_),i.call(u,g)?u[g]=n.combine(u[g],_):u[g]=_}return u}(e,r):e,p=r.plainObjects?Object.create(null):{},d=Object.keys(l),f=0;f<d.length;++f){var h=d[f],g=u(h,l[h],r,"string"==typeof e);p=n.merge(p,g,r)}return!0===r.allowSparse?p:n.compact(p)}},801:(e,t,r)=>{"use strict";var n=r(747),i=r(867),o=r(285),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,u=String.prototype.split,l=Array.prototype.push,p=function(e,t){l.apply(e,c(t)?t:[t])},d=Date.prototype.toISOString,f=o.default,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:f,formatter:o.formatters[f],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},g={},_=function e(t,r,o,a,s,l,d,f,_,m,v,y,b,w,S){for(var k,P=t,x=S,O=0,E=!1;void 0!==(x=x.get(g))&&!E;){var T=x.get(t);if(O+=1,void 0!==T){if(T===O)throw new RangeError("Cyclic object value");E=!0}void 0===x.get(g)&&(O=0)}if("function"==typeof d?P=d(r,P):P instanceof Date?P=m(P):"comma"===o&&c(P)&&(P=i.maybeMap(P,(function(e){return e instanceof Date?m(e):e}))),null===P){if(a)return l&&!b?l(r,h.encoder,w,"key",v):r;P=""}if("string"==typeof(k=P)||"number"==typeof k||"boolean"==typeof k||"symbol"==typeof k||"bigint"==typeof k||i.isBuffer(P)){if(l){var j=b?r:l(r,h.encoder,w,"key",v);if("comma"===o&&b){for(var A=u.call(String(P),","),D="",C=0;C<A.length;++C)D+=(0===C?"":",")+y(l(A[C],h.encoder,w,"value",v));return[y(j)+"="+D]}return[y(j)+"="+y(l(P,h.encoder,w,"value",v))]}return[y(r)+"="+y(String(P))]}var I,N=[];if(void 0===P)return N;if("comma"===o&&c(P))I=[{value:P.length>0?P.join(",")||null:void 0}];else if(c(d))I=d;else{var R=Object.keys(P);I=f?R.sort(f):R}for(var L=0;L<I.length;++L){var $=I[L],H="object"==typeof $&&void 0!==$.value?$.value:P[$];if(!s||null!==H){var U=c(P)?"function"==typeof o?o(r,$):r:r+(_?"."+$:"["+$+"]");S.set(t,O);var M=n();M.set(g,S),p(N,e(H,U,o,a,s,l,d,f,_,m,v,y,b,w,M))}}return N};e.exports=function(e,t){var r,i=e,u=function(e){if(!e)return h;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||h.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if(void 0!==e.format){if(!a.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=o.formatters[r],i=h.filter;return("function"==typeof e.filter||c(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:h.addQueryPrefix,allowDots:void 0===e.allowDots?h.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:h.charsetSentinel,delimiter:void 0===e.delimiter?h.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:h.encode,encoder:"function"==typeof e.encoder?e.encoder:h.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:h.encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:h.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:h.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:h.strictNullHandling}}(t);"function"==typeof u.filter?i=(0,u.filter)("",i):c(u.filter)&&(r=u.filter);var l,d=[];if("object"!=typeof i||null===i)return"";l=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=s[l];r||(r=Object.keys(i)),u.sort&&r.sort(u.sort);for(var g=n(),m=0;m<r.length;++m){var v=r[m];u.skipNulls&&null===i[v]||p(d,_(i[v],v,f,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,g))}var y=d.join(u.delimiter),b=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),y.length>0?b+y:""}},867:(e,t,r)=>{"use strict";var n=r(285),i=Object.prototype.hasOwnProperty,o=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],s=Object.keys(a),c=0;c<s.length;++c){var u=s[c],l=a[u];"object"==typeof l&&null!==l&&-1===r.indexOf(l)&&(t.push({obj:a,prop:u}),r.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,i,o){if(0===e.length)return e;var s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===r)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",u=0;u<s.length;++u){var l=s.charCodeAt(u);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||o===n.RFC1738&&(40===l||41===l)?c+=s.charAt(u):l<128?c+=a[l]:l<2048?c+=a[192|l>>6]+a[128|63&l]:l<55296||l>=57344?c+=a[224|l>>12]+a[128|l>>6&63]+a[128|63&l]:(u+=1,l=65536+((1023&l)<<10|1023&s.charCodeAt(u)),c+=a[240|l>>18]+a[128|l>>12&63]+a[128|l>>6&63]+a[128|63&l])}return c},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(o(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return o(t)&&!o(r)&&(a=s(t,n)),o(t)&&o(r)?(r.forEach((function(r,o){if(i.call(t,o)){var a=t[o];a&&"object"==typeof a&&r&&"object"==typeof r?t[o]=e(a,r,n):t.push(r)}else t[o]=r})),t):Object.keys(r).reduce((function(t,o){var a=r[o];return i.call(t,o)?t[o]=e(t[o],a,n):t[o]=a,t}),a)}}},863:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DOMException:()=>x,Headers:()=>h,Request:()=>w,Response:()=>k,fetch:()=>O});var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n&&n,i="URLSearchParams"in n,o="Symbol"in n&&"iterator"in Symbol,a="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in n,c="ArrayBuffer"in n;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function p(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function _(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function m(e){var t=new FileReader,r=_(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&a&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(m)}),this.text=function(){var e,t,r,n=g(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,r=_(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=p(e),t=d(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},h.prototype.delete=function(e){delete this.map[p(e)]},h.prototype.get=function(e){return e=p(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(p(e))},h.prototype.set=function(e,t){this.map[p(e)]=d(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),f(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),f(e)},o&&(h.prototype[Symbol.iterator]=h.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,i=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),b.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function S(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function k(e,t){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},y.call(w.prototype),y.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:0,statusText:""});return e.type="error",e};var P=[301,302,303,307,308];k.redirect=function(e,t){if(-1===P.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})};var x=n.DOMException;try{new x}catch(e){(x=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),x.prototype.constructor=x}function O(e,t){return new Promise((function(r,i){var o=new w(e,t);if(o.signal&&o.signal.aborted)return i(new x("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;setTimeout((function(){r(new k(i,n))}),0)},s.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){i(new x("Aborted","AbortError"))}),0)},s.open(o.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&(a?s.responseType="blob":c&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof h?o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){s.setRequestHeader(e,d(t.headers[e]))})),o.signal&&(o.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",u)}),s.send(void 0===o._bodyInit?null:o._bodyInit)}))}O.polyfill=!0,n.fetch||(n.fetch=O,n.Headers=h,n.Request=w,n.Response=k)},654:()=>{}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n](o,o.exports,r),o.loaded=!0,o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};r.r(e),r.d(e,{FunctionToString:()=>yr,InboundFilters:()=>xr});var t={};r.r(t),r.d(t,{Breadcrumbs:()=>Jn,Dedupe:()=>Qn,GlobalHandlers:()=>jn,LinkedErrors:()=>Xn,TryCatch:()=>Ln,UserAgent:()=>Zn});var n,i={};function a(e){return"function"==typeof e||!(!e||"object"!=typeof e)&&a(e.listener)}function s(){this._events={}}function c(e){var t=e;try{t=decodeURIComponent(e)}catch(r){t=e}return t}function u(e){for(var t={},r=(e=e||"").substring(1).split("&"),n=0;n<r.length;n++){var i=r[n].indexOf("=");if(-1!==i){var o=r[n].substring(0,i),a=r[n].substring(i+1);o=c(o),a=c(a),t[o]=a}}return t}function l(e){return"[object String]"==Object.prototype.toString.call(e)}function p(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}(function(){var e={function:!0,object:!0},t=e[typeof window]&&window||this,r=t.JSON,n=t.JSON3,i=!1,o=function r(n,i){n||(n=t.Object()),i||(i=t.Object());var o=n.Number||t.Number,a=n.String||t.String,s=n.Object||t.Object,c=n.Date||t.Date,u=n.SyntaxError||t.SyntaxError,l=n.TypeError||t.TypeError,p=n.Math||t.Math,d=n.JSON||t.JSON;if("object"==typeof d&&d)return i.stringify=d.stringify,i.parse=d.parse,i.runInContext=r,i;var f,h=s.prototype,g=h.toString,_=h.hasOwnProperty;function m(e,t){try{e()}catch(e){t&&t()}}var v=new c(-0xc782b5b800cec);function y(e){if(null!=y[e])return y[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=y("json-stringify")&&y("date-serialization")&&y("json-parse");else if("date-serialization"==e){if(t=y("json-stringify")&&v){var r=i.stringify;m((function(){t='"-271821-04-20T00:00:00.000Z"'==r(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==r(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==r(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==r(new c(-1))}))}}else{var n,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u="function"==typeof(r=i.stringify);u&&((n=function(){return 1}).toJSON=n,m((function(){u="0"===r(0)&&"0"===r(new o)&&'""'==r(new a)&&r(g)===f&&r(f)===f&&r()===f&&"1"===r(n)&&"[1]"==r([n])&&"[null]"==r([f])&&"null"==r(null)&&"[null,null,null]"==r([f,g,null])&&r({a:[n,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===r(null,n)&&"[\n 1,\n 2\n]"==r([1,2],null,1)}),(function(){u=!1}))),t=u}if("json-parse"==e){var l,p=i.parse;"function"==typeof p&&m((function(){0!==p("0")||p(!1)||(n=p(s),(l=5==n.a.length&&1===n.a[0])&&(m((function(){l=!p('"\t"')})),l&&m((function(){l=1!==p("01")})),l&&m((function(){l=1!==p("1.")}))))}),(function(){l=!1})),t=l}}return y[e]=!!t}if(m((function(){v=-109252==v.getUTCFullYear()&&0===v.getUTCMonth()&&1===v.getUTCDate()&&10==v.getUTCHours()&&37==v.getUTCMinutes()&&6==v.getUTCSeconds()&&708==v.getUTCMilliseconds()})),y["bug-string-char-index"]=y["date-serialization"]=y.json=y["json-stringify"]=y["json-parse"]=null,!y("json")){var b=y("bug-string-char-index"),w=function(t,r){var n,i,o,a=0;for(o in(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n)_.call(i,o)&&a++;return n=i=null,a?w=function(e,t){var r,n,i="[object Function]"==g.call(e);for(r in e)i&&"prototype"==r||!_.call(e,r)||(n="constructor"===r)||t(r);(n||_.call(e,r="constructor"))&&t(r)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],w=function(t,r){var n,o,a="[object Function]"==g.call(t),s=!a&&"function"!=typeof t.constructor&&e[typeof t.hasOwnProperty]&&t.hasOwnProperty||_;for(n in t)a&&"prototype"==n||!s.call(t,n)||r(n);for(o=i.length;n=i[--o];)s.call(t,n)&&r(n)}),w(t,r)};if(!y("json-stringify")&&!y("date-serialization")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},k=function(e,t){return("000000"+(t||0)).slice(-e)},P=function(e){var t,r,n,i,o,a,s,c,u;if(v)t=function(e){r=e.getUTCFullYear(),n=e.getUTCMonth(),i=e.getUTCDate(),a=e.getUTCHours(),s=e.getUTCMinutes(),c=e.getUTCSeconds(),u=e.getUTCMilliseconds()};else{var l=p.floor,d=[0,31,59,90,120,151,181,212,243,273,304,334],f=function(e,t){return d[t]+365*(e-1970)+l((e-1969+(t=+(t>1)))/4)-l((e-1901+t)/100)+l((e-1601+t)/400)};t=function(e){for(i=l(e/864e5),r=l(i/365.2425)+1970-1;f(r+1,0)<=i;r++);for(n=l((i-f(r,0))/30.42);f(r,n+1)<=i;n++);i=1+i-f(r,n),a=l((o=(e%864e5+864e5)%864e5)/36e5)%24,s=l(o/6e4)%60,c=l(o/1e3)%60,u=o%1e3}}return(P=function(e){return e>-1/0&&e<1/0?(t(e),e=(r<=0||r>=1e4?(r<0?"-":"+")+k(6,r<0?-r:r):k(4,r))+"-"+k(2,n+1)+"-"+k(2,i)+"T"+k(2,a)+":"+k(2,s)+":"+k(2,c)+"."+k(3,u)+"Z",r=n=i=a=s=c=u=null):e=null,e})(e)};if(y("json-stringify")&&!y("date-serialization")){function U(e){return P(this)}var x=i.stringify;i.stringify=function(e,t,r){var n=c.prototype.toJSON;c.prototype.toJSON=U;var i=x(e,t,r);return c.prototype.toJSON=n,i}}else{var O=function(e){var t=e.charCodeAt(0);return S[t]||"\\u00"+k(2,t.toString(16))},E=/[\x00-\x1f\x22\x5c]/g,T=function(e){return E.lastIndex=0,'"'+(E.test(e)?e.replace(E,O):e)+'"'},j=function(e,t,r,n,i,o,a){var s,u,p,d,h,_,v,y,b;if(m((function(){s=t[e]})),"object"==typeof s&&s&&(s.getUTCFullYear&&"[object Date]"==g.call(s)&&s.toJSON===c.prototype.toJSON?s=P(s):"function"==typeof s.toJSON&&(s=s.toJSON(e))),r&&(s=r.call(t,e,s)),s==f)return s===f?s:"null";switch("object"==(u=typeof s)&&(p=g.call(s)),p||u){case"boolean":case"[object Boolean]":return""+s;case"number":case"[object Number]":return s>-1/0&&s<1/0?""+s:"null";case"string":case"[object String]":return T(""+s)}if("object"==typeof s){for(v=a.length;v--;)if(a[v]===s)throw l();if(a.push(s),d=[],y=o,o+=i,"[object Array]"==p){for(_=0,v=s.length;_<v;_++)h=j(_,s,r,n,i,o,a),d.push(h===f?"null":h);b=d.length?i?"[\n"+o+d.join(",\n"+o)+"\n"+y+"]":"["+d.join(",")+"]":"[]"}else w(n||s,(function(e){var t=j(e,s,r,n,i,o,a);t!==f&&d.push(T(e)+":"+(i?" ":"")+t)})),b=d.length?i?"{\n"+o+d.join(",\n"+o)+"\n"+y+"}":"{"+d.join(",")+"}":"{}";return a.pop(),b}};i.stringify=function(t,r,n){var i,o,a,s;if(e[typeof r]&&r)if("[object Function]"==(s=g.call(r)))o=r;else if("[object Array]"==s){a={};for(var c,u=0,l=r.length;u<l;)c=r[u++],"[object String]"!=(s=g.call(c))&&"[object Number]"!=s||(a[c]=1)}if(n)if("[object Number]"==(s=g.call(n))){if((n-=n%1)>0)for(n>10&&(n=10),i="";i.length<n;)i+=" "}else"[object String]"==s&&(i=n.length<=10?n:n.slice(0,10));return j("",((c={})[""]=t,c),o,a,i,"",[])}}}if(!y("json-parse")){var A,D,C=a.fromCharCode,I={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},N=function(){throw A=D=null,u()},R=function(){for(var e,t,r,n,i,o=D,a=o.length;A<a;)switch(i=o.charCodeAt(A)){case 9:case 10:case 13:case 32:A++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=b?o.charAt(A):o[A],A++,e;case 34:for(e="@",A++;A<a;)if((i=o.charCodeAt(A))<32)N();else if(92==i)switch(i=o.charCodeAt(++A)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=I[i],A++;break;case 117:for(t=++A,r=A+4;A<r;A++)(i=o.charCodeAt(A))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||N();e+=C("0x"+o.slice(t,A));break;default:N()}else{if(34==i)break;for(i=o.charCodeAt(A),t=A;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++A);e+=o.slice(t,A)}if(34==o.charCodeAt(A))return A++,e;N();default:if(t=A,45==i&&(n=!0,i=o.charCodeAt(++A)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(A+1))>=48&&i<=57&&N(),n=!1;A<a&&(i=o.charCodeAt(A))>=48&&i<=57;A++);if(46==o.charCodeAt(A)){for(r=++A;r<a&&!((i=o.charCodeAt(r))<48||i>57);r++);r==A&&N(),A=r}if(101==(i=o.charCodeAt(A))||69==i){for(43!=(i=o.charCodeAt(++A))&&45!=i||A++,r=A;r<a&&!((i=o.charCodeAt(r))<48||i>57);r++);r==A&&N(),A=r}return+o.slice(t,A)}n&&N();var s=o.slice(A,A+4);if("true"==s)return A+=4,!0;if("fals"==s&&101==o.charCodeAt(A+4))return A+=5,!1;if("null"==s)return A+=4,null;N()}return"$"},L=function(e){var t,r;if("$"==e&&N(),"string"==typeof e){if("@"==(b?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=R());)r?","==e?"]"==(e=R())&&N():N():r=!0,","==e&&N(),t.push(L(e));return t}if("{"==e){for(t={};"}"!=(e=R());)r?","==e?"}"==(e=R())&&N():N():r=!0,","!=e&&"string"==typeof e&&"@"==(b?e.charAt(0):e[0])&&":"==R()||N(),t[e.slice(1)]=L(R());return t}N()}return e},$=function(e,t,r){var n=H(e,t,r);n===f?delete e[t]:e[t]=n},H=function(e,t,r){var n,i=e[t];if("object"==typeof i&&i)if("[object Array]"==g.call(i))for(n=i.length;n--;)$(g,w,i);else w(i,(function(e){$(i,e,r)}));return r.call(e,t,i)};i.parse=function(e,t){var r,n;return A=0,D=""+e,r=L(R()),"$"!=R()&&N(),A=D=null,t&&"[object Function]"==g.call(t)?H(((n={})[""]=r,n),"",t):r}}}return i.runInContext=r,i}(t,t.JSON3={noConflict:function(){return i||(i=!0,t.JSON=r,t.JSON3=n,r=n=null),o}});t.JSON={parse:o.parse,stringify:o.stringify}}).call(window),function(e){if(e.atob)try{e.atob(" ")}catch(n){e.atob=(t=e.atob,(r=function(e){return t(String(e).replace(/[\t\n\f\r ]+/g,""))}).original=t,r)}else{var t,r,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;e.btoa=function(e){for(var t,r,i,o,a="",s=0,c=(e=String(e)).length%3;s<e.length;){if((r=e.charCodeAt(s++))>255||(i=e.charCodeAt(s++))>255||(o=e.charCodeAt(s++))>255)return"";a+=n.charAt((t=r<<16|i<<8|o)>>18&63)+n.charAt(t>>12&63)+n.charAt(t>>6&63)+n.charAt(63&t)}return c?a.slice(0,c-3)+"===".substring(c):a},e.atob=function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!i.test(e))return"";e+="==".slice(2-(3&e.length));for(var t,r,o,a="",s=0;s<e.length;)t=n.indexOf(e.charAt(s++))<<18|n.indexOf(e.charAt(s++))<<12|(r=n.indexOf(e.charAt(s++)))<<6|(o=n.indexOf(e.charAt(s++))),a+=64===r?String.fromCharCode(t>>16&255):64===o?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return a}}}(window),String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(e,"g"),t)}),s.prototype.on=function(e,t){if(!e||!t)return!1;if(!a(t))throw new Error("listener must be a function");this._events[e]=this._events[e]||[];var r="object"==typeof t;return this._events[e].push(r?t:{listener:t,once:!1}),this},s.prototype.prepend=function(e,t){if(!e||!t)return!1;if(!a(t))throw new Error("listener must be a function");this._events[e]=this._events[e]||[];var r="object"==typeof t;return this._events[e].unshift(r?t:{listener:t,once:!1}),this},s.prototype.prependOnce=function(e,t){return this.prepend(e,{listener:t,once:!0})},s.prototype.once=function(e,t){return this.on(e,{listener:t,once:!0})},s.prototype.off=function(e,t){var r=this._events[e];if(!r)return!1;if("number"==typeof t)r.splice(t,1);else if("function"==typeof t)for(var n=0,i=r.length;n<i;n++)r[n]&&r[n].listener===t&&r.splice(n,1);return this},s.prototype.emit=function(e,t){var r=this._events[e];if(!r)return!1;for(var n=0;n<r.length;n++){var i=r[n];i&&(i.listener.call(this,t||{}),i.once&&this.off(e,n))}return this},s.prototype.removeAllListeners=function(e){e&&this._events[e]?this._events[e]=[]:this._events={}},s.prototype.listeners=function(e){return e&&"string"==typeof e?this._events[e]:this._events};var d={setup:function(e){n=e},log:function(){(n||console&&console.log||function(){}).apply(null,arguments)}};function f(e){var t=function(e){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Path:8,URL:0,QueryString:9,Fragment:10},this._values={},this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,void 0!==e&&this._parse(e)};return t.prototype.setUrl=function(e){this._parse(e)},t.prototype._initValues=function(){for(var e in this._fields)this._values[e]=""},t.prototype.addQueryString=function(e){if("object"!=typeof e)return!1;var t=this._values.QueryString||"";for(var r in e)t=new RegExp(r+"[^&]+").test(t)?t.replace(new RegExp(r+"[^&]+"),r+"="+e[r]):"&"===t.slice(-1)?t+r+"="+e[r]:""===t?r+"="+e[r]:t+"&"+r+"="+e[r];this._values.QueryString=t},t.prototype.getUrl=function(){var e="";return e+=this._values.Origin,e+=this._values.Port?":"+this._values.Port:"",e+=this._values.Path,(e+=this._values.QueryString?"?"+this._values.QueryString:"")+(this._values.Fragment?"#"+this._values.Fragment:"")},t.prototype._parse=function(e){this._initValues();var t=this._regex.exec(e);t||d.log("URLParser::_parse -> Invalid URL");var r=e.split("#"),n=r[0],i=r.slice(1).join("#");for(var o in t=this._regex.exec(n),this._fields)void 0!==t[this._fields[o]]&&(this._values[o]=t[this._fields[o]]);this._values.Hostname=this._values.Host.replace(/:\d+$/,""),this._values.Origin=this._values.Protocol+"://"+this._values.Hostname,this._values.Fragment=i},new t(e)}function h(e){var t,r={};if("function"==typeof window.URL&&function(){try{return"http://modernizr.com/"===new URL("http://modernizr.com/").href}catch(e){return!1}}())(r=new URL(e)).searchParams||(r.searchParams=(t=u(r.search),{get:function(e){return t[e]}}));else{if(l(e)||(e=String(e)),e=p(e),!1===/^https?:\/\/.+/.test(e))return void d.log("Invalid URL");var n=f(e);r.hash=n._values.Fragment,r.host=n._values.Host?n._values.Host+(n._values.Port?":"+n._values.Port:""):"",r.href=n._values.URL,r.password=n._values.Password,r.pathname=n._values.Path,r.port=n._values.Port,r.search=n._values.QueryString?"?"+n._values.QueryString:"",r.username=n._values.Username,r.hostname=n._values.Hostname,r.protocol=n._values.Protocol?n._values.Protocol+":":"",r.origin=n._values.Origin?n._values.Origin+(n._values.Port?":"+n._values.Port:""):"",r.searchParams=function(){var e=u("?"+n._values.QueryString);return{get:function(t){return e[t]}}}()}return r}function g(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)}var _,v=(_=(new Date).getTime(),function(e){return Math.ceil((_=(9301*_+49297)%233280)/233280*e)});function y(){if("function"==typeof Uint32Array){var e="";if("undefined"!=typeof crypto?e=crypto:"undefined"!=typeof msCrypto&&(e=msCrypto),g(e)&&e.getRandomValues){var t=new Uint32Array(1);return e.getRandomValues(t)[0]/Math.pow(2,32)}}return v(1e19)/1e19}var b=function(){var e=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)};return function(){var t=String(screen.height*screen.width);t=t&&/\d{5,}/.test(t)?t.toString(16):String(31242*y()).replace(".","").slice(0,8);var r=e()+"-"+y().toString(16).replace(".","")+"-"+function(){var e,t,r=navigator.userAgent,n=[],i=0;function o(e,t){var r,i=0;for(r=0;r<t.length;r++)i|=n[r]<<8*r;return e^i}for(e=0;e<r.length;e++)t=r.charCodeAt(e),n.unshift(255&t),n.length>=4&&(i=o(i,n),n=[]);return n.length>0&&(i=o(i,n)),i.toString(16)}()+"-"+t+"-"+e();return r||(String(y())+String(y())+String(y())).slice(2,15)}}();function w(e){return!(!e||1!==e.nodeType)}function S(e){return void 0===e}function k(e){if(!e)return!1;var t=Object.prototype.toString.call(e);return"[object Function]"==t||"[object AsyncFunction]"==t}function P(e){return Array.isArray&&k(P)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function x(e){return new O(e)}var O=function(e){this.ele=e},E=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r};function T(e,t,r,n){function i(e){return e&&(e.preventDefault=i.preventDefault,e.stopPropagation=i.stopPropagation,e._getPath=i._getPath),e}i._getPath=function(){return this.path||this.composedPath&&this.composedPath()||x(this.target).getParents()},i.preventDefault=function(){this.returnValue=!1},i.stopPropagation=function(){this.cancelBubble=!0},function(e,t,r){if(void 0===n&&"click"===t&&(n=!0),e&&e.addEventListener)e.addEventListener(t,(function(e){e._getPath=i._getPath,r.call(this,e)}),n);else{var o="on"+t,a=e[o];e[o]=function(e,t,r,n){return function(o){if(o=o||i(window.event)){o.target=o.srcElement;var a,s,c=!0;return"function"==typeof r&&(a=r(o)),s=t.call(e,o),"beforeunload"!==n?(!1!==a&&!1!==s||(c=!1),c):void 0}}}(e,r,a,t)}}.apply(null,arguments)}function j(e){var t="pushState"in window.history?"popstate":"hashchange";T(window,t,e)}function A(e){if(e)return void 0!==window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?new XMLHttpRequest:"undefined"!=typeof XDomainRequest?new XDomainRequest:null;if(void 0!==window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){d.log(e)}}}O.prototype={addClass:function(e){return-1===(" "+this.ele.className+" ").indexOf(" "+e+" ")&&(this.ele.className=this.ele.className+(""===this.ele.className?"":" ")+e),this},removeClass:function(e){var t=" "+this.ele.className+" ";return-1!==t.indexOf(" "+e+" ")&&(this.ele.className=t.replace(" "+e+" "," ").slice(1,-1)),this},hasClass:function(e){return-1!==(" "+this.ele.className+" ").indexOf(" "+e+" ")},attr:function(e,t){return"string"==typeof e&&S(t)?this.ele.getAttribute(e):("string"==typeof e&&(t=String(t),this.ele.setAttribute(e,t)),this)},offset:function(){var e=this.ele.getBoundingClientRect();if(e.width||e.height){var t=this.ele.ownerDocument.documentElement;return{top:e.top+window.pageYOffset-t.clientTop,left:e.left+window.pageXOffset-t.clientLeft}}return{top:0,left:0}},getSize:function(){if(!window.getComputedStyle)return{width:this.ele.offsetWidth,height:this.ele.offsetHeight};try{var e=this.ele.getBoundingClientRect();return{width:e.width,height:e.height}}catch(e){return{width:0,height:0}}},getStyle:function(e){return this.ele.currentStyle?this.ele.currentStyle[e]:this.ele.ownerDocument.defaultView.getComputedStyle(this.ele,null).getPropertyValue(e)},wrap:function(e){var t=document.createElement(e);return this.ele.parentNode.insertBefore(t,this.ele),t.appendChild(this.ele),x(t)},getCssStyle:function(e){var t=this.ele.style.getPropertyValue(e);if(t)return t;var r=null;if("function"==typeof window.getMatchedCSSRules&&(r=window.getMatchedCSSRules(this.ele)),!r||!P(r))return null;for(var n=r.length-1;n>=0;n--)if(t=r[n].style.getPropertyValue(e))return t},sibling:function(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e},next:function(){return this.sibling(this.ele,"nextSibling")},prev:function(){return this.sibling(this.ele,"previousSibling")},siblings:function(){return E((this.ele.parentNode||{}).firstChild,this.ele)},children:function(){return E(this.ele.firstChild)},parent:function(){var e=this.ele.parentNode;return x(e=e&&11!==e.nodeType?e:null)},previousElementSibling:function(){var e=this.ele;if("previousElementSibling"in document.documentElement)return x(e.previousElementSibling);for(;e=e.previousSibling;)if(1===e.nodeType)return x(e);return x(null)},getSameTypeSiblings:function(){for(var e=this.ele,t=e.parentNode,r=e.tagName.toLowerCase(),n=[],i=0;i<t.children.length;i++){var o=t.children[i];1===o.nodeType&&o.tagName.toLowerCase()===r&&n.push(t.children[i])}return n},getParents:function(){try{var e=this.ele;if(!w(e))return[];var t=[e];if(null===e||null===e.parentElement)return[];for(;null!==e.parentElement;)e=e.parentElement,t.push(e);return t}catch(e){return[]}}};var D=Array.prototype.forEach,C=Object.prototype.hasOwnProperty;function I(e,t,r){if(null==e)return!1;if(D&&e.forEach===D)e.forEach(t,r);else if(P(e))for(var n=0,i=e.length;n<i;n++)n in e&&t.call(r,e[n],n,e);else for(var o in e)C.call(e,o)&&t.call(r,e[o],o,e)}var N=Object.prototype.hasOwnProperty;function R(e){return I(Array.prototype.slice.call(arguments,1),(function(t){for(var r in t)N.call(t,r)&&void 0!==t[r]&&(e[r]=t[r])})),e}function L(e){function t(e){if(!e)return"";try{return JSON.parse(e)}catch(e){return{}}}e.timeout=e.timeout||2e4,e.credentials=void 0===e.credentials||e.credentials;var r=A(e.cors);if(!r)return!1;e.type||(e.type=e.data?"POST":"GET");var n,i=(e=R({success:function(){},error:function(){}},e)).success,o=e.error;e.success=function(e){i(e),n&&(clearTimeout(n),n=null)},e.error=function(e){o(e),n&&(clearTimeout(n),n=null)},n=setTimeout((function(){!function(){try{g(r)&&r.abort&&r.abort()}catch(e){d.log(e)}n&&(clearTimeout(n),n=null,e.error&&e.error(),r.onreadystatechange=null,r.onload=null,r.onerror=null)}()}),e.timeout),"undefined"!=typeof XDomainRequest&&r instanceof XDomainRequest&&(r.onload=function(){e.success&&e.success(t(r.responseText)),r.onreadystatechange=null,r.onload=null,r.onerror=null},r.onerror=function(){e.error&&e.error(t(r.responseText),r.status),r.onreadystatechange=null,r.onerror=null,r.onload=null}),r.onreadystatechange=function(){try{4==r.readyState&&(r.status>=200&&r.status<300||304==r.status?e.success(t(r.responseText)):e.error(t(r.responseText),r.status),r.onreadystatechange=null,r.onload=null)}catch(e){r.onreadystatechange=null,r.onload=null}},r.open(e.type,e.url,!0);try{e.credentials&&(r.withCredentials=!0),g(e.header)&&I(e.header,(function(e,t){r.setRequestHeader&&r.setRequestHeader(t,e)})),e.data&&(e.cors||r.setRequestHeader&&r.setRequestHeader("X-Requested-With","XMLHttpRequest"),"application/json"===e.contentType?r.setRequestHeader&&r.setRequestHeader("Content-type","application/json; charset=UTF-8"):r.setRequestHeader&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"))}catch(e){d.log(e)}r.send(e.data||null)}function $(e,t){var r=[];return null==e?r:Array.prototype.map&&e.map===Array.prototype.map?e.map(t):(I(e,(function(e,n,i){r.push(t(e,n,i))})),r)}function H(e){var t=[];try{t=$(atob(e).split(""),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}))}catch(e){t=[]}try{return decodeURIComponent(t.join(""))}catch(e){return t.join("")}}function U(e){var t="";try{t=btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))}catch(r){t=e}return t}var M={get:function(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return c(i.substring(t.length,i.length))}return null},set:function(e,t,r,n,i,o,a){var s=a,c="",u="",p="";if(0!==(r=null==r?73e3:r)){var d=new Date;"s"===String(r).slice(-1)?d.setTime(d.getTime()+1e3*Number(String(r).slice(0,-1))):d.setTime(d.getTime()+24*r*60*60*1e3),c="; expires="+d.toGMTString()}function f(e){return!!e&&e.replaceAll(/\r\n/g,"")}l(i)&&""!==i&&(p="; SameSite="+i),o&&(u="; secure");var h="",g="",_="";e&&(h=f(e)),t&&(g=f(t)),s&&(_=f(s)),h&&g&&(document.cookie=h+"="+encodeURIComponent(g)+c+"; path=/"+_+p+u)},remove:function(e,t){this.set(e,"1",-1,t)},isSupport:function(e,t){e=e||"cookie_support_test",t=t||"1";var r=this;return navigator.cookieEnabled&&(r.set(e,t),r.get(e)===t&&(r.remove(e),!0))}};function B(e){return I(Array.prototype.slice.call(arguments,1),(function(t){for(var r in t)void 0!==t[r]&&void 0===e[r]&&(e[r]=t[r])})),e}function q(e){var t=e;try{t=decodeURI(e)}catch(r){t=e}return t}function J(e){var t="t6KJCZa5pDdQ9khoEM3Tj70fbP2eLSyc4BrsYugARqFIw1mzlGNVXOHiWvxUn8",r=t.length-1,n={},i=0;for(i=0;i<t.length;i++)n[t.charAt(i)]=t.charAt(r-i);var o="";for(i=0;i<e.length;i++)e.charAt(i)in n?o+=n[e.charAt(i)]:o+=e.charAt(i);return o}function F(e){return"[object Date]"==Object.prototype.toString.call(e)}function W(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+t(e.getMilliseconds())}function K(e,t,r){var n=Object.prototype.hasOwnProperty;if(e.filter)return e.filter(t);for(var i=[],o=0;o<e.length;o++)if(n.call(e,o)){var a=e[o];t.call(r,a,o,e)&&i.push(a)}return i}function z(e){try{return JSON.stringify(e,null,"  ")}catch(t){return JSON.stringify(e)}}function V(e,t){t=t||"domain_test";var r=(e=e||location.hostname)||!1;if(!r)return"";var n=r.split(".");if(P(n)&&n.length>=2&&!/^(\d+\.)+\d+$/.test(r))for(var i="."+n.splice(n.length-1,1);n.length>0;)if(i="."+n.splice(n.length-1,1)+i,document.cookie=t+"=true; path=/; domain="+i,-1!==document.cookie.indexOf(t+"=true")){var o=new Date;return o.setTime(o.getTime()-1e3),document.cookie=t+"=true; expires="+o.toGMTString()+"; path=/; SameSite=Lax; domain="+i,i}return""}function X(e){if(!l(e))return null;var t,r=e.split(">");return(t=function e(t){var n,i=r.shift();if(!i)return t;try{n=function(e,t){var r;if("body"===(e=p(e)))return document.getElementsByTagName("body")[0];if(0===e.indexOf("#"))e=e.slice(1),r=document.getElementById(e);else if(e.indexOf(":nth-of-type")>-1){var n=e.split(":nth-of-type");if(!n[0]||!n[1])return null;var i=n[0],o=n[1].match(/\(([0-9]+)\)/);if(!o||!o[1])return null;var a=Number(o[1]);if(!(w(t)&&t.children&&t.children.length>0))return null;for(var s=t.children,c=0;c<s.length;c++)if(w(s[c])&&s[c].tagName.toLowerCase()===i&&0==--a){r=s[c];break}if(a>0)return null}return r||null}(i,t)}catch(e){d.log(e)}return n&&w(n)?e(n):null}())&&w(t)?t:null}function G(e,t){var r="",n="";return e.textContent?r=p(e.textContent):e.innerText&&(r=p(e.innerText)),r&&(r=r.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)),n=r||"","input"!==t&&"INPUT"!==t||(n=e.value||""),n}function Y(e,t){t&&"string"==typeof t||(t="hostname解析异常");var r=null;try{r=h(e).hostname}catch(e){d.log("getHostname传入的url参数不合法！")}return r||t}function Z(){try{var e=navigator.appVersion.match(/OS (\d+)[._](\d+)[._]?(\d+)?/);return e&&e[1]?Number.parseInt(e[1],10):""}catch(e){return""}}function Q(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=c(e);var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===r||r&&"string"!=typeof r[1]&&r[1].length?"":c(r[1])}function ee(e){var t={},r=e.split("?")[1]||"";return r&&(t=u("?"+r)),t}function te(){return void 0!==window.matchMedia||void 0!==window.msMatchMedia}function re(){var e,t={},r=navigator.userAgent.toLowerCase();return(e=r.match(/opera.([\d.]+)/))?t.opera=Number(e[1].split(".")[0]):(e=r.match(/msie ([\d.]+)/))?t.ie=Number(e[1].split(".")[0]):(e=r.match(/edge.([\d.]+)/))?t.edge=Number(e[1].split(".")[0]):(e=r.match(/firefox\/([\d.]+)/))?t.firefox=Number(e[1].split(".")[0]):(e=r.match(/chrome\/([\d.]+)/))?t.chrome=Number(e[1].split(".")[0]):(e=r.match(/version\/([\d.]+).*safari/))?t.safari=Number(e[1].match(/^\d*.\d*/)):(e=r.match(/trident\/([\d.]+)/))&&(t.ie=11),t}function ne(e){return l(e)?q(e=p(e)):q(location.href)}function ie(e,t){return e.hasAttribute?e.hasAttribute(t):e.attributes?!(!e.attributes[t]||!e.attributes[t].specified):void 0}function oe(e,t){if("string"==typeof t)return ie(e,t);if(P(t)){for(var r=!1,n=0;n<t.length;n++)if(ie(e,t[n])){r=!0;break}return r}}function ae(e){if("string"!=typeof e)return 0;var t=0;if(0==e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}function se(e){var t=9007199254740992,r=-9007199254740992,n=0;if(e.length>0)for(var i=e.split(""),o=0;o<i.length;o++){var a=i[o].charCodeAt(),s=31*n+a;if(s>t)for(n=r+n;(s=31*n+a)<r;)n=n/2+a;if(s<r)for(n=t+n;(s=31*n+a)>t;)n=n/2+a;n=31*n+a}return n}function ce(e,t){var r=e.indexOf;if(r)return r.call(e,t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}var ue=Object.prototype.hasOwnProperty;function le(e){return!(!e||!ue.call(e,"callee"))}function pe(e){return"[object Boolean]"==Object.prototype.toString.call(e)}function de(e){if(g(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}return!1}function fe(e){return"string"==typeof e&&(!1!==/^https?:\/\/.+/.test(e)||(d.log("Invalid URL"),!1))}function he(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)}function ge(e){try{JSON.parse(e)}catch(e){return!1}return!0}function _e(e){return"[object Number]"==Object.prototype.toString.call(e)&&/[\d\.]+/.test(String(e))}function me(){var e=!1;if("object"!=typeof navigator||"function"!=typeof navigator.sendBeacon)return e;var t=re(),r=navigator.userAgent.toLowerCase();if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){var n=(r.match(/os [\d._]*/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".").split(".");void 0===t.safari&&(t.safari=n[0]),n[0]&&n[0]<13?(t.chrome>41||t.firefox>30||t.opera>25||t.safari>12)&&(e=!0):(t.chrome>41||t.firefox>30||t.opera>25||t.safari>11.3)&&(e=!0)}else(t.chrome>38||t.edge>13||t.firefox>30||t.opera>25||t.safari>11)&&(e=!0);return e}function ve(){return void 0!==window.XMLHttpRequest&&("withCredentials"in new XMLHttpRequest||"undefined"!=typeof XDomainRequest)}function ye(e){if(!g(e)||!l(e.callbackName))return d.log("JSONP 请求缺少 callbackName"),!1;e.success=k(e.success)?e.success:function(){},e.error=k(e.error)?e.error:function(){},e.data=e.data||"";var t=document.createElement("script"),r=document.getElementsByTagName("head")[0],n=null,i=!1;if(r.appendChild(t),_e(e.timeout)&&(n=setTimeout((function(){if(i)return!1;e.error("timeout"),window[e.callbackName]=function(){d.log("call jsonp error")},n=null,r.removeChild(t),i=!0}),e.timeout)),window[e.callbackName]=function(){clearTimeout(n),n=null,e.success.apply(null,arguments),window[e.callbackName]=function(){d.log("call jsonp error")},r.removeChild(t)},e.url.indexOf("?")>-1?e.url+="&callbackName="+e.callbackName:e.url+="?callbackName="+e.callbackName,g(e.data)){var o=[];I(e.data,(function(e,t){o.push(t+"="+e)})),e.data=o.join("&"),e.url+="&"+e.data}t.onerror=function(o){if(i)return!1;window[e.callbackName]=function(){d.log("call jsonp error")},clearTimeout(n),n=null,r.removeChild(t),e.error(o),i=!0},t.src=e.url}function be(e){({visibleHandler:k(e.visible)?e.visible:function(){},hiddenHandler:k(e.hidden)?e.hidden:function(){},visibilityChange:null,hidden:null,isSupport:function(){return void 0!==document[this.hidden]},init:function(){void 0!==document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):void 0!==document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),this.listen()},listen:function(){if(this.isSupport()){var e=this;T(document,this.visibilityChange,(function(){document[e.hidden]?e.hiddenHandler():e.visibleHandler()}),1)}else T(window,"focus",this.visibleHandler),T(window,"blur",this.hiddenHandler)}}).init()}function we(e){e=R({success:function(){},error:function(){},appendCall:function(e){document.getElementsByTagName("head")[0].appendChild(e)}},e);var t=null;"css"===e.type&&((t=document.createElement("link")).rel="stylesheet",t.href=e.url),"js"===e.type&&((t=document.createElement("script")).async="async",t.setAttribute("charset","UTF-8"),t.src=e.url,t.type="text/javascript"),t.onload=t.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e.success(),t.onload=t.onreadystatechange=null)},t.onerror=function(){e.error(),t.onerror=null},e.appendCall(t)}var Se={get:function(e){return window.localStorage.getItem(e)},parse:function(e){var t;try{t=JSON.parse(Se.get(e))||null}catch(e){d.log(e)}return t},set:function(e,t){window.localStorage.setItem(e,t)},remove:function(e){window.localStorage.removeItem(e)},isSupport:function(){var e=!0;try{var t="__local_store_support__",r="testIsSupportStorage";Se.set(t,r),Se.get(t)!==r&&(e=!1),Se.remove(t)}catch(t){e=!1}return e}};function ke(){return Date.now&&k(Date.now)?Date.now():(new Date).getTime()}function Pe(e){if("string"!=typeof e)return"";for(var t=/^\s*javascript/i;t.test(e);)e=e.replace(t,"");return e}function xe(e,t){t="number"==typeof t?t:13;for(var r=(e=String(e)).split(""),n=0,i=r.length;n<i;n++)r[n].charCodeAt(0)<126&&(r[n]=String.fromCharCode((r[n].charCodeAt(0)+t)%126));return r.join("")}function Oe(e){return xe(e=String(e),113)}function Ee(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t}function Te(e){g(e)&&I(e,(function(t,r){g(t)?Te(e[r]):F(t)&&(e[r]=W(t))}))}var je={isSupport:function(){var e=!0,t="testIsSupportStorage";try{sessionStorage&&sessionStorage.setItem?(sessionStorage.setItem("__session_storage_support__",t),sessionStorage.removeItem("__session_storage_support__",t),e=!0):e=!1}catch(t){e=!1}return e}};function Ae(e){var t=document.createElement("style");t.type="text/css";try{t.appendChild(document.createTextNode(e))}catch(r){t.styleSheet.cssText=e}var r=document.getElementsByTagName("head")[0],n=document.getElementsByTagName("script")[0];r?r.children.length?r.insertBefore(t,r.children[0]):r.appendChild(t):n.parentNode.insertBefore(t,n)}function De(e){var t=[];return null==e||I(e,(function(e){t[t.length]=e})),t}function Ce(e){for(var t,r=[],n={},i=0;i<e.length;i++)(t=e[i])in n||(n[t]=!0,r.push(t));return r}var Ie={"+":"-","/":"_","=":"."},Ne={"-":"+",_:"/",".":"="},Re={encode:function(e){return e.replace(/[+\/=]/g,(function(e){return Ie[e]}))},decode:function(e){return e.replace(/[-_.]/g,(function(e){return Ne[e]}))},trim:function(e){return e.replace(/[.=]{1,2}$/,"")},isBase64:function(e){return/^[A-Za-z0-9+\/]*[=]{0,2}$/.test(e)},isUrlSafeBase64:function(e){return/^[A-Za-z0-9_-]*[.]{0,2}$/.test(e)}},Le={__proto__:null,EventEmitter:s,URL:h,UUID:b,addEvent:T,addHashEvent:j,ajax:L,base64Decode:H,base64Encode:U,bindReady:function(e,t){t=t||window;var r=!1,n=!0,i=t.document,o=i.documentElement,a=i.addEventListener,s=a?"addEventListener":"attachEvent",c=a?"removeEventListener":"detachEvent",u=a?"":"on",l=function(n){"readystatechange"==n.type&&"complete"!=i.readyState||(("load"==n.type?t:i)[c](u+n.type,l,!1),!r&&(r=!0)&&e.call(t,n.type||n))},p=function(){try{o.doScroll("left")}catch(e){return void setTimeout(p,50)}l("poll")};if("complete"==i.readyState)e.call(t,"lazy");else{if(!a&&o.doScroll){try{n=!t.frameElement}catch(e){d.log(e)}n&&p()}i[s](u+"DOMContentLoaded",l,!1),i[s](u+"readystatechange",l,!1),t[s](u+"load",l,!1)}},cookie:M,coverExtend:B,decodeURI:q,decodeURIComponent:c,dfmapping:J,each:I,encodeDates:function e(t){return I(t,(function(r,n){F(r)?t[n]=W(r):g(r)&&(t[n]=e(r))})),t},extend:R,extend2Lev:function(e){return I(Array.prototype.slice.call(arguments,1),(function(t){for(var r in t)void 0!==t[r]&&(g(t[r])&&g(e[r])?R(e[r],t[r]):e[r]=t[r])})),e},filter:K,formatDate:W,formatJsonString:z,getCookieTopLevelDomain:V,getDomBySelector:X,getElementContent:G,getHostname:Y,getIOSVersion:Z,getQueryParam:Q,getQueryParamsFromUrl:ee,getRandom:y,getRandomBasic:v,getScreenOrientation:function(){var e=screen.msOrientation||screen.mozOrientation||(screen.orientation||{}).type,t="未取到值";if(e)t=e.indexOf("landscape")>-1?"landscape":"portrait";else if(te()){var r=window.matchMedia||window.msMatchMedia;r("(orientation: landscape)").matches?t="landscape":r("(orientation: portrait)").matches&&(t="portrait")}return t},getUA:re,getURL:ne,getURLSearchParams:u,hasAttribute:ie,hasAttributes:oe,hashCode:ae,hashCode53:se,indexOf:ce,inherit:function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},isArguments:le,isArray:P,isBoolean:pe,isDate:F,isElement:w,isEmptyObject:de,isFunction:k,isHttpUrl:fe,isIOS:he,isJSONString:ge,isNumber:_e,isObject:g,isString:l,isSupportBeaconSend:me,isSupportCors:ve,isUndefined:S,jsonp:ye,listenPageState:be,loadScript:we,localStorage:Se,logger:d,map:$,mediaQueriesSupported:te,now:ke,removeScriptProtocol:Pe,rot13defs:Oe,rot13obfs:xe,ry:x,safeJSONParse:Ee,searchObjDate:Te,sessionStorage:je,setCssStyle:Ae,strToUnicode:function(e){if("string"!=typeof e)return d.log("转换unicode错误",e),e;for(var t="",r=0;r<e.length;r++)t+="\\"+e.charCodeAt(r).toString(16);return t},throttle:function(e,t,r){var n,i,o,a=null,s=0;r||(r={});var c=function(){s=!1===r.leading?0:ke(),a=null,o=e.apply(n,i),a||(n=i=null)};return function(){var u=ke();s||!1!==r.leading||(s=u);var l=t-(u-s);return n=this,i=arguments,l<=0||l>t?(a&&(clearTimeout(a),a=null),s=u,o=e.apply(n,i),a||(n=i=null)):a||!1===r.trailing||(a=setTimeout(c,l)),o}},toArray:function(e){return e?e.toArray?e.toArray():P(e)||le(e)?Array.prototype.slice.call(e):De(e):[]},trim:p,unique:Ce,urlParse:f,urlSafeBase64:Re,values:De,xhr:A},$e={};function He(){if((je.isSupport()&&"true"===sessionStorage.getItem("sensorsdata_jssdk_debug")||$e.show_log)&&(!g(arguments[0])||!0!==$e.show_log&&"string"!==$e.show_log&&!1!==$e.show_log||(arguments[0]=z(arguments[0])),"object"==typeof console&&console.log))try{return console.log.apply(console,arguments)}catch(e){console.log(arguments[0])}}var Ue="data:enc;",Me="dfm-enc-";function Be(e){return!l(e)||0!==e.indexOf(Ue)&&0!==e.indexOf(Me)||(e=function(e){return 0===e.indexOf(Ue)?e=Oe(e=e.substring(Ue.length)):0===e.indexOf(Me)&&(e=J(e=e.substring(Me.length))),e}(e)),e}function qe(e){return Me+J(e)}var Je={distinct_id:function(){},jssdkDebug:function(){},_sendDebug:function(e){},apph5:function(e){var t="app_h5打通失败-",r={1:t+"use_app_track为false",2:t+"Android或者iOS，没有暴露相应方法",3.1:t+"Android校验server_url失败",3.2:t+"iOS校验server_url失败",4.1:t+"H5 校验 iOS server_url 失败",4.2:t+"H5 校验 Android server_url 失败"},n=e.output,i=e.step,o=e.data||"";"all"!==n&&"console"!==n||He(r[i]),("all"===n||"code"===n)&&g($e.is_debug)&&$e.is_debug.apph5&&(o.type&&"profile"===o.type.slice(0,7)||(o.properties._jssdk_debug_info="apph5-"+String(i)))},defineMode:function(e){var t={1:{title:"当前页面无法进行可视化全埋点",message:"App SDK 与 Web JS SDK 没有进行打通，请联系贵方技术人员修正 App SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_link-1573913.html"},2:{title:"当前页面无法进行可视化全埋点",message:"App SDK 与 Web JS SDK 没有进行打通，请联系贵方技术人员修正 Web JS SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_link-1573913.html"},3:{title:"当前页面无法进行可视化全埋点",message:"Web JS SDK 没有开启全埋点配置，请联系贵方工作人员修正 SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_web_all-1573964.html"},4:{title:"当前页面无法进行可视化全埋点",message:"Web JS SDK 配置的数据校验地址与 App SDK 配置的数据校验地址不一致，请联系贵方工作人员修正 SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_link-1573913.html"}};return!(!e||!t[e])&&t[e]},protocol:{protocolIsSame:function(e,t){try{if(h(e).protocol!==h(t).protocol)return!1}catch(e){return He("不支持 _.URL 方法"),!1}return!0},serverUrl:function(){l($e.server_url)&&""!==$e.server_url&&!this.protocolIsSame($e.server_url,location.href)&&He("SDK 检测到您的数据发送地址和当前页面地址的协议不一致，建议您修改成一致的协议。\n因为：1、https 下面发送 http 的图片请求会失败。2、http 页面使用 https + ajax 方式发数据，在 ie9 及以下会丢失数据。")},ajax:function(e){if(e===$e.server_url)return!1;l(e)&&""!==e&&!this.protocolIsSame(e,location.href)&&He("SDK 检测到您的数据发送地址和当前页面地址的协议不一致，建议您修改成一致的协议。因为 http 页面使用 https + ajax 方式发数据，在 ie9 及以下会丢失数据。")}}},Fe="utm_source utm_medium utm_campaign utm_content utm_term",We="1.22.1",Ke="sensorsdata_domain_test";function ze(e){var t=e.properties,r=JSON.parse(JSON.stringify(e));g(t)&&I(t,(function(e,n){if(k(e))try{t[n]=e(r),k(t[n])&&(He("您的属性- "+n+" 格式不满足要求，我们已经将其删除"),delete t[n])}catch(e){delete t[n],He("您的属性- "+n+" 抛出了异常，我们已经将其删除")}}))}function Ve(e){if("object"==typeof e&&e.$option){var t=e.$option;return delete e.$option,t}return{}}function Xe(e){var t={};return I(e,(function(e,r){null!=e&&(t[r]=e)})),t}function Ge(e){var t=$e.current_domain;switch(typeof t){case"function":var r=t();return""===r||""===p(r)?"url解析失败":-1!==r.indexOf(".")?r:"url解析失败";case"string":return""===t||""===p(t)?"url解析失败":-1!==t.indexOf(".")?t:"url解析失败";default:var n=V(null,Ke);return""===e||""===n?"url解析失败":n}}function Ye(e){if(!e.target)return!1;var t=e.target,r=t.tagName.toLowerCase(),n={};return n.$element_type=r,n.$element_name=t.getAttribute("name"),n.$element_id=t.getAttribute("id"),n.$element_class_name="string"==typeof t.className?t.className:null,n.$element_target_url=t.getAttribute("href"),n.$element_content=ut(t,r),(n=Xe(n)).$url=ne(),n.$url_path=location.pathname,n.$title=document.title,n}function Ze(){var e=document.referrer;if(!e)return!1;try{var t=h(e).hostname;return t&&"baidu.com"===t.substring(t.length-"baidu.com".length)}catch(e){return!1}}function Qe(){var e=ee(document.referrer);return de(e)||!e.eqid?b().replace(/-/g,""):e.eqid}function et(){var e=ee(document.referrer);if(de(e)||!e.eqid){var t=ee(location.href);return e.ck||t.utm_source?"baidu_sem_keyword_id":"baidu_other_keyword_id"}return"baidu_seo_keyword_id"}var tt={data:{},id:function(){return this.data.id||(this.data.id=Qe()),this.data.id},type:function(){return this.data.type||(this.data.type=et()),this.data.type}};function rt(e){return""===(e=e||document.referrer)||V(Y(e),Ke)!==V(null,Ke)}function nt(e,t){return"string"!=typeof(e=e||document.referrer)?"取值异常_referrer异常_"+String(e):(0!==(e=q(e=p(e))).indexOf("https://www.baidu.com/")||t||(e=e.split("?")[0]),"string"==typeof(e=e.slice(0,$e.max_referrer_string_length))?e:"")}function it(e){var t=Y(e);if(!t||"hostname解析异常"===t)return"";var r={baidu:[/^.*\.baidu\.com$/],bing:[/^.*\.bing\.com$/],google:[/^www\.google\.com$/,/^www\.google\.com\.[a-z]{2}$/,/^www\.google\.[a-z]{2}$/],sm:[/^m\.sm\.cn$/],so:[/^.+\.so\.com$/],sogou:[/^.*\.sogou\.com$/],yahoo:[/^.*\.yahoo\.com$/]};for(var n in r)for(var i=r[n],o=0,a=i.length;o<a;o++)if(i[o].test(t))return n;return"未知搜索引擎"}function ot(e,t){e=e||document.referrer;var r=$e.source_type.keyword;if(document&&"string"==typeof e){if(0===e.indexOf("http")){var n=it(e),i=ee(e);if(de(i))return $e.preset_properties.search_keyword_baidu&&Ze()?void 0:"未取到值";var o=null;for(var a in r)if(n===a&&"object"==typeof i)if(P(o=r[a]))for(a=0;a<o.length;a++){var s=i[o[a]];if(s)return t?{active:s}:s}else if(i[o])return t?{active:i[o]}:i[o];return $e.preset_properties.search_keyword_baidu&&Ze()?void 0:"未取到值"}return""===e?"未取到值_直接打开":"未取到值_非http的url"}return"取值异常_referrer异常_"+String(e)}function at(e){var t=Q(e,"gdt_vid"),r=Q(e,"hash_key"),n=Q(e,"callbacks"),i={click_id:"",hash_key:"",callbacks:""};return l(t)&&t.length&&(i.click_id=16==t.length||18==t.length?t:"参数解析不合法",l(r)&&r.length&&(i.hash_key=r),l(n)&&n.length&&(i.callbacks=n)),i}var st={initPage:function(){var e=nt(),t=ne(),r=Ge(t);r||Je.jssdkDebug("url_domain异常_"+t+"_"+r),this.pageProp={referrer:e,referrer_host:e?Y(e):"",url:t,url_host:Y(t,"url_host取值异常"),url_domain:r}},pageProp:{},campaignParams:function(){var e=Fe.split(" "),t="",r={};return P($e.source_channel)&&$e.source_channel.length>0&&(e=Ce(e=e.concat($e.source_channel))),I(e,(function(e){(t=Q(location.href,e)).length&&(r[e]=t)})),r},campaignParamsStandard:function(e,t){e=e||"",t=t||"";var r=st.campaignParams(),n={},i={};return I(r,(function(r,o,a){-1!==(" "+Fe+" ").indexOf(" "+o+" ")?n[e+o]=a[o]:i[t+o]=a[o]})),{$utms:n,otherUtms:i}},properties:function(){var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0;return{$timezone_offset:(new Date).getTimezoneOffset(),$screen_height:Number(screen.height)||0,$screen_width:Number(screen.width)||0,$viewport_height:e,$viewport_width:t,$lib:"js",$lib_version:We}},currentProps:{},register:function(e){R(st.currentProps,e)}};function ct(){function e(e,t){for(var r=0;r<e.length;r++)if(-1!==t.split("?")[0].indexOf(e[r]))return!0}var t="("+$e.source_type.utm.join("|")+")\\=[^&]+",r=$e.source_type.search,n=$e.source_type.social,i=document.referrer||"",o=st.pageProp.url;if(o){var a=o.match(new RegExp(t));return a&&a[0]?"付费广告流量":e(r,i)?"自然搜索流量":e(n,i)?"社交网站流量":""===i?"直接流量":"引荐流量"}return"获取url异常"}function ut(e,t){return l(t)&&"input"===t.toLowerCase()?function(e){var t=$e.heatmap&&"function"==typeof $e.heatmap.collect_input&&$e.heatmap.collect_input(e);return("button"===e.type||"submit"===e.type||t)&&e.value||""}(e):G(e,t)}function lt(e){return Je.protocol.ajax(e.url),L(e)}function pt(e,t,r){var n=!(!g($e.heatmap)||!$e.heatmap.useCapture);return g($e.heatmap)&&void 0===$e.heatmap.useCapture&&"click"===t&&(n=!0),T(e,t,r,n)}var dt={get:function(e){return M.get(e)},set:function(e,t,r,n){var i="";if(n=void 0===n?$e.cross_subdomain:n){var o=Ge(location.href);"url解析失败"===o&&(o=""),i=o?"; domain="+o:""}return M.set(e,t,r,n,$e.set_cookie_samesite,$e.is_secure_cookie,i)},remove:function(e,t){return t=void 0===t?$e.cross_subdomain:t,M.remove(e,t)},isSupport:function(e,t){return e=e||"sajssdk_2015_cookie_access_test",t=t||"1",M.isSupport(e,t)}};function ft(e,t){var r="";if(t=t||location.href,!1===$e.cross_subdomain){try{r=h(t).hostname}catch(e){He(e)}r="string"==typeof r&&""!==r?"sajssdk_2015_"+$e.sdk_id+e+"_"+r.replace(/\./g,"_"):"sajssdk_2015_root_"+$e.sdk_id+e}else r="sajssdk_2015_cross_"+$e.sdk_id+e;return r}function ht(){return dt.isSupport()?null!==dt.get("sensorsdata_is_new_user")||null!==dt.get(ft("new_user")):null!==gt.get(gt.getNewUserFlagMemoryKey("new_user"))}dt.getNewUser=ht;var gt={data:{},get:function(e){var t=this.data[e];return void 0===t?null:void 0!==t._expirationTimestamp_?(new Date).getTime()>t._expirationTimestamp_?null:t.value:t},set:function(e,t,r){if(r){var n=new Date;t={value:t,_expirationTimestamp_:"s"===String(r).slice(-1)?n.getTime()+1e3*Number(String(r).slice(0,-1)):n.getTime()+24*r*60*60*1e3}}this.data[e]=t},getNewUserFlagMemoryKey:function(e){return"sajssdk_2015_"+$e.sdk_id+e}},_t={checkIsAddSign:function(e){"track"===e.type&&(ht()?e.properties.$is_first_day=!0:e.properties.$is_first_day=!1)},is_first_visit_time:!1,is_page_first_visited:!1,checkIsFirstTime:function(e){"track"===e.type&&"$pageview"===e.event&&(this.is_first_visit_time?(e.properties.$is_first_time=!0,this.is_first_visit_time=!1):e.properties.$is_first_time=!1)},setDeviceId:function(e){var t=null,r=dt.get("sensorsdata2015jssdkcross"+i.para.sdk_id),n={};null!=(r=Be(r))&&ge(r)&&(n=JSON.parse(r)).$device_id&&(t=n.$device_id),t=t||e,!0===i.para.cross_subdomain?i.store.set("$device_id",t):(n.$device_id=t,n=JSON.stringify(n),i.para.encrypt_cookie&&(n=qe(n)),dt.set("sensorsdata2015jssdkcross"+i.para.sdk_id,n,null,!0)),i.para.is_track_device_id&&(st.currentProps.$device_id=t)},storeInitCheck:function(){if(i.is_first_visitor){var e=new Date,t={h:23-e.getHours(),m:59-e.getMinutes(),s:59-e.getSeconds()};dt.isSupport()?dt.set(ft("new_user"),"1",3600*t.h+60*t.m+t.s+"s"):gt.set(gt.getNewUserFlagMemoryKey("new_user"),"1",3600*t.h+60*t.m+t.s+"s"),this.is_first_visit_time=!0,this.is_page_first_visited=!0}else ht()||(this.checkIsAddSign=function(e){"track"===e.type&&(e.properties.$is_first_day=!1)}),this.checkIsFirstTime=function(e){"track"===e.type&&"$pageview"===e.event&&(e.properties.$is_first_time=!1)}},checkIsFirstLatest:function(){var e=st.pageProp.url_domain,t={};""===e&&(e="url解析失败");var r=ot(document.referrer,!0);if(i.para.preset_properties.search_keyword_baidu?rt(document.referrer)&&(!Ze()||g(r)&&r.active?i.store._state&&i.store._state.props&&(i.store._state.props.$search_keyword_id&&delete i.store._state.props.$search_keyword_id,i.store._state.props.$search_keyword_id_type&&delete i.store._state.props.$search_keyword_id_type,i.store._state.props.$search_keyword_id_hash&&delete i.store._state.props.$search_keyword_id_hash):(t.$search_keyword_id=tt.id(),t.$search_keyword_id_type=tt.type(),t.$search_keyword_id_hash=se(t.$search_keyword_id))):i.store._state&&i.store._state.props&&(i.store._state.props.$search_keyword_id&&delete i.store._state.props.$search_keyword_id,i.store._state.props.$search_keyword_id_type&&delete i.store._state.props.$search_keyword_id_type,i.store._state.props.$search_keyword_id_hash&&delete i.store._state.props.$search_keyword_id_hash),i.store.save(),I(i.para.preset_properties,(function(r,n){if(-1===n.indexOf("latest_"))return!1;if(n=n.slice(7),r){if("wx_ad_click_id"===n&&"not_collect"===r)return!1;if("utm"!==n&&"url解析失败"===e)"wx_ad_click_id"===n?(t._latest_wx_ad_click_id="url的domain解析失败",t._latest_wx_ad_hash_key="url的domain解析失败",t._latest_wx_ad_callbacks="url的domain解析失败"):t["$latest_"+n]="url的domain解析失败";else if(rt(document.referrer))switch(n){case"traffic_source_type":t.$latest_traffic_source_type=ct();break;case"referrer":t.$latest_referrer=st.pageProp.referrer;break;case"search_keyword":ot()?t.$latest_search_keyword=ot():g(i.store._state)&&g(i.store._state.props)&&i.store._state.props.$latest_search_keyword&&delete i.store._state.props.$latest_search_keyword;break;case"landing_page":t.$latest_landing_page=ne();break;case"wx_ad_click_id":var o=at(location.href);t._latest_wx_ad_click_id=o.click_id,t._latest_wx_ad_hash_key=o.hash_key,t._latest_wx_ad_callbacks=o.callbacks}}else if("utm"===n&&i.store._state&&i.store._state.props)for(var a in i.store._state.props)(0===a.indexOf("$latest_utm")||0===a.indexOf("_latest_")&&a.indexOf("_latest_wx_ad_")<0)&&delete i.store._state.props[a];else i.store._state&&i.store._state.props&&"$latest_"+n in i.store._state.props?delete i.store._state.props["$latest_"+n]:"wx_ad_click_id"==n&&i.store._state&&i.store._state.props&&!1===r&&I(["_latest_wx_ad_click_id","_latest_wx_ad_hash_key","_latest_wx_ad_callbacks"],(function(e){e in i.store._state.props&&delete i.store._state.props[e]}))})),i.register(t),i.para.preset_properties.latest_utm){var n=st.campaignParamsStandard("$latest_","_latest_"),o=n.$utms,a=n.otherUtms;de(o)||i.register(o),de(a)||i.register(a)}}},mt={identities:{set:function(e,t){var r={};switch(e){case"login":r[i.para.login_id_key]=t,r.$identity_cookie_id=i.store._state.identities.$identity_cookie_id;break;case"logout":r.$identity_cookie_id=i.store._state.identities.$identity_cookie_id;break;case"identify":(r=JSON.parse(JSON.stringify(i.store._state.identities))).$identity_anonymous_id=t}i.store._state.identities=r,i.store.save()}},requests:[],_sessionState:{},_state:{distinct_id:"",first_id:"",props:{},identities:{}},getProps:function(){return this._state.props||{}},getSessionProps:function(){return this._sessionState},getDistinctId:function(){return this._state._distinct_id||this._state.distinct_id},getUnionId:function(e){var t={},r=(e=e||this._state)._first_id||e.first_id,n=e._distinct_id||e.distinct_id;return r&&n?(t.login_id=n,t.anonymous_id=r):t.anonymous_id=n,t},getFirstId:function(){return this._state._first_id||this._state.first_id},initSessionState:function(){var e=dt.get("sensorsdata2015session"),t=null;null!==(e=Be(e))&&"object"==typeof(t=Ee(e))&&(this._sessionState=t||{})},setOnce:function(e,t){e in this._state||this.set(e,t)},set:function(e,t){this._state=this._state||{};var r=this._state.distinct_id;this._state[e]=t,"first_id"===e?delete this._state._first_id:"distinct_id"===e&&delete this._state._distinct_id,this.save(),"distinct_id"===e&&r&&i.events.tempAdd("changeDistinctId",t)},change:function(e,t){this._state["_"+e]=t},setSessionProps:function(e){var t=this._sessionState;R(t,e),this.sessionSave(t)},setSessionPropsOnce:function(e){var t=this._sessionState;B(t,e),this.sessionSave(t)},setProps:function(e,t){var r={};for(var n in r=t?e:R(this._state.props||{},e))"string"==typeof r[n]&&(r[n]=r[n].slice(0,i.para.max_referrer_string_length));this.set("props",r)},setPropsOnce:function(e){var t=this._state.props||{};B(t,e),this.set("props",t)},clearAllProps:function(e){var t;if(this._sessionState={},P(e)&&e.length>0)for(t=0;t<e.length;t++)l(e[t])&&-1===e[t].indexOf("latest_")&&g(this._state.props)&&e[t]in this._state.props&&delete this._state.props[e[t]];else if(g(this._state.props))for(t in this._state.props)1!==t.indexOf("latest_")&&delete this._state.props[t];this.sessionSave({}),this.save()},sessionSave:function(e){this._sessionState=e;var t=JSON.stringify(this._sessionState);i.para.encrypt_cookie&&(t=qe(t)),dt.set("sensorsdata2015session",t,0)},save:function(){var e=JSON.parse(JSON.stringify(this._state));delete e._first_id,delete e._distinct_id,e.identities&&(e.identities=U(JSON.stringify(e.identities)));var t=JSON.stringify(e);i.para.encrypt_cookie&&(t=qe(t)),dt.set(this.getCookieName(),t,73e3,i.para.cross_subdomain)},getCookieName:function(){var e="";if(!1===i.para.cross_subdomain){try{e=h(location.href).hostname}catch(e){i.log(e)}e="string"==typeof e&&""!==e?"sa_jssdk_2015_"+i.para.sdk_id+e.replace(/\./g,"_"):"sa_jssdk_2015_root"+i.para.sdk_id}else e="sensorsdata2015jssdkcross"+i.para.sdk_id;return e},init:function(){this.initSessionState();var e,t,r=b();dt.isSupport()&&(t=Ee(e=Be(e=dt.get(this.getCookieName())))),dt.isSupport()&&null!==e&&ge(e)&&g(t)&&(!g(t)||t.distinct_id)?(i.store._state=R(function(e){var t;e.identities&&(0===e.identities.indexOf("\n/")?e.identities=Ee(Oe(e.identities)):e.identities=Ee(H(e.identities)));var r=mt.getUnionId(e);e.identities&&g(e.identities)&&!de(e.identities)?e.identities.$identity_anonymous_id&&e.identities.$identity_anonymous_id!==r.anonymous_id&&(e.identities.$identity_anonymous_id=r.anonymous_id):(e.identities={},e.identities.$identity_anonymous_id=r.anonymous_id,e.identities.$identity_cookie_id=b()),e.history_login_id=e.history_login_id||{};var n=e.history_login_id.name;if(r.login_id)if(n&&g(e.identities)&&e.identities.hasOwnProperty(n)){if(e.identities[n]!==r.login_id){for(t in e.identities[n]=r.login_id,e.identities)g(e.identities)&&e.identities.hasOwnProperty(t)&&"$identity_cookie_id"!==t&&t!==n&&delete e.identities[t];e.history_login_id.value=r.login_id}}else{for(t in e.identities[i.para.login_id_key]=r.login_id,e.identities)g(e.identities)&&e.identities.hasOwnProperty(t)&&"$identity_cookie_id"!==t&&t!==i.para.login_id_key&&delete e.identities[t];e.history_login_id={name:i.para.login_id_key,value:r.login_id}}else{if(g(e.identities)&&e.identities.hasOwnProperty("$identity_login_id")||e.identities.hasOwnProperty(n))for(t in e.identities)g(e.identities)&&e.identities.hasOwnProperty(t)&&"$identity_cookie_id"!==t&&"$identity_anonymous_id"!==t&&delete e.identities[t];e.history_login_id={name:"",value:""}}return e}(t)),i.store.save()):(i.is_first_visitor=!0,function(e){i.store.set("distinct_id",e),i.store.set("identities",{$identity_cookie_id:e}),i.store.set("history_login_id",{name:"",value:""})}(r)),_t.setDeviceId(r),_t.storeInitCheck(),_t.checkIsFirstLatest()},saveObjectVal:function(e,t){l(t)||(t=JSON.stringify(t)),1==i.para.encrypt_cookie&&(t=qe(t)),Se.set(e,t)},readObjectVal:function(e){var t=Se.get(e);return t?Ee(t=Be(t)):null}},vt={string:function(e){He(e+" must be string")},emptyString:function(e){He(e+"'s is empty")},regexTest:function(e){He(e+" is invalid")},idLength:function(e){He(e+" length is longer than "+$e.max_id_length)},keyLength:function(e){He(e+" length is longer than "+$e.max_key_length)},stringLength:function(e){He(e+" length is longer than "+$e.max_string_length)},voidZero:function(e){He(e+"'s is undefined")},reservedLoginId:function(e){He(e+" is invalid")},reservedBind:function(e){He(e+" is invalid")}},yt={regName:/^((?!^distinct_id$|^original_id$|^time$|^properties$|^id$|^first_id$|^second_id$|^users$|^events$|^event$|^user_id$|^date$|^datetime$|^user_tag.*|^user_group.*)[a-zA-Z_$][a-zA-Z\d_$]*)$/i,loginIDReservedNames:["$identity_anonymous_id","$identity_cookie_id"],bindReservedNames:["$identity_login_id","$identity_anonymous_id","$identity_cookie_id"],string:function(e){return!!l(e)},emptyString:function(e){return!(!l(e)||0===p(e).length)},regexTest:function(e){return!(!l(e)||!this.regName.test(e))},idLength:function(e){return!(!l(e)||e.length>$e.max_id_length)},keyLength:function(e){return!(!l(e)||e.length>$e.max_key_length)},stringLength:function(e){return!(!l(e)||e.length>$e.max_string_length)},voidZero:function(e){return void 0!==e},reservedLoginId:function(e){return!(ce(this.loginIDReservedNames,e)>-1)},reservedBind:function(e){return $e.login_id_key&&-1===this.bindReservedNames.indexOf($e.login_id_key)&&this.bindReservedNames.push($e.login_id_key),!(ce(this.bindReservedNames,e)>-1)}},bt={distinct_id:{rules:["string","emptyString","idLength"],onComplete:function(e,t,r){return!e&&("emptyString"===r&&(t="Id"),k(vt[r])&&vt[r](t),"idLength"===r)||e}},event:{rules:["string","emptyString","keyLength","regexTest"],onComplete:function(e,t,r){return e||("emptyString"===r&&(t="eventName"),k(vt[r])&&vt[r](t)),!0}},propertyKey:{rules:["string","emptyString","keyLength","regexTest"],onComplete:function(e,t,r){return e||("emptyString"===r&&(t="Property key"),k(vt[r])&&vt[r](t)),!0}},propertyValue:{rules:["voidZero"],onComplete:function(e,t,r){return e||k(vt[r])&&vt[r]("Property Value"),!0}},properties:function(e){return g(e)?I(e,(function(e,t){wt({propertyKey:t}),wt({propertyValue:e},(function(e,r,n){return e||(r=t+"'s Value",k(vt[n])&&vt[n](r)),!0}))})):yt.voidZero(e)&&He("properties可以没有，但有的话必须是对象"),!0},propertiesMust:function(e){return void 0!==e&&g(e)&&!de(e)?this.properties.call(this,e):He("properties必须是对象"),!0},item_type:{rules:["string","emptyString","keyLength","regexTest"],onComplete:function(e,t,r){return e||("emptyString"===r&&(t="item_type"),k(vt[r])&&vt[r](t)),!0}},item_id:{rules:["string","emptyString","stringLength"],onComplete:function(e,t,r){return e||("emptyString"===r&&(t="item_id"),k(vt[r])&&vt[r](t)),!0}},loginIdKey:{rules:["string","emptyString","keyLength","regexTest","reservedLoginId"],onComplete:function(e,t,r){return!e&&("emptyString"===r&&(t="login_id_key"),k(vt[r])&&vt[r](t),"keyLength"===r)||e}},bindKey:{rules:["string","emptyString","keyLength","regexTest","reservedBind"],onComplete:function(e,t,r){return!e&&("emptyString"===r&&(t="Key"),k(vt[r])&&vt[r](t),"keyLength"===r)||e}},bindValue:{rules:["string","emptyString","idLength"],onComplete:function(e,t,r){return!e&&("emptyString"===r&&(t="Value"),k(vt[r])&&vt[r](t),"idLength"===r)||e}},check:function(e,t,r){var n=this[e];if(k(n))return n.call(this,t);if(!n)return!1;for(var i=0;i<n.rules.length;i++){var o=n.rules[i],a=yt[o](t),s=k(r)?r(a,t,o):n.onComplete(a,t,o);if(!a)return s}return!0}};function wt(e,t){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&!bt.check(r,e[r],t))return!1;return!0}var St={stage:null,init:function(e){this.stage=e}},kt={};kt.check=wt,kt.sendItem=function(e){var t={lib:{$lib:"js",$lib_method:"code",$lib_version:String(i.lib_version)},time:1*new Date};R(t,e),St.stage.process("formatData",t),i.sendState.getSendCall(t)},kt.send=function(e,t){var r=i.kit.buildData(e);i.kit.sendData(r,t)},kt.debugPath=function(e){var t=e;lt({url:-1!==i.para.debug_mode_url.indexOf("?")?i.para.debug_mode_url+"&"+i.kit.encodeTrackData(e):i.para.debug_mode_url+"?"+i.kit.encodeTrackData(e),type:"GET",cors:!0,header:{"Dry-Run":String(i.para.debug_mode_upload)},success:function(e){!0===de(e)?alert("debug数据发送成功"+t):alert("debug失败 错误原因"+JSON.stringify(e))}})};var Pt={otherTags:[],getTargetElement:function(e,t){var r=e;if("object"!=typeof r)return null;if("string"!=typeof r.tagName)return null;var n=r.tagName.toLowerCase();if("body"===n.toLowerCase()||"html"===n.toLowerCase())return null;if(!r||!r.parentNode||!r.parentNode.children)return null;var o=r.parentNode,a=this.hasElement({event:t&&t.originalEvent||t,element:e},(function(e){return"a"===e.tagName.toLowerCase()||oe(e,i.para.heatmap.track_attr)})),s=this.otherTags;if("a"===n||"button"===n||"input"===n||"textarea"===n)return r;if(ce(s,n)>-1)return r;if("button"===o.tagName.toLowerCase()||"a"===o.tagName.toLowerCase())return o;if("area"===n&&"map"===o.tagName.toLowerCase()&&x(o).prev().tagName&&"img"===x(o).prev().tagName.toLowerCase())return x(o).prev();if(a)return a;if("div"===n&&i.para.heatmap.collect_tags.div&&this.isDivLevelValid(r))return(i.para.heatmap&&i.para.heatmap.collect_tags&&i.para.heatmap.collect_tags.div&&i.para.heatmap.collect_tags.div.max_level||1)>1||this.isCollectableDiv(r)?r:null;if(this.isStyleTag(n)&&i.para.heatmap.collect_tags.div){var c=this.getCollectableParent(r);if(c&&this.isDivLevelValid(c))return c}return null},getDivLevels:function(e,t){var r=Pt.getElementPath(e,!0,t).split(" > "),n=0;return I(r,(function(e){"div"===e&&n++})),n},isDivLevelValid:function(e){for(var t=i.para.heatmap&&i.para.heatmap.collect_tags&&i.para.heatmap.collect_tags.div&&i.para.heatmap.collect_tags.div.max_level||1,r=e.getElementsByTagName("div"),n=r.length-1;n>=0;n--)if(Pt.getDivLevels(r[n],e)>t)return!1;return!0},getElementPath:function(e,t,r){for(var n=[];e.parentNode;){if(e.id&&!t&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.id)){n.unshift(e.tagName.toLowerCase()+"#"+e.id);break}if(r&&e===r){n.unshift(e.tagName.toLowerCase());break}if(e===document.body){n.unshift("body");break}n.unshift(e.tagName.toLowerCase()),e=e.parentNode}return n.join(" > ")},getClosestLi:function(e){return function(e,t){for(;e&&e!==document&&1===e.nodeType;e=e.parentNode)if("li"===e.tagName.toLowerCase())return e;return null}(e)},getElementPosition:function(e,t,r){var n=i.heatmap.getClosestLi(e);if(!n)return null;var o=e.tagName.toLowerCase(),a=n.getElementsByTagName(o),s=a.length,c=[];if(s>1){for(var u=0;u<s;u++)i.heatmap.getElementPath(a[u],r)===t&&c.push(a[u]);if(c.length>1)return ce(c,e)}return function(e){if(!e.parentNode)return"";if(1===x(e).getSameTypeSiblings().length)return 0;for(var t=0,r=e;x(r).previousElementSibling().ele;r=x(r).previousElementSibling().ele,t++);return t}(n)},setNotice:function(e){i.is_heatmap_render_mode=!0,i.para.heatmap||(i.errorMsg="您SDK没有配置开启点击图，可能没有数据！"),e&&"http:"===e.slice(0,5)&&"https:"===location.protocol&&(i.errorMsg="您的当前页面是https的地址，神策分析环境也必须是https！"),i.para.heatmap_url||(i.para.heatmap_url=location.protocol+"//static.sensorsdata.cn/sdk/"+i.lib_version+"/heatmap.min.js")},getDomIndex:function(e){if(!e.parentNode)return-1;for(var t=0,r=e.tagName,n=e.parentNode.children,i=0;i<n.length;i++)if(n[i].tagName===r){if(e===n[i])return t;t++}return-1},selector:function(e,t){var r=e.parentNode&&9==e.parentNode.nodeType?-1:this.getDomIndex(e);return e.getAttribute&&e.getAttribute("id")&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.getAttribute("id"))&&(!i.para.heatmap||i.para.heatmap&&"not_use_id"!==i.para.heatmap.element_selector)&&!t?"#"+e.getAttribute("id"):e.tagName.toLowerCase()+(~r?":nth-of-type("+(r+1)+")":"")},getDomSelector:function(e,t,r){if(!e||!e.parentNode||!e.parentNode.children)return!1;t=t&&t.join?t:[];var n=e.nodeName.toLowerCase();return e&&"body"!==n&&1==e.nodeType?(t.unshift(this.selector(e,r)),e.getAttribute&&e.getAttribute("id")&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.getAttribute("id"))&&i.para.heatmap&&"not_use_id"!==i.para.heatmap.element_selector&&!r?t.join(" > "):this.getDomSelector(e.parentNode,t,r)):(t.unshift("body"),t.join(" > "))},na:function(){var e=document.documentElement.scrollLeft||window.pageXOffset;return parseInt(isNaN(e)?0:e,10)},i:function(){var e=0;try{e=o.documentElement&&o.documentElement.scrollTop||m.pageYOffset,e=isNaN(e)?0:e}catch(t){e=0}return parseInt(e,10)},getBrowserWidth:function(){var e=window.innerWidth||document.body.clientWidth;return isNaN(e)?0:parseInt(e,10)},getBrowserHeight:function(){var e=window.innerHeight||document.body.clientHeight;return isNaN(e)?0:parseInt(e,10)},getScrollWidth:function(){var e=parseInt(document.body.scrollWidth,10);return isNaN(e)?0:e},getEleDetail:function(e){var t=this.getDomSelector(e),r=Ye({target:e});r.$element_selector=t||"",r.$element_path=i.heatmap.getElementPath(e,i.para.heatmap&&"not_use_id"===i.para.heatmap.element_selector);var n=i.heatmap.getElementPosition(e,r.$element_path,i.para.heatmap&&"not_use_id"===i.para.heatmap.element_selector);return _e(n)&&(r.$element_position=n),r},getPointerEventProp:function(e,t){if(!e)return{};function r(){return{scrollLeft:document.body.scrollLeft||document.documentElement.scrollLeft||0,scrollTop:document.body.scrollTop||document.documentElement.scrollTop||0}}function n(e){if(document.documentElement.getBoundingClientRect){var t=e.getBoundingClientRect();return{targetEleX:t.left+r().scrollLeft||0,targetEleY:t.top+r().scrollTop||0}}}function i(e){return Number(Number(e).toFixed(3))}return function(e){var o=e.pageX||e.clientX+r().scrollLeft||e.offsetX+n(t).targetEleX||0,a=e.pageY||e.clientY+r().scrollTop||e.offsetY+n(t).targetEleY||0;return{$page_x:i(o),$page_y:i(a)}}(e)},start:function(e,t,r,n,o){var a=g(n)?n:{},s=k(o)?o:k(n)?n:void 0;if(i.para.heatmap&&i.para.heatmap.collect_element&&!i.para.heatmap.collect_element(t))return!1;var c=this.getEleDetail(t);if(i.para.heatmap&&i.para.heatmap.custom_property){var u=i.para.heatmap.custom_property(t);g(u)&&(c=R(c,u))}c=R(c,this.getPointerEventProp(e,t),a),"a"===r&&i.para.heatmap&&!0===i.para.heatmap.isTrackLink?i.trackLink({event:e,target:t},"$WebClick",c):i.track("$WebClick",c,s)},hasElement:function(e,t){var r;if(e.event){var n=e.event;r=n.path||n._getPath&&n._getPath()}else e.element&&(r=x(e.element).getParents());if(r&&P(r)&&r.length>0)for(var i=0;i<r.length;i++)if("object"==typeof r[i]&&1===r[i].nodeType&&t(r[i]))return r[i]},isStyleTag:function(e,t){return!(ce(["a","div","input","button","textarea"],e)>-1)&&(!t||i.para.heatmap&&i.para.heatmap.collect_tags&&i.para.heatmap.collect_tags.div?!!(g(i.para.heatmap)&&g(i.para.heatmap.collect_tags)&&g(i.para.heatmap.collect_tags.div)&&P(i.para.heatmap.collect_tags.div.ignore_tags)&&ce(i.para.heatmap.collect_tags.div.ignore_tags,e)>-1):ce(["mark","/mark","strong","b","em","i","u","abbr","ins","del","s","sup"],e)>-1)},isCollectableDiv:function(e,t){try{if(0===e.children.length)return!0;for(var r=0;r<e.children.length;r++)if(1===e.children[r].nodeType){var n=e.children[r].tagName.toLowerCase(),o=i.para&&i.para.heatmap&&i.para.heatmap.collect_tags&&i.para.heatmap.collect_tags.div&&i.para.heatmap.collect_tags.div.max_level;if(!("div"===n&&o>1||this.isStyleTag(n,t)))return!1;if(!this.isCollectableDiv(e.children[r],t))return!1}return!0}catch(e){i.log(e)}return!1},getCollectableParent:function(e,t){try{var r=e.parentNode,n=r?r.tagName.toLowerCase():"";if("body"===n)return!1;var o=i.para&&i.para.heatmap&&i.para.heatmap.collect_tags&&i.para.heatmap.collect_tags.div&&i.para.heatmap.collect_tags.div.max_level;if(n&&"div"===n&&(o>1||this.isCollectableDiv(r,t)))return r;if(r&&this.isStyleTag(n,t))return this.getCollectableParent(r,t)}catch(e){i.log(e)}return!1},initScrollmap:function(){if(!g(i.para.heatmap)||"default"!==i.para.heatmap.scroll_notice_map)return!1;var e=function(){return!(i.para.scrollmap&&k(i.para.scrollmap.collect_url)&&!i.para.scrollmap.collect_url())},t=function(e){var t={};return t.timeout=e.timeout||1e3,t.func=e.func,t.hasInit=!1,t.inter=null,t.main=function(e,t){this.func(e,t),this.inter=null},t.go=function(e){var r={};this.inter||(r.$viewport_position=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||0,r.$viewport_position=Math.round(r.$viewport_position)||0,e?t.main(r,!0):this.inter=setTimeout((function(){t.main(r)}),this.timeout))},t}({timeout:1e3,func:function(e,t){var r=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||0,n=new Date,o=n-this.current_time;(o>i.para.heatmap.scroll_delay_time&&r-e.$viewport_position!=0||t)&&(e.$url=ne(),e.$title=document.title,e.$url_path=location.pathname,e.event_duration=Math.min(i.para.heatmap.scroll_event_duration,parseInt(o)/1e3),e.event_duration=e.event_duration<0?0:e.event_duration,i.track("$WebStay",e)),this.current_time=n}});t.current_time=new Date,pt(window,"scroll",(function(){if(!e())return!1;t.go()})),pt(window,"unload",(function(){if(!e())return!1;t.go("notime")}))},initHeatmap:function(){var e=this;return!(!g(i.para.heatmap)||"default"!==i.para.heatmap.clickmap)&&!(k(i.para.heatmap.collect_url)&&!i.para.heatmap.collect_url())&&("all"===i.para.heatmap.collect_elements?i.para.heatmap.collect_elements="all":i.para.heatmap.collect_elements="interact",void("all"===i.para.heatmap.collect_elements?pt(document,"click",(function(t){var r=t||window.event;if(!r)return!1;var n=r.target||r.srcElement;if("object"!=typeof n)return!1;if("string"!=typeof n.tagName)return!1;var i=n.tagName.toLowerCase();if("body"===i||"html"===i)return!1;if(!n||!n.parentNode||!n.parentNode.children)return!1;var o=n.parentNode.tagName.toLowerCase();"a"===o||"button"===o?e.start(r,n.parentNode,o):e.start(r,n,i)})):pt(document,"click",(function(t){var r=t||window.event;if(!r)return!1;var n=r.target||r.srcElement,o=i.heatmap.getTargetElement(n,t);o?e.start(r,o,o.tagName.toLowerCase()):w(n)&&"div"===n.tagName.toLowerCase()&&g(i.para.heatmap)&&i.para.heatmap.get_vtrack_config&&i.unlimitedDiv.events.length>0&&i.unlimitedDiv.isTargetEle(n)&&e.start(r,n,n.tagName.toLowerCase(),{$lib_method:"vtrack"})}))))}},xt={setOnlineState:function(e){if(!0===e&&g(i.para.jsapp)&&"function"==typeof i.para.jsapp.getData){i.para.jsapp.isOnline=!0;var t=i.para.jsapp.getData();P(t)&&t.length>0&&I(t,(function(e){ge(e)&&i.sendState.realtimeSend(JSON.parse(e))}))}else i.para.jsapp.isOnline=!1},autoTrackIsUsed:!1,isReady:function(e){e()},getUtm:function(){return st.campaignParams()},getStayTime:function(){return(new Date-i._t)/1e3},setProfileLocal:function(e){if(!Se.isSupport())return i.setProfile(e),!1;if(!g(e)||de(e))return!1;var t=i.store.readObjectVal("sensorsdata_2015_jssdk_profile"),r=!1;if(g(t)&&!de(t)){for(var n in e)(!(n in t)||t[n]===e[n])&&n in t||(t[n]=e[n],r=!0);r&&(i.store.saveObjectVal("sensorsdata_2015_jssdk_profile",t),i.setProfile(e))}else i.store.saveObjectVal("sensorsdata_2015_jssdk_profile",e),i.setProfile(e)},setInitReferrer:function(){var e=nt();i.setOnceProfile({_init_referrer:e,_init_referrer_host:st.pageProp.referrer_host})},setSessionReferrer:function(){var e=nt();i.store.setSessionPropsOnce({_session_referrer:e,_session_referrer_host:st.pageProp.referrer_host})},setDefaultAttr:function(){st.register({_current_url:location.href,_referrer:nt(),_referring_host:st.pageProp.referrer_host})},trackHeatMap:function(e,t,r){if("object"==typeof e&&e.tagName){var n=e.tagName.toLowerCase(),o=e.parentNode.tagName.toLowerCase(),a=i.para.heatmap&&i.para.heatmap.track_attr?i.para.heatmap.track_attr:["data-sensors-click"];"button"===n||"a"===n||"a"===o||"button"===o||"input"===n||"textarea"===n||oe(e,a)||Pt.start(null,e,n,t,r)}},trackAllHeatMap:function(e,t,r){if("object"==typeof e&&e.tagName){var n=e.tagName.toLowerCase();Pt.start(null,e,n,t,r)}},autoTrackSinglePage:function(e,t){var r;function n(){var e=st.campaignParams(),t={};return I(e,(function(e,r,n){-1!==(" "+i.source_channel_standard+" ").indexOf(" "+r+" ")?t["$"+r]=n[r]:t[r]=n[r]})),t}r=this.autoTrackIsUsed?st.pageProp.url:st.pageProp.referrer;var o=!(e=g(e)?e:{}).not_set_profile;function a(e,t){i.track("$pageview",R({$referrer:r,$url:ne(),$url_path:location.pathname,$title:document.title},e,n()),t),r=ne()}if(e.not_set_profile&&delete e.not_set_profile,a(e,t),this.autoTrackSinglePage=a,i.is_first_visitor&&o){var s={};i.para.preset_properties.search_keyword_baidu&&rt(document.referrer)&&Ze()&&(s.$search_keyword_id=tt.id(),s.$search_keyword_id_type=tt.type(),s.$search_keyword_id_hash=se(s.$search_keyword_id)),i.setOnceProfile(R({$first_visit_time:new Date,$first_referrer:nt(),$first_browser_language:navigator.language||"取值异常",$first_browser_charset:"string"==typeof document.charset?document.charset.toUpperCase():"取值异常",$first_traffic_source_type:ct(),$first_search_keyword:ot()},n(),s)),i.is_first_visitor=!1}},autoTrackWithoutProfile:function(e,t){e=g(e)?e:{},this.autoTrack(R(e,{not_set_profile:!0}),t)},autoTrack:function(e,t){e=g(e)?e:{};var r=st.campaignParams(),n={};I(r,(function(e,t,r){-1!==(" "+i.source_channel_standard+" ").indexOf(" "+t+" ")?n["$"+t]=r[t]:n[t]=r[t]}));var o=!e.not_set_profile;e.not_set_profile&&delete e.not_set_profile;var a=location.href;if(i.para.is_single_page&&j((function(){var r=nt(a,!0);i.track("$pageview",R({$referrer:r,$url:ne(),$url_path:location.pathname,$title:document.title},n,e),t),a=ne()})),i.track("$pageview",R({$referrer:nt(null,!0),$url:ne(),$url_path:location.pathname,$title:document.title},n,e),t),i.is_first_visitor&&o){var s={};i.para.preset_properties.search_keyword_baidu&&rt(document.referrer)&&Ze()&&(s.$search_keyword_id=tt.id(),s.$search_keyword_id_type=tt.type(),s.$search_keyword_id_hash=se(s.$search_keyword_id)),i.setOnceProfile(R({$first_visit_time:new Date,$first_referrer:nt(null,!0),$first_browser_language:navigator.language||"取值异常",$first_browser_charset:"string"==typeof document.charset?document.charset.toUpperCase():"取值异常",$first_traffic_source_type:ct(),$first_search_keyword:ot()},n,s)),i.is_first_visitor=!1}this.autoTrackIsUsed=!0},getAnonymousID:function(){return de(i.store._state)?"请先初始化SDK":i.store._state._first_id||i.store._state.first_id||i.store._state._distinct_id||i.store._state.distinct_id},setPlugin:function(e){if(!g(e))return!1;I(e,(function(e,t){k(e)&&(g(window.SensorsDataWebJSSDKPlugin)&&window.SensorsDataWebJSSDKPlugin[t]?e(window.SensorsDataWebJSSDKPlugin[t]):i.log(t+"没有获取到,请查阅文档，调整"+t+"的引入顺序！"))}))},useModulePlugin:function(){i.use.apply(i,arguments)},useAppPlugin:function(){this.setPlugin.apply(this,arguments)}},Ot={state:0,historyState:[],stateType:{1:"1-init未开始",2:"2-init开始",3:"3-store完成"},getState:function(){return this.historyState.join("\n")},setState:function(e){String(e)in this.stateType&&(this.state=e),this.historyState.push(this.stateType[e])}};function Et(e,t,r,n){var i=mt.getFirstId()||mt.getDistinctId();mt.set("distinct_id",e),kt.send({original_id:i,distinct_id:e,type:"track_signup",event:t,properties:r},n)}var Tt={__proto__:null,addReferrerHost:function(e){var t=!e.type||"profile"!==e.type.slice(0,7);g(e.properties)&&(e.properties.$first_referrer&&(e.properties.$first_referrer_host=Y(e.properties.$first_referrer,"取值异常")),t&&("$referrer"in e.properties&&(e.properties.$referrer_host=""===e.properties.$referrer?"":Y(e.properties.$referrer,"取值异常")),i.para.preset_properties.latest_referrer&&i.para.preset_properties.latest_referrer_host&&(e.properties.$latest_referrer_host=""===e.properties.$latest_referrer?"":Y(e.properties.$latest_referrer,"取值异常"))))},addPropsHook:function(e){var t=!e.type||"profile"!==e.type.slice(0,7),r=i.para.preset_properties&&t;r&&i.para.preset_properties.url&&void 0===e.properties.$url&&(e.properties.$url=ne()),r&&i.para.preset_properties.title&&void 0===e.properties.$title&&(e.properties.$title=document.title)},initPara:function(e){R($e,e||i.para||{}),i.para=$e;var t,r={};if(g(i.para.is_track_latest))for(var n in i.para.is_track_latest)r["latest_"+n]=i.para.is_track_latest[n];for(t in i.para.preset_properties=R({},i.para_default.preset_properties,r,i.para.preset_properties||{}),i.para_default)void 0===i.para[t]&&(i.para[t]=i.para_default[t]);"string"==typeof i.para.server_url&&(i.para.server_url=p(i.para.server_url),i.para.server_url&&("://"===i.para.server_url.slice(0,3)?i.para.server_url=location.protocol.slice(0,-1)+i.para.server_url:"//"===i.para.server_url.slice(0,2)?i.para.server_url=location.protocol+i.para.server_url:"http"!==i.para.server_url.slice(0,4)&&(i.para.server_url=""))),"string"!=typeof i.para.web_url||"://"!==i.para.web_url.slice(0,3)&&"//"!==i.para.web_url.slice(0,2)||("://"===i.para.web_url.slice(0,3)?i.para.web_url=location.protocol.slice(0,-1)+i.para.web_url:i.para.web_url=location.protocol+i.para.web_url),"image"!==i.para.send_type&&"ajax"!==i.para.send_type&&"beacon"!==i.para.send_type&&(i.para.send_type="image"),kt.check({loginIdKey:i.para.login_id_key})||(i.para.login_id_key="$identity_login_id"),i.debug.protocol.serverUrl(),i.bridge.initPara(),i.bridge.initState();var o={datasend_timeout:6e3,send_interval:6e3};Se.isSupport()&&ve()&&"object"==typeof localStorage?!0===i.para.batch_send?i.para.batch_send=R({},o):"object"==typeof i.para.batch_send&&(i.para.batch_send=R({},o,i.para.batch_send)):i.para.batch_send=!1;var a=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],s=["www.baidu.","m.baidu.","m.sm.cn","so.com","sogou.com","youdao.com","google.","yahoo.com/","bing.com/","ask.com/"],c=["weibo.com","renren.com","kaixin001.com","douban.com","qzone.qq.com","zhihu.com","tieba.baidu.com","weixin.qq.com"],u={baidu:["wd","word","kw","keyword"],google:"q",bing:"q",yahoo:"p",sogou:["query","keyword"],so:"q",sm:"q"};"object"==typeof i.para.source_type&&(i.para.source_type.utm=P(i.para.source_type.utm)?i.para.source_type.utm.concat(a):a,i.para.source_type.search=P(i.para.source_type.search)?i.para.source_type.search.concat(s):s,i.para.source_type.social=P(i.para.source_type.social)?i.para.source_type.social.concat(c):c,i.para.source_type.keyword=g(i.para.source_type.keyword)?R(u,i.para.source_type.keyword):u);var l=["mark","/mark","strong","b","em","i","u","abbr","ins","del","s","sup"];if(i.para.heatmap&&!g(i.para.heatmap)&&(i.para.heatmap={}),g(i.para.heatmap)){i.para.heatmap.clickmap=i.para.heatmap.clickmap||"default",i.para.heatmap.scroll_notice_map=i.para.heatmap.scroll_notice_map||"default",i.para.heatmap.scroll_delay_time=i.para.heatmap.scroll_delay_time||4e3,i.para.heatmap.scroll_event_duration=i.para.heatmap.scroll_event_duration||18e3,i.para.heatmap.renderRefreshTime=i.para.heatmap.renderRefreshTime||1e3,i.para.heatmap.loadTimeout=i.para.heatmap.loadTimeout||1e3,!0!==i.para.heatmap.get_vtrack_config&&(i.para.heatmap.get_vtrack_config=!1);var d=P(i.para.heatmap.track_attr)?K(i.para.heatmap.track_attr,(function(e){return e&&"string"==typeof e})):[];d.push("data-sensors-click"),i.para.heatmap.track_attr=d,g(i.para.heatmap.collect_tags)?!0===i.para.heatmap.collect_tags.div?i.para.heatmap.collect_tags.div={ignore_tags:l,max_level:1}:g(i.para.heatmap.collect_tags.div)?(i.para.heatmap.collect_tags.div.ignore_tags?P(i.para.heatmap.collect_tags.div.ignore_tags)||(i.log("ignore_tags 参数必须是数组格式"),i.para.heatmap.collect_tags.div.ignore_tags=l):i.para.heatmap.collect_tags.div.ignore_tags=l,i.para.heatmap.collect_tags.div.max_level&&-1===ce([1,2,3],i.para.heatmap.collect_tags.div.max_level)&&(i.para.heatmap.collect_tags.div.max_level=1)):i.para.heatmap.collect_tags.div=!1:i.para.heatmap.collect_tags={div:!1}}if(P(i.para.server_url)&&i.para.server_url.length)for(t=0;t<i.para.server_url.length;t++)/sa\.gif[^\/]*$/.test(i.para.server_url[t])||(i.para.server_url[t]=i.para.server_url[t].replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));else/sa\.gif[^\/]*$/.test(i.para.server_url)||"string"!=typeof i.para.server_url||(i.para.server_url=i.para.server_url.replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));"string"==typeof i.para.server_url&&(i.para.debug_mode_url=i.para.debug_mode_url||i.para.server_url.replace("sa.gif","debug")),!0===i.para.noCache?i.para.noCache="?"+(new Date).getTime():i.para.noCache="",i.para.callback_timeout>i.para.datasend_timeout&&(i.para.datasend_timeout=i.para.callback_timeout),i.para.heatmap&&i.para.heatmap.collect_tags&&g(i.para.heatmap.collect_tags)&&I(i.para.heatmap.collect_tags,(function(e,t){"div"!==t&&e&&i.heatmap.otherTags.push(t)}))},setInitVar:function(){i._t=i._t||1*new Date,i.lib_version=We,i.is_first_visitor=!1,i.source_channel_standard=Fe},enableLocalLog:function(){if(je.isSupport())try{sessionStorage.setItem("sensorsdata_jssdk_debug","true")}catch(e){i.log("enableLocalLog error: "+e.message)}},disableLocalLog:function(){je.isSupport()&&sessionStorage.removeItem("sensorsdata_jssdk_debug")},quick:function(){var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1);if("string"==typeof t&&xt[t])return xt[t].apply(xt,r);"function"==typeof t?t.apply(i,r):i.log("quick方法中没有这个功能"+e[0])},use:function(e,t){return l(e)?g(window.SensorsDataWebJSSDKPlugin)&&g(window.SensorsDataWebJSSDKPlugin[e])&&k(window.SensorsDataWebJSSDKPlugin[e].init)?(window.SensorsDataWebJSSDKPlugin[e].init(i,t),window.SensorsDataWebJSSDKPlugin[e]):g(i.modules)&&g(i.modules[e])&&k(i.modules[e].init)?(i.modules[e].init(i,t),i.modules[e]):void i.log(e+"没有获取到,请查阅文档，调整"+e+"的引入顺序！"):(i.log("use插件名称必须是字符串！"),!1)},track:function(e,t,r){kt.check({event:e,properties:t})&&kt.send({type:"track",event:e,properties:t},r)},bind:function(e,t){if(!kt.check({bindKey:e,bindValue:t}))return!1;i.store._state.identities[e]=t,i.store.save(),kt.send({type:"track_id_bind",event:"$BindID",properties:{}})},unbind:function(e,t){if(!kt.check({bindKey:e,bindValue:t}))return!1;g(i.store._state.identities)&&i.store._state.identities.hasOwnProperty(e)&&i.store._state.identities[e]===t&&(delete i.store._state.identities[e],i.store.save());var r={};r[e]=t,kt.send({identities:r,type:"track_id_unbind",event:"$UnbindID",properties:{}})},trackLink:function(e,t,r){function n(e,t,r){var n=null;if((e=e||{}).ele&&(n=e.ele),e.event&&(n=e.target?e.target:e.event.target),r=r||{},!n||"object"!=typeof n)return!1;if(!n.href||/^javascript/.test(n.href)||n.target||n.download||n.onclick)return i.track(t,r),!1;function o(e){e.stopPropagation(),e.preventDefault();var o=!1;function a(){o||(o=!0,location.href=n.href)}setTimeout(a,1e3),i.track(t,r,a)}e.event&&o(e.event),e.ele&&pt(e.ele,"click",(function(e){o(e)}))}"object"==typeof e&&e.tagName?n({ele:e},t,r):"object"==typeof e&&e.target&&e.event&&n(e,t,r)},trackLinks:function(e,t,r){return r=r||{},!(!e||"object"!=typeof e)&&!(!e.href||/^javascript/.test(e.href)||e.target)&&void pt(e,"click",(function(n){n.preventDefault();var o=!1;function a(){o||(o=!0,location.href=e.href)}setTimeout(a,1e3),i.track(t,r,a)}))},setItem:function(e,t,r){kt.check({item_type:e,item_id:t,properties:r})&&kt.sendItem({type:"item_set",item_type:e,item_id:t,properties:r||{}})},deleteItem:function(e,t){kt.check({item_type:e,item_id:t})&&kt.sendItem({type:"item_delete",item_type:e,item_id:t})},setProfile:function(e,t){kt.check({propertiesMust:e})&&kt.send({type:"profile_set",properties:e},t)},setOnceProfile:function(e,t){kt.check({propertiesMust:e})&&kt.send({type:"profile_set_once",properties:e},t)},appendProfile:function(e,t){kt.check({propertiesMust:e})&&(I(e,(function(t,r){l(t)?e[r]=[t]:P(t)?e[r]=t:(delete e[r],i.log("appendProfile属性的值必须是字符串或者数组"))})),de(e)||kt.send({type:"profile_append",properties:e},t))},incrementProfile:function(e,t){var r=e;l(e)&&((e={})[r]=1),kt.check({propertiesMust:e})&&(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&!/-*\d+/.test(String(e[t])))return!1;return!0}(e)?kt.send({type:"profile_increment",properties:e},t):i.log("profile_increment的值只能是数字"))},deleteProfile:function(e){kt.send({type:"profile_delete"},e),mt.set("distinct_id",b()),mt.set("first_id","")},unsetProfile:function(e,t){var r=e,n={};l(e)&&(e=[]).push(r),P(e)?(I(e,(function(e){l(e)?n[e]=!0:i.log("profile_unset给的数组里面的值必须时string,已经过滤掉",e)})),kt.send({type:"profile_unset",properties:n},t)):i.log("profile_unset的参数是数组")},identify:function(e,t){"number"==typeof e&&(e=String(e));var r=mt.getFirstId();if(void 0===e){var n=b();r?mt.set("first_id",n):mt.set("distinct_id",n),i.store.identities.set("identify",n)}else kt.check({distinct_id:e})&&(!0===t?r?mt.set("first_id",e):mt.set("distinct_id",e):r?mt.change("first_id",e):mt.change("distinct_id",e),i.store.identities.set("identify",e))},trackSignup:function(e,t,r,n){"number"==typeof e&&(e=String(e)),kt.check({distinct_id:e,event:t,properties:r})&&Et(e,t,r,n)},registerPage:function(e){kt.check({properties:e})?R(st.currentProps,e):i.log("register输入的参数有误")},clearAllRegister:function(e){mt.clearAllProps(e)},clearPageRegister:function(e){var t;if(P(e)&&e.length>0)for(t=0;t<e.length;t++)l(e[t])&&e[t]in st.currentProps&&delete st.currentProps[e[t]];else if(!0===e)for(t in st.currentProps)delete st.currentProps[t]},register:function(e){kt.check({properties:e})?mt.setProps(e):i.log("register输入的参数有误")},registerOnce:function(e){kt.check({properties:e})?mt.setPropsOnce(e):i.log("registerOnce输入的参数有误")},registerSession:function(e){kt.check({properties:e})?mt.setSessionProps(e):i.log("registerSession输入的参数有误")},registerSessionOnce:function(e){kt.check({properties:e})?mt.setSessionPropsOnce(e):i.log("registerSessionOnce输入的参数有误")},login:function(e,t){if("number"==typeof e&&(e=String(e)),kt.check({distinct_id:e})&&e!==i.store.getDistinctId()){if(g(i.store._state.identities)&&i.store._state.identities.hasOwnProperty(i.para.login_id_key)&&e===i.store._state.first_id)return k(t)&&t(),!1;if(i.store._state.history_login_id.name!==i.para.login_id_key||e!==i.store._state.history_login_id.value){i.store._state.identities[i.para.login_id_key]=e;var r=mt.getFirstId(),n=mt.getDistinctId();r||mt.set("first_id",n),Et(e,"$SignUp",{},t),i.store.identities.set("login",e),i.store.set("history_login_id",{name:i.para.login_id_key,value:e})}}else k(t)&&t()},logout:function(e){var t=mt.getFirstId();if(t)if(mt.set("first_id",""),!0===e){var r=b();mt.set("distinct_id",r)}else mt.set("distinct_id",t);i.store.identities.set("logout"),i.store.set("history_login_id",{name:"",value:""})},getPresetProperties:function(){var e,t,r={$is_first_day:ht(),$is_first_time:_t.is_page_first_visited,$referrer:st.pageProp.referrer||"",$referrer_host:st.pageProp.referrer?Y(st.pageProp.referrer):"",$url:ne(),$url_path:location.pathname,$title:document.title||"",_distinct_id:mt.getDistinctId()},n=R({},st.properties(),i.store.getProps(),(e=st.campaignParams(),t={},I(e,(function(e,r,n){-1!==(" "+i.source_channel_standard+" ").indexOf(" "+r+" ")?t["$"+r]=n[r]:t[r]=n[r]})),t),r);return i.para.preset_properties.latest_referrer&&i.para.preset_properties.latest_referrer_host&&(n.$latest_referrer_host=""===n.$latest_referrer?"":Y(n.$latest_referrer)),n},iOSWebClickPolyfill:function(){var e="",t=" { cursor: pointer; -webkit-tap-highlight-color: rgba(0,0,0,0); }";i.heatmap&&P(i.heatmap.otherTags)&&I(i.heatmap.otherTags,(function(r){e+=r+t})),he()&&Z()&&Z()<13&&(i.para.heatmap&&i.para.heatmap.collect_tags&&i.para.heatmap.collect_tags.div&&Ae("div, [data-sensors-click]"+t),i.para.heatmap&&i.para.heatmap.track_attr&&Ae("["+i.para.heatmap.track_attr.join("], [")+"]"+t),""!==e&&Ae(e))},readyState:Ot,para_default:{preset_properties:{search_keyword_baidu:!1,latest_utm:!0,latest_traffic_source_type:!0,latest_search_keyword:!0,latest_referrer:!0,latest_referrer_host:!1,latest_landing_page:!1,latest_wx_ad_click_id:void 0,url:!0,title:!0},encrypt_cookie:!1,enc_cookie:!1,login_id_key:"$identity_login_id",img_use_crossorigin:!1,name:"sa",max_referrer_string_length:200,max_string_length:500,max_id_length:255,max_key_length:100,cross_subdomain:!0,show_log:!1,is_debug:!1,debug_mode:!1,debug_mode_upload:!1,source_channel:[],sdk_id:"",send_type:"image",vtrack_ignore:{},auto_init:!0,is_track_single_page:!1,is_single_page:!1,batch_send:!1,source_type:{},callback_timeout:200,datasend_timeout:8e3,is_track_device_id:!1,ignore_oom:!0,app_js_bridge:!1},log:He,debug:Je,IDENTITY_KEY:{EMAIL:"$identity_email",MOBILE:"$identity_mobile"}},jt=function(){this._events=[],this.pendingEvents=[]};jt.prototype={emit:function(e){var t=[].slice.call(arguments,1);I(this._events,(function(r){r.type===e&&r.callback.apply(r.context,t)})),this.pendingEvents.push({type:e,data:t}),this.pendingEvents.length>20&&this.pendingEvents.shift()},on:function(e,t,r,n){"function"==typeof t&&(this._events.push({type:e,callback:t,context:r||this}),n=!1!==n,this.pendingEvents.length>0&&n&&I(this.pendingEvents,(function(n){n.type===e&&t.apply(r,n.data)})))},tempAdd:function(e,t){if(t&&e)return this.emit(e,t)},isReady:function(){}};var At={__proto__:null,parseSuperProperties:ze,searchConfigData:Ve,strip_empty_properties:Xe,getCurrentDomain:Ge,getEleInfo:Ye,isBaiduTraffic:Ze,getReferrerEqid:Qe,getReferrerEqidType:et,getBaiduKeyword:tt,isReferralTraffic:rt,getReferrer:nt,getKeywordFromReferrer:ot,getWxAdIdFromUrl:at,getReferSearchEngine:it,getSourceFromReferrer:ct,info:st,ajax:lt,getElementContent:ut,cookie:dt,addEvent:pt,EventEmitterSa:jt,encrypt:qe,decryptIfNeeded:Be},Dt={};function Ct(e){return Dt.encodeTrackData(e)}Dt.buildData=function(e){var t={identities:{},distinct_id:i.store.getDistinctId(),lib:{$lib:"js",$lib_method:"code",$lib_version:String(i.lib_version)},properties:{}};return g(e)&&g(e.identities)&&!de(e.identities)?R(t.identities,e.identities):R(t.identities,mt._state.identities),g(e)&&g(e.properties)&&!de(e.properties)&&(e.properties.$lib_detail&&(t.lib.$lib_detail=e.properties.$lib_detail,delete e.properties.$lib_detail),e.properties.$lib_method&&(t.lib.$lib_method=e.properties.$lib_method,delete e.properties.$lib_method)),R(t,i.store.getUnionId(),e),g(e.properties)&&!de(e.properties)&&R(t.properties,e.properties),e.type&&"profile"===e.type.slice(0,7)||(t.properties=R({},st.properties(),mt.getProps(),mt.getSessionProps(),st.currentProps,t.properties),i.para.preset_properties.latest_referrer&&!l(t.properties.$latest_referrer)&&(t.properties.$latest_referrer="取值异常"),i.para.preset_properties.latest_search_keyword&&!l(t.properties.$latest_search_keyword)&&(i.para.preset_properties.search_keyword_baidu&&l(t.properties.$search_keyword_id)&&_e(t.properties.$search_keyword_id_hash)&&l(t.properties.$search_keyword_id_type)||(t.properties.$latest_search_keyword="取值异常")),i.para.preset_properties.latest_traffic_source_type&&!l(t.properties.$latest_traffic_source_type)&&(t.properties.$latest_traffic_source_type="取值异常"),i.para.preset_properties.latest_landing_page&&!l(t.properties.$latest_landing_page)&&(t.properties.$latest_landing_page="取值异常"),"not_collect"===i.para.preset_properties.latest_wx_ad_click_id?(delete t.properties._latest_wx_ad_click_id,delete t.properties._latest_wx_ad_hash_key,delete t.properties._latest_wx_ad_callbacks):i.para.preset_properties.latest_wx_ad_click_id&&!l(t.properties._latest_wx_ad_click_id)&&(t.properties._latest_wx_ad_click_id="取值异常",t.properties._latest_wx_ad_hash_key="取值异常",t.properties._latest_wx_ad_callbacks="取值异常"),l(t.properties._latest_wx_ad_click_id)&&(t.properties.$url=ne())),t.properties.$time&&F(t.properties.$time)?(t.time=1*t.properties.$time,delete t.properties.$time):t.time=1*new Date,i.vtrackBase.addCustomProps(t),ze(t),_t.checkIsAddSign(t),_t.checkIsFirstTime(t),i.addReferrerHost(t),i.addPropsHook(t),St.stage.process("formatData",t),t},Dt.sendData=function(e,t){var r=Ve(e.properties);!0===i.para.debug_mode?(i.log(e),i.saEvent.debugPath(JSON.stringify(e),t)):i.sendState.getSendCall(e,r,t)},Dt.encodeTrackData=function(e){var t=U(e),r="crc="+ae(t);return"data="+encodeURIComponent(t)+"&ext="+encodeURIComponent(r)};var It=function(e){this.callback=e.callback,this.img=document.createElement("img"),this.img.width=1,this.img.height=1,i.para.img_use_crossorigin&&(this.img.crossOrigin="anonymous"),this.data=e.data,this.server_url=function(e,t){var r=Dt.encodeTrackData(t);return-1!==e.indexOf("?")?e+"&"+r:e+"?"+r}(e.server_url,e.data)};It.prototype.start=function(){var e=this;i.para.ignore_oom&&(this.img.onload=function(){this.onload=null,this.onerror=null,this.onabort=null,e.isEnd()},this.img.onerror=function(){this.onload=null,this.onerror=null,this.onabort=null,e.isEnd()},this.img.onabort=function(){this.onload=null,this.onerror=null,this.onabort=null,e.isEnd()}),this.img.src=this.server_url},It.prototype.lastClear=function(){void 0!==re().ie?this.img.src="about:blank":this.img.src=""};var Nt=function(e){this.callback=e.callback,this.server_url=e.server_url,this.data=Ct(e.data)};Nt.prototype.start=function(){var e=this;lt({url:this.server_url,type:"POST",data:this.data,credentials:!1,timeout:i.para.datasend_timeout,cors:!0,success:function(){e.isEnd()},error:function(){e.isEnd()}})};var Rt=function(e){this.callback=e.callback,this.server_url=e.server_url,this.data=Ct(e.data)};Rt.prototype.start=function(){var e=this;"object"==typeof navigator&&"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(this.server_url,this.data),setTimeout((function(){e.isEnd()}),40)};var Lt={};function $t(){this.sendingData=0,this.sendingItemKeys=[]}Lt.getSendCall=function(e,t,r){if(i.is_heatmap_render_mode)return!1;if(i.readyState.state<3)return i.log("初始化没有完成"),!1;e._track_id=Number(String(y()).slice(2,5)+String(y()).slice(2,4)+String((new Date).getTime()).slice(-4)),e._flush_time=(new Date).getTime();var n=e;e=JSON.stringify(e);var o={data:n,config:t,callback:r};if(i.events.tempAdd("send",n),!i.para.app_js_bridge&&i.para.batch_send&&localStorage.length<200)return i.log(n),i.batchSend.add(o.data),!1;"item_set"===n.type||"item_delete"===n.type?this.prepareServerUrl(o):i.bridge.dataSend(o,this,r),i.log(n)},Lt.prepareServerUrl=function(e){if("object"==typeof e.config&&e.config.server_url)this.sendCall(e,e.config.server_url,e.callback);else if(P(i.para.server_url)&&i.para.server_url.length)for(var t=0;t<i.para.server_url.length;t++)this.sendCall(e,i.para.server_url[t]);else"string"==typeof i.para.server_url&&""!==i.para.server_url?this.sendCall(e,i.para.server_url,e.callback):i.log("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！")},Lt.sendCall=function(e,t,r){var n={server_url:t,data:JSON.stringify(e.data),callback:r,config:e.config};g(i.para.jsapp)&&!i.para.jsapp.isOnline&&"function"==typeof i.para.jsapp.setData?(delete n.callback,n=JSON.stringify(n),i.para.jsapp.setData(n)):this.realtimeSend(n)},Lt.realtimeSend=function(e){(function(e){var t=function(e){switch(function(e){var t=["image","ajax","beacon"],r=t[0];return"beacon"===(r=e.config&&ce(t,e.config.send_type)>-1?e.config.send_type:i.para.send_type)&&!1===me()&&(r="image"),"ajax"===r&&!1===ve()&&(r="image"),r}(e)){case"image":default:return new It(e);case"ajax":return new Nt(e);case"beacon":return new Rt(e)}}(e),r=t.start;return t.start=function(){var e=this;r.apply(this,arguments),setTimeout((function(){e.isEnd(!0)}),i.para.callback_timeout)},t.end=function(){this.callback&&this.callback();var e=this;setTimeout((function(){e.lastClear&&e.lastClear()}),i.para.datasend_timeout-i.para.callback_timeout)},t.isEnd=function(){this.received||(this.received=!0,this.end())},t})(e).start()},$t.prototype={add:function(e){g(e)&&(this.writeStore(e),"track_signup"!==e.type&&"$pageview"!==e.event||this.sendStrategy())},clearPendingStatus:function(){this.sendingItemKeys.length&&this.removePendingItems(this.sendingItemKeys)},remove:function(e){this.sendingData>0&&--this.sendingData,P(e)&&e.length>0&&I(e,(function(e){Se.remove(e)}))},send:function(e){var t=this;l(i.para.server_url)&&""!==i.para.server_url||P(i.para.server_url)&&i.para.server_url.length?lt({url:P(i.para.server_url)?i.para.server_url[0]:i.para.server_url,type:"POST",data:"data_list="+encodeURIComponent(U(JSON.stringify(e.vals))),credentials:!1,timeout:i.para.batch_send.datasend_timeout,cors:!0,success:function(){t.remove(e.keys),t.removePendingItems(e.keys)},error:function(){t.sendingData>0&&--t.sendingData,t.removePendingItems(e.keys)}}):i.log("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！")},appendPendingItems:function(e){if(!1!==P(e)){this.sendingItemKeys=Ce(this.sendingItemKeys.concat(e));try{var t=Ce(this.getPendingItems().concat(e));i.store.saveObjectVal("sawebjssdk-sendingitems",t)}catch(e){}}},removePendingItems:function(e){if(!1!==P(e)){this.sendingItemKeys.length&&(this.sendingItemKeys=K(this.sendingItemKeys,(function(t){return-1===ce(e,t)})));try{var t=K(this.getPendingItems(),(function(t){return-1===ce(e,t)}));i.store.saveObjectVal("sawebjssdk-sendingitems",t)}catch(e){}}},getPendingItems:function(){return i.store.readObjectVal("sawebjssdk-sendingitems")||[]},sendPrepare:function(e){this.appendPendingItems(e.keys);var t=e.vals;t.length>0&&this.send({keys:e.keys,vals:t})},sendStrategy:function(){if(!1===document.hasFocus())return!1;var e=this.readStore();e.keys.length>0&&0===this.sendingData&&(this.sendingData=1,this.sendPrepare(e))},batchInterval:function(){var e=this;setInterval((function(){e.sendStrategy()}),i.para.batch_send.send_interval)},readStore:function(){for(var e=[],t=[],r=null,n=(new Date).getTime(),o=localStorage.length,a=this.getPendingItems(),s=0;s<o;s++){var c=localStorage.key(s);if(0===c.indexOf("sawebjssdk-")&&/^sawebjssdk\-\d+$/.test(c)){if(a.length&&ce(a,c)>-1)continue;(r=i.store.readObjectVal(c))?r&&g(r)?(r._flush_time=n,e.push(c),t.push(r)):(localStorage.removeItem(c),i.log("localStorage-数据parse异常"+r)):(localStorage.removeItem(c),i.log("localStorage-数据取值异常"+r))}}return{keys:e,vals:t}},writeStore:function(e){var t=String(y()).slice(2,5)+String(y()).slice(2,5)+String((new Date).getTime()).slice(3);i.store.saveObjectVal("sawebjssdk-"+t,e)}};var Ht=new $t,Ut={bridge_info:{touch_app_bridge:!1,verify_success:!1,platform:""},is_verify_success:!1,initPara:function(){var e={is_send:!0,white_list:[],is_mui:!1};"object"==typeof i.para.app_js_bridge?i.para.app_js_bridge=R({},e,i.para.app_js_bridge):!0===i.para.use_app_track||!0===i.para.app_js_bridge||"only"===i.para.use_app_track?(!1!==i.para.use_app_track_is_send&&"only"!==i.para.use_app_track||(e.is_send=!1),i.para.app_js_bridge=R({},e)):"mui"===i.para.use_app_track&&(e.is_mui=!0,i.para.app_js_bridge=R({},e)),!1===i.para.app_js_bridge.is_send&&i.log("设置了 is_send:false,如果打通失败，数据将被丢弃！")},initState:function(){function e(e){function t(e){var t={hostname:"",project:""};try{t.hostname=h(e).hostname,t.project=h(e).searchParams.get("project")||"default"}catch(e){i.log(e)}return t}var r=t(e),n=t(i.para.server_url);if(r.hostname===n.hostname&&r.project===n.project)return!0;if(i.para.app_js_bridge.white_list.length>0)for(var o=0;o<i.para.app_js_bridge.white_list.length;o++){var a=t(i.para.app_js_bridge.white_list[o]);if(a.hostname===r.hostname&&a.project===r.project)return!0}return!1}if(g(i.para.app_js_bridge)&&!i.para.app_js_bridge.is_mui)if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&g(window.SensorsData_iOS_JS_Bridge)&&window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url)e(window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url)&&(i.bridge.is_verify_success=!0);else if(g(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_get_server_url&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_track){var t=window.SensorsData_APP_New_H5_Bridge.sensorsdata_get_server_url();t&&e(t)&&(i.bridge.is_verify_success=!0)}this.bridge_info=this.initDefineBridgeInfo()},initDefineBridgeInfo:function(){var e={touch_app_bridge:!0,verify_success:!1,platform:""};return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage&&g(window.SensorsData_iOS_JS_Bridge)&&window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url?(e.platform="ios",i.bridge.is_verify_success?e.verify_success="success":e.verify_success="fail"):g(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_get_server_url&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_track?(e.platform="android",i.bridge.is_verify_success?e.verify_success="success":e.verify_success="fail"):"object"==typeof SensorsData_APP_JS_Bridge&&(SensorsData_APP_JS_Bridge.sensorsdata_verify&&SensorsData_APP_JS_Bridge.sensorsdata_visual_verify||SensorsData_APP_JS_Bridge.sensorsdata_track)?(e.platform="android",SensorsData_APP_JS_Bridge.sensorsdata_verify&&SensorsData_APP_JS_Bridge.sensorsdata_visual_verify?SensorsData_APP_JS_Bridge.sensorsdata_visual_verify(JSON.stringify({server_url:i.para.server_url}))?e.verify_success="success":e.verify_success="fail":e.verify_success="success"):!/sensors-verify/.test(navigator.userAgent)&&!/sa-sdk-ios/.test(navigator.userAgent)||window.MSStream?e.touch_app_bridge=!1:(e.platform="ios",i.bridge.iOS_UA_bridge()?e.verify_success="success":e.verify_success="fail"),e},iOS_UA_bridge:function(){if(/sensors-verify/.test(navigator.userAgent)){var e=navigator.userAgent.match(/sensors-verify\/([^\s]+)/);if(e&&e[0]&&"string"==typeof e[1]&&2===e[1].split("?").length){e=e[1].split("?");var t=null,r=null;try{t=h(i.para.server_url).hostname,r=h(i.para.server_url).searchParams.get("project")||"default"}catch(e){i.log(e)}return!(!t||t!==e[0]||!r||r!==e[1])}return!1}return!!/sa-sdk-ios/.test(navigator.userAgent)},dataSend:function(e,t,r){var n=e.data;if(g(i.para.app_js_bridge)&&!i.para.app_js_bridge.is_mui)if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage&&g(window.SensorsData_iOS_JS_Bridge)&&window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url)i.bridge.is_verify_success?(window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage(JSON.stringify({callType:"app_h5_track",data:R({server_url:i.para.server_url},n)})),"function"==typeof r&&r()):i.para.app_js_bridge.is_send?(i.debug.apph5({data:n,step:"4.1",output:"all"}),t.prepareServerUrl(e)):"function"==typeof r&&r();else if(g(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_get_server_url&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_track)i.bridge.is_verify_success?(SensorsData_APP_New_H5_Bridge.sensorsdata_track(JSON.stringify(R({server_url:i.para.server_url},n))),"function"==typeof r&&r()):i.para.app_js_bridge.is_send?(i.debug.apph5({data:n,step:"4.2",output:"all"}),t.prepareServerUrl(e)):"function"==typeof r&&r();else if("object"==typeof SensorsData_APP_JS_Bridge&&(SensorsData_APP_JS_Bridge.sensorsdata_verify||SensorsData_APP_JS_Bridge.sensorsdata_track))SensorsData_APP_JS_Bridge.sensorsdata_verify?SensorsData_APP_JS_Bridge.sensorsdata_verify(JSON.stringify(R({server_url:i.para.server_url},n)))?"function"==typeof r&&r():i.para.app_js_bridge.is_send?(i.debug.apph5({data:n,step:"3.1",output:"all"}),t.prepareServerUrl(e)):"function"==typeof r&&r():(SensorsData_APP_JS_Bridge.sensorsdata_track(JSON.stringify(R({server_url:i.para.server_url},n))),"function"==typeof r&&r());else if(!/sensors-verify/.test(navigator.userAgent)&&!/sa-sdk-ios/.test(navigator.userAgent)||window.MSStream)g(i.para.app_js_bridge)&&!0===i.para.app_js_bridge.is_send?(i.debug.apph5({data:n,step:"2",output:"all"}),t.prepareServerUrl(e)):"function"==typeof r&&r();else{var o=null;if(i.bridge.iOS_UA_bridge()){o=document.createElement("iframe");var a=function(e){var t=JSON.stringify(R({server_url:i.para.server_url},e));return t=t.replaceAll(/\r\n/g,""),"sensorsanalytics://trackEvent?event="+encodeURIComponent(t)}(n);o.setAttribute("src",a),document.documentElement.appendChild(o),o.parentNode.removeChild(o),o=null,"function"==typeof r&&r()}else i.para.app_js_bridge.is_send?(i.debug.apph5({data:n,step:"3.2",output:"all"}),t.prepareServerUrl(e)):"function"==typeof r&&r()}else g(i.para.app_js_bridge)&&i.para.app_js_bridge.is_mui?g(window.plus)&&window.plus.SDAnalytics&&window.plus.SDAnalytics.trackH5Event?(window.plus.SDAnalytics.trackH5Event(e),"function"==typeof r&&r()):g(i.para.app_js_bridge)&&!0===i.para.app_js_bridge.is_send?t.prepareServerUrl(e):"function"==typeof r&&r():(i.debug.apph5({data:n,step:"1",output:"code"}),t.prepareServerUrl(e))},app_js_bridge_v1:function(){var e=null,t=null;window.sensorsdata_app_js_bridge_call_js=function(r){!function(r){ge(e=r)&&(e=JSON.parse(e)),t&&(t(e),t=null,e=null)}(r)},i.getAppStatus=function(r){if(function(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var e=document.createElement("iframe");e.setAttribute("src","sensorsanalytics://getAppInfo"),document.documentElement.appendChild(e),e.parentNode.removeChild(e),e=null}}(),"object"==typeof window.SensorsData_APP_JS_Bridge&&window.SensorsData_APP_JS_Bridge.sensorsdata_call_app&&ge(e=SensorsData_APP_JS_Bridge.sensorsdata_call_app())&&(e=JSON.parse(e)),!r)return e;null===e?t=r:(r(e),e=null)}},supportAppCallJs:function(){window.sensorsdata_app_call_js=function(e,t){if(e in window.sensorsdata_app_call_js.modules)return window.sensorsdata_app_call_js.modules[e](t)},window.sensorsdata_app_call_js.modules={}}},Mt=function(e){this.list={},this.type=e.type,this.app_call_js=k(e.app_call_js)?e.app_call_js:function(){},this.init()};Mt.prototype.init=function(){var e=this;window.sensorsdata_app_call_js.modules[this.type]||(window.sensorsdata_app_call_js.modules[this.type]=function(t){return e.app_call_js(t)})},Mt.prototype.jsCallApp=function(e){var t={callType:this.type,data:e};if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage)window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage(JSON.stringify(t));else{if(!g(window.SensorsData_APP_New_H5_Bridge)||!window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app)return i.log("数据发往App失败，App没有暴露bridge"),!1;window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app(JSON.stringify(t))}},Mt.prototype.getAppData=function(){return g(window.SensorsData_APP_New_H5_Bridge)?k(window.SensorsData_APP_New_H5_Bridge[this.type])?window.SensorsData_APP_New_H5_Bridge[this.type]():window.SensorsData_APP_New_H5_Bridge[this.type]:g(window.SensorsData_APP_JS_Bridge)&&k(window.SensorsData_APP_JS_Bridge[this.type])?window.SensorsData_APP_JS_Bridge[this.type]():void 0},Mt.prototype.hasAppBridge=function(){return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage?"ios":g(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app?"android":(i.log("App端bridge未暴露"),!1)},Mt.prototype.requestToApp=function(e){var t=this,r=g(e.data)?e.data:{};k(e.callback)||(e.callback=function(){}),g(e.timeout)&&_e(e.timeout.time)&&(k(e.timeout.callback)||(e.timeout.callback=function(){}),e.timer=setTimeout((function(){e.timeout.callback(),delete t.list[n]}),e.timeout.time));var n=(new Date).getTime().toString(16)+"-"+String(y()).replace(".","").slice(1,8);this.list[n]=e;var o={callType:this.type,data:r};if(o.data.message_id=n,window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage)window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage(JSON.stringify(o));else{if(!g(window.SensorsData_APP_New_H5_Bridge)||!window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app)return i.log("数据发往App失败，App没有暴露bridge"),!1;window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app(JSON.stringify(o))}},Mt.prototype.double=function(e){if(e.message_id){var t=this.list[e.message_id];t&&(t.timer&&clearTimeout(t.timer),t.callback(e),delete this.list[e.message_id])}};var Bt={initUrl:function(){var e,t,r={server_url:{project:"",host:""},page_url:{host:"",pathname:""}};if(!l(i.para.server_url))return i.log("----vcollect---server_url必须为字符串"),!1;try{e=h(i.para.server_url),r.server_url.project=e.searchParams.get("project")||"default",r.server_url.host=e.host}catch(e){return i.log("----vcollect---server_url解析异常",e),!1}try{t=h(location.href),r.page_url.host=t.hostname,r.page_url.pathname=t.pathname}catch(e){return i.log("----vcollect---页面地址解析异常",e),!1}return r},isDiv:function(e){return!e.element_path||"div"===p(e.element_path.split(">").pop()).slice(0,3)},configIsMatchNew:function(e,t){if(l(e.$element_selector)&&l(t.element_selector)){if("element_selector"===t.element_field&&"equal"===t.function)return e.$element_selector===t.element_selector;if("element_selector"===t.element_field&&"contain"===t.function)return e.$element_selector.indexOf(t.element_selector)>-1}if(l(e.$element_path)&&l(t.element_path)){if("element_path"===t.element_field&&"equal"===t.function)return e.$element_path===t.element_path;if("element_path"===t.element_field&&"contain"===t.function)return e.$element_path.indexOf(t.element_path)>-1}return!1},configIsMatch:function(e,t){return(!t.limit_element_content||t.element_content===e.$element_content)&&(!t.limit_element_position||t.element_position===String(e.$element_position))&&(t.element_field&&t.function?Bt.configIsMatchNew(e,t):Bt.configIsMatchOldVersion(e,t))},configIsMatchOldVersion:function(e,t){if(!t.element_path)return!1;if(void 0!==e.$element_position){if(t.element_path!==e.$element_path)return!1}else if(i.vtrackBase.isDiv({element_path:t.element_path})){if(e.$element_path.indexOf(t.element_path)<0)return!1}else if(t.element_path!==e.$element_path)return!1;return!0},filterConfig:function(e,t,r){var n=[];if(!r){var i=Bt.initUrl();if(!i)return[];r=i.page_url}return"$WebClick"===e.event&&I(t,(function(t){g(t)&&("webclick"===t.event_type||"appclick"===t.event_type)&&g(t.event)&&t.event.url_host===r.host&&t.event.url_path===r.pathname&&Bt.configIsMatch(e.properties,t.event)&&n.push(t)})),n},getPropElInLi:function(e,t){if(!(e&&w(e)&&l(t)))return null;if("li"!==e.tagName.toLowerCase())return null;var r=i.heatmap.getDomSelector(e);return r?X(r+t)||null:(i.log("----custom---获取同级属性元素失败，selector信息异常",r,t),null)},getProp:function(e,t){if(!g(e))return!1;if(!(l(e.name)&&e.name.length>0))return i.log("----vcustom----属性名不合法,属性抛弃",e.name),!1;var r,n,o={};if("content"===e.method){var a;if(l(e.element_selector)&&e.element_selector.length>0)a=X(e.element_selector);else{if(!t||!l(e.list_selector))return i.log("----vcustom----属性配置异常，属性抛弃",e.name),!1;var s=X(t.properties.$element_selector);if(!s)return i.log("----vcustom----点击元素获取异常，属性抛弃",e.name),!1;var c=i.heatmap.getClosestLi(s);a=Bt.getPropElInLi(c,e.list_selector)}if(!a||!w(a))return i.log("----vcustom----属性元素获取失败，属性抛弃",e.name),!1;if("input"===a.tagName.toLowerCase())r=a.value||"";else if("select"===a.tagName.toLowerCase()){var u=a.selectedIndex;_e(u)&&w(a[u])&&(r=ut(a[u],"select"))}else r=ut(a,a.tagName.toLowerCase());if(e.regular){try{n=new RegExp(e.regular).exec(r)}catch(t){return i.log("----vcustom----正则处理失败，属性抛弃",e.name),!1}if(null===n)return i.log("----vcustom----属性规则处理，未匹配到结果,属性抛弃",e.name),!1;if(!P(n)||!l(n[0]))return i.log("----vcustom----正则处理异常，属性抛弃",e.name,n),!1;r=n[0]}if("STRING"===e.type)o[e.name]=r;else if("NUMBER"===e.type){if(r.length<1)return i.log("----vcustom----未获取到数字内容，属性抛弃",e.name,r),!1;if(isNaN(Number(r)))return i.log("----vcustom----数字类型属性转换失败，属性抛弃",e.name,r),!1;o[e.name]=Number(r)}return o}return i.log("----vcustom----属性不支持此获取方式",e.name,e.method),!1},getAssignConfigs:function(e,t){var r=Bt.initUrl();if(!r||!r.page_url)return[];if(!g(t))return[];var n=[];return t.events=t.events||t.eventList,P(t.events)&&t.events.length>0?(I(t.events,(function(t){g(t)&&g(t.event)&&t.event.url_host===r.page_url.host&&t.event.url_path===r.page_url.pathname&&e(t)&&n.push(t)})),n):[]},addCustomProps:function(e){if("success"===i.bridge.bridge_info.verify_success){var t=i.vapph5collect.customProp.geth5Props(JSON.parse(JSON.stringify(e)));g(t)&&!de(t)&&(e.properties=R(e.properties,t))}var r=i.vtrackcollect.customProp.getVtrackProps(JSON.parse(JSON.stringify(e)));return g(r)&&!de(r)&&(e.properties=R(e.properties,r)),e},init:function(){i.vtrackcollect.init(),"success"===i.bridge.bridge_info.verify_success&&i.vapph5collect.init()}},qt={events:[],init:function(e){this.filterWebClickEvents(e)},filterWebClickEvents:function(e){this.events=i.vtrackcollect.getAssignConfigs((function(e){return!(!g(e)||!0!==e.event.unlimited_div||"webclick"!==e.event_type)}),e)},isTargetEle:function(e){var t=i.heatmap.getEleDetail(e);if(!g(t)||!l(t.$element_path))return!1;for(var r=0;r<this.events.length;r++)if(g(this.events[r])&&g(this.events[r].event)&&i.vtrackcollect.configIsMatch(t,this.events[r].event))return!0;return!1}},Jt={events:[],configSwitch:!1,collectAble:function(){return this.configSwitch&&g(i.para.heatmap)&&i.para.heatmap.get_vtrack_config},updateEvents:function(e){this.events=i.vtrackcollect.getAssignConfigs((function(e){return!!(g(e)&&P(e.properties)&&e.properties.length>0)}),e),this.events.length?this.configSwitch=!0:this.configSwitch=!1},getVtrackProps:function(e){var t={};return this.collectAble()?("$WebClick"===e.event&&(t=this.clickCustomPropMaker(e,this.events)),t):{}},clickCustomPropMaker:function(e,t,r){var n=this;r=r||this.filterConfig(e,t,i.vtrackcollect.url_info.page_url);var o={};return r.length?(I(r,(function(t){P(t.properties)&&t.properties.length>0&&I(t.properties,(function(t){var r=n.getProp(t,e);g(r)&&R(o,r)}))})),o):{}},getProp:Bt.getProp,getPropElInLi:Bt.getPropElInLi,filterConfig:Bt.filterConfig},Ft={unlimitedDiv:qt,config:{},storageEnable:!0,storage_name:"webjssdkvtrackcollect",para:{session_time:18e5,timeout:5e3,update_interval:18e5},url_info:{},timer:null,update_time:null,customProp:Jt,initUrl:function(){var e=Bt.initUrl();if(e){var t;try{(t=new f(i.para.server_url))._values.Path="/config/visualized/Web.conf",e.api_url=t.getUrl()}catch(e){return i.log("----vtrackcollect---API地址解析异常",e),!1}this.url_info=e}return e},init:function(){if(!g(i.para.heatmap)||!i.para.heatmap.get_vtrack_config)return!1;if(Se.isSupport()||(this.storageEnable=!1),!this.initUrl())return i.log("----vtrackcustom----初始化失败，url信息解析失败"),!1;if(this.storageEnable){var e=i.store.readObjectVal(this.storage_name);if(g(e)&&g(e.data))if(this.serverUrlIsSame(e.serverUrl)){this.config=e.data,this.update_time=e.updateTime,this.updateConfig(e.data);var t=(new Date).getTime()-this.update_time;if(_e(t)&&t>0&&t<this.para.session_time){var r=this.para.update_interval-t;this.setNextFetch(r)}else this.getConfigFromServer()}else this.getConfigFromServer();else this.getConfigFromServer()}else this.getConfigFromServer();this.pageStateListenner()},serverUrlIsSame:function(e){return!!g(e)&&e.host===this.url_info.server_url.host&&e.project===this.url_info.server_url.project},getConfigFromServer:function(){var e=this;this.sendRequest((function(t,r){e.update_time=(new Date).getTime();var n={};200===t?r&&g(r)&&"Web"===r.os&&(n=r,e.updateConfig(n)):205===t?e.updateConfig(n):304===t?n=e.config:(i.log("----vtrackcustom----数据异常",t),e.updateConfig(n)),e.updateStorage(n),e.setNextFetch()}),(function(t){e.update_time=(new Date).getTime(),i.log("----vtrackcustom----配置拉取失败",t),e.setNextFetch()}))},setNextFetch:function(e){var t=this;this.timer&&(clearTimeout(this.timer),this.timer=null),e=e||this.para.update_interval,this.timer=setTimeout((function(){t.getConfigFromServer()}),e)},pageStateListenner:function(){var e=this;be({visible:function(){var t=(new Date).getTime()-e.update_time;if(_e(t)&&t>0&&t<e.para.update_interval){var r=e.para.update_interval-t;e.setNextFetch(r)}else e.getConfigFromServer()},hidden:function(){e.timer&&(clearTimeout(e.timer),e.timer=null)}})},updateConfig:function(e){if(!g(e))return!1;this.config=e,this.customProp.updateEvents(e),this.unlimitedDiv.init(e)},updateStorage:function(e){if(!this.storageEnable)return!1;if(!g(e))return!1;var t;if(this.url_info.server_url)t=this.url_info.server_url;else{var r=i.vtrackcollect.initUrl();if(!r)return!1;t=r.server_url}var n={updateTime:(new Date).getTime(),data:e,serverUrl:t};i.store.saveObjectVal(this.storage_name,n)},sendRequest:function(e,t){var r={app_id:this.url_info.page_url.host};this.config.version&&(r.v=this.config.version),ye({url:this.url_info.api_url,callbackName:"saJSSDKVtrackCollectConfig",data:r,timeout:this.para.timeout,success:function(t,r){e(t,r)},error:function(e){t(e)}})},getAssignConfigs:Bt.getAssignConfigs,configIsMatch:Bt.configIsMatch},Wt={events:[],getAssignConfigs:Bt.getAssignConfigs,filterConfig:Bt.filterConfig,getProp:Bt.getProp,initUrl:Bt.initUrl,updateEvents:function(e){P(e)&&(this.events=e)},init:function(){this.initAppGetPropsBridge()},geth5Props:function(e){var t={},r=[],n=this;if(!this.events.length)return{};if("$WebClick"===e.event){var i=this.filterConfig(e,this.events);if(!i.length)return{};I(i,(function(i){g(i)&&(P(i.properties)&&i.properties.length>0&&I(i.properties,(function(r){if(g(r))if(!1===r.h5)P(t.sensorsdata_app_visual_properties)||(t.sensorsdata_app_visual_properties=[]),t.sensorsdata_app_visual_properties.push(r);else{var i=n.getProp(r,e);g(i)&&(t=R(t,i))}})),l(i.event_name)&&r.push(i.event_name))})),g(window.SensorsData_App_Visual_Bridge)&&window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode&&(!0===window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode||window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode())&&(t.sensorsdata_web_visual_eventName=r)}return t.sensorsdata_app_visual_properties&&(t.sensorsdata_app_visual_properties=U(JSON.stringify(t.sensorsdata_app_visual_properties))),t},initAppGetPropsBridge:function(){var e=this;return new i.JSBridge({type:"getJSVisualProperties",app_call_js:function(t){var r={};try{t=JSON.parse(H(t))}catch(e){i.log("getJSVisualProperties data parse error!")}if(g(t)){var n=t.sensorsdata_js_visual_properties,o=e.initUrl();o&&(o=o.page_url,P(n)&&n.length>0&&I(n,(function(t){if(g(t)&&t.url_host===o.host&&t.url_path===o.pathname&&t.h5){var n=e.getProp(t);g(n)&&(r=R(r,n))}})))}if("android"===i.bridge.bridge_info.platform){var a={callType:"getJSVisualProperties",data:r};g(t)&&t.message_id&&(a.message_id=t.message_id),g(window.SensorsData_APP_New_H5_Bridge)&&k(SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app)?SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app(JSON.stringify(a)):g(window.SensorsData_APP_JS_Bridge)&&k(SensorsData_APP_JS_Bridge.sensorsdata_js_call_app)&&SensorsData_APP_JS_Bridge.sensorsdata_js_call_app(JSON.stringify(a))}return r}})}},Kt={events:[],customProp:Wt,getAssignConfigs:Bt.getAssignConfigs,initUrl:Bt.initUrl,init:function(){if(this.initUrl()){var e=this.getConfigFromApp();e&&this.updateConfigs(e),this.customProp.init(),this.initAppUpdateConfigBridge()}},initAppUpdateConfigBridge:function(){var e=this;return new i.JSBridge({type:"updateH5VisualConfig",app_call_js:function(t){if(t){try{t=JSON.parse(H(t))}catch(e){return void i.log("updateH5VisualConfig result parse error！")}e.updateConfigs(t)}}})},getConfigFromApp:function(){var e=new i.JSBridge({type:"sensorsdata_get_app_visual_config"}).getAppData();if(e)try{e=JSON.parse(H(e))}catch(t){e=null,i.log("getAppVisualConfig result parse error！")}return e},updateConfigs:function(e){this.events=this.filterConfigs(e),this.customProp.updateEvents(this.events)},filterConfigs:function(e){return this.getAssignConfigs((function(e){return!(!g(e)||!1===e.h5)}),e)}},zt=new s,Vt={};function Xt(e){var t=null,r=new RegExp(e+"=([^&#]+)");try{I(JSON.parse(window.name),(function(r,n){e===n&&(t=decodeURIComponent(r))}))}catch(e){t=null}if(null===t){var n=location.href.match(r);n&&n[0]&&n[1]&&(t=c(n[1]))}return t}Vt.spa=zt,Vt.initSystemEvent=function(){!function(e){var t,r=location.href,n=window.history.pushState,i=window.history.replaceState;k(window.history.pushState)&&(window.history.pushState=function(){n.apply(window.history,arguments),e(r),r=location.href}),k(window.history.replaceState)&&(window.history.replaceState=function(){i.apply(window.history,arguments),e(r),r=location.href}),t=window.document.documentMode?"hashchange":n?"popstate":"hashchange",T(window,t,(function(){e(r),r=location.href}))}((function(e){zt.emit("switch",e)}))};var Gt={getOriginalUrl:function(){var e=location.protocol+"//"+location.host+location.pathname,t="",r="";function n(e){var t=e.split("&"),r=["sa-request-id","sa-request-type","sa-request-url"],n=[];return I(t,(function(e){r.indexOf(e.split("=")[0])<0&&n.push(e)})),n.join("&")}if(location.search){var i=n(location.search.slice(1));i&&(t="?"+i)}if(location.hash&&(r=location.hash,location.hash.indexOf("?")>-1)){var o=location.hash.split("?"),a=n(o[1]);a&&(r=o[0]+"?"+a)}return decodeURI(e+t+r)},isSeachHasKeyword:function(){return null!==Xt("sa-request-id")&&("string"==typeof sessionStorage.getItem("sensors-visual-mode")&&sessionStorage.removeItem("sensors-visual-mode"),!0)},hasKeywordHandle:function(){var e=Xt("sa-request-id"),t=Xt("sa-request-type"),r=Xt("sa-request-url");Pt.setNotice(r),je.isSupport()&&(null!==r&&sessionStorage.setItem("sensors_heatmap_url",r),sessionStorage.setItem("sensors_heatmap_id",e),null!==t?"1"===t||"2"===t||"3"===t?sessionStorage.setItem("sensors_heatmap_type",t):t=null:t=null!==sessionStorage.getItem("sensors_heatmap_type")?sessionStorage.getItem("sensors_heatmap_type"):null),this.isReady(e,t,this.getOriginalUrl())},isReady:function(e,t,r){i.para.heatmap_url?we({success:function(){setTimeout((function(){"undefined"!=typeof sa_jssdk_heatmap_render&&(sa_jssdk_heatmap_render(i,e,t,r),"object"==typeof console&&"function"==typeof console.log&&(i.heatmap_version&&i.heatmap_version===i.lib_version||console.log("heatmap.js与sensorsdata.js版本号不一致，可能存在风险!")))}),0)},error:function(){},type:"js",url:i.para.heatmap_url}):i.log("没有指定heatmap_url的路径")},isStorageHasKeyword:function(){return je.isSupport()&&"string"==typeof sessionStorage.getItem("sensors_heatmap_id")},storageHasKeywordHandle:function(){Pt.setNotice(),Gt.isReady(sessionStorage.getItem("sensors_heatmap_id"),sessionStorage.getItem("sensors_heatmap_type"),this.getOriginalUrl())}},Yt={isStorageHasKeyword:function(){return je.isSupport()&&"string"==typeof sessionStorage.getItem("sensors-visual-mode")},isSearchHasKeyword:function(){return(!0===Xt("sa-visual-mode")||"true"===Xt("sa-visual-mode"))&&("string"==typeof sessionStorage.getItem("sensors_heatmap_id")&&sessionStorage.removeItem("sensors_heatmap_id"),!0)},loadVtrack:function(){we({success:function(){},error:function(){},type:"js",url:i.para.vtrack_url?i.para.vtrack_url:location.protocol+"//static.sensorsdata.cn/sdk/"+i.lib_version+"/vtrack.min.js"})},messageListener:function(e){if("sa-fe"!==e.data.source)return!1;if("v-track-mode"===e.data.type){if(e.data.data&&e.data.data.isVtrack)if(je.isSupport()&&sessionStorage.setItem("sensors-visual-mode","true"),e.data.data.userURL&&location.href.match(/sa-visual-mode=true/)){var t=fe(r=e.data.data.userURL)?Pe(r):(i.log("可视化模式检测 URL 失败"),!1);t&&(window.location.href=t)}else Yt.loadVtrack();window.removeEventListener("message",Yt.messageListener,!1)}var r},removeMessageHandle:function(){window.removeEventListener&&window.removeEventListener("message",Yt.messageListener,!1)},verifyVtrackMode:function(){window.addEventListener&&window.addEventListener("message",Yt.messageListener,!1),Yt.postMessage()},postMessage:function(){window.parent&&window.parent.postMessage&&window.parent.postMessage({source:"sa-web-sdk",type:"v-is-vtrack",data:{sdkversion:"1.22.1"}},"*")},notifyUser:function(){var e=function(t){if("sa-fe"!==t.data.source)return!1;"v-track-mode"===t.data.type&&(t.data.data&&t.data.data.isVtrack&&alert("当前版本不支持，请升级部署神策数据治理"),window.removeEventListener("message",e,!1))};window.addEventListener&&window.addEventListener("message",e,!1),Yt.postMessage()}};function Zt(e){var t=i.bridge.bridge_info;function r(){var e=[];t.touch_app_bridge||e.push(i.debug.defineMode("1")),g(i.para.app_js_bridge)||(e.push(i.debug.defineMode("2")),t.verify_success=!1),g(i.para.heatmap)&&"default"==i.para.heatmap.clickmap||e.push(i.debug.defineMode("3")),"fail"===t.verify_success&&e.push(i.debug.defineMode("4"));var r={callType:"app_alert",data:e};SensorsData_App_Visual_Bridge&&SensorsData_App_Visual_Bridge.sensorsdata_visualized_alert_info?SensorsData_App_Visual_Bridge.sensorsdata_visualized_alert_info(JSON.stringify(r)):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage(JSON.stringify(r))}if(g(window.SensorsData_App_Visual_Bridge)&&window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode&&(!0===window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode||window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode()))if(g(i.para.heatmap)&&"default"==i.para.heatmap.clickmap)if(g(i.para.app_js_bridge)&&"success"===t.verify_success)if(e)sa_jssdk_app_define_mode(i,e);else{var n=location.protocol;we({success:function(){setTimeout((function(){"undefined"!=typeof sa_jssdk_app_define_mode&&sa_jssdk_app_define_mode(i,e)}),0)},error:function(){},type:"js",url:(n=ce(["http:","https:"],n)>-1?n:"https:")+"//static.sensorsdata.cn/sdk/"+i.lib_version+"/vapph5define.min.js"})}else r();else r()}function Qt(){Gt.isSeachHasKeyword()?Gt.hasKeywordHandle():window.parent!==self&&Yt.isSearchHasKeyword()?Yt.verifyVtrackMode():Gt.isStorageHasKeyword()?Gt.storageHasKeywordHandle():window.parent!==self&&Yt.isStorageHasKeyword()?Yt.verifyVtrackMode():(i.readyState.setState(3),new i.JSBridge({type:"visualized",app_call_js:function(){"undefined"!=typeof sa_jssdk_app_define_mode?Zt(!0):Zt(!1)}}),Zt(!1),i.bridge.app_js_bridge_v1(),st.initPage(),i.para.is_track_single_page&&zt.on("switch",(function(e){var t=function(t){t=t||{},e!==location.href&&(st.pageProp.referrer=ne(e),i.quick("autoTrack",R({$url:ne(),$referrer:ne(e)},t)))};if("boolean"==typeof i.para.is_track_single_page)t();else if("function"==typeof i.para.is_track_single_page){var r=i.para.is_track_single_page();g(r)?t(r):!0===r&&t()}})),i.para.batch_send&&(pt(window,"onpagehide"in window?"pagehide":"unload",(function(){i.batchSend.clearPendingStatus()})),i.batchSend.batchInterval()),i.store.init(),i.vtrackBase.init(),i.readyState.setState(4),i._q&&P(i._q)&&i._q.length>0&&I(i._q,(function(e){i[e[0]].apply(i,Array.prototype.slice.call(e[1]))})),g(i.para.heatmap)&&(Pt.initHeatmap(),Pt.initScrollmap()),Yt.notifyUser())}var er={track:function(e,t,r){},quick:function(e,t,r,n){},register:function(e){},registerPage:function(e){},registerOnce:function(e){},clearAllRegister:function(e){},trackSignup:function(e,t,r,n){},setProfile:function(e,t){},setOnceProfile:function(e,t){},appendProfile:function(e,t){},incrementProfile:function(e,t){},deleteProfile:function(e){},unsetProfile:function(e,t){},identify:function(e,t){},login:function(e,t){},logout:function(e){},trackLink:function(e,t,r){},deleteItem:function(e,t){},setItem:function(e,t,r){},getAppStatus:function(e){},clearPageRegister:function(e){}};function tr(e){this.cancel=function(){e=!0},this.getCanceled=function(){return e||!1}}function rr(e,t,r){var n=null;try{n=JSON.parse(JSON.stringify(e))}catch(e){He(e)}this.getOriginalData=function(){return n},this.getPosition=function(){return t},this.cancelationToken=new tr,this.sensors=r}function nr(e){if(!g(e))throw"error: Stage constructor requires arguments.";this.processDef=e,this.registeredInterceptors={}}nr.prototype.process=function(e,t){if(e&&e in this.processDef){var r=this.registeredInterceptors[e];if(r&&P(r)&&r.length>0)for(var n={current:0,total:r.length},o=new rr(t,n,i),a=0;a<r.length;a++)try{if(n.current=a+1,t=r[a].call(null,t,o)||t,o.cancelationToken.getCanceled()){He("process ["+e+"] has been canceled.");break}}catch(e){He("interceptor error:"+e)}return this.processDef[e]&&this.processDef[e]in this.processDef&&(t=this.process(this.processDef[e],t)),t}He("process ["+e+"] is not supported")},nr.prototype.registerStageImplementation=function(e){e&&e.init&&k(e.init)&&(e.init(this),e.interceptor&&this.registerInterceptor(e.interceptor))},nr.prototype.registerInterceptor=function(e){if(e)for(var t in e){var r=e[t];if(r&&g(r)&&k(r.entry)){_e(r.priority)||(r.priority=1e7),this.registeredInterceptors[t]||(this.registeredInterceptors[t]=[]);var n=this.registeredInterceptors[t],i=r.priority,o=r.entry;switch(!0){case i<=0:n.unshift(o);break;case i>=n.length:n.push(o);break;default:n.splice(i,0,o)}}}};var ir=new nr({addCustomProps:"formatData",formatData:null});function or(e){e&&e.dataStage&&ir.registerStageImplementation(e.dataStage)}function ar(e){e.kit=Dt,e.saEvent=kt,this.dataStage=St}function sr(e){var t=["$element_selector","$element_path"],r=["sensorsdata_app_visual_properties"];g(e)&&I(e,(function(n,i){if(g(n))sr(e[i]);else if(l(n)){if(ce(r,i)>-1)return;e[i]=function(e,t){return _e(t)&&e.length>t?(He("字符串长度超过限制，已经做截取--"+e),e.slice(0,t)):e}(n,ce(t,i)>-1?1024:$e.max_string_length)}}))}function cr(e){var t=e.properties;g(t)?(function(e){g(e)&&I(e,(function(t,r){if(P(t)){var n=[];I(t,(function(e){l(e)?n.push(e):He("您的数据-",r,t,"的数组里的值必须是字符串,已经将其删除")})),e[r]=n}l(t)||_e(t)||F(t)||pe(t)||P(t)||k(t)||"$option"===r||(He("您的数据-",r,t,"-格式不满足要求，我们已经将其删除"),delete e[r])}))}(t),function(e){g(e)&&I(["distinct_id","user_id","id","date","datetime","event","events","first_id","original_id","device_id","properties","second_id","time","users"],(function(t,r){t in e&&(r<3?(delete e[t],He("您的属性- "+t+"是保留字段，我们已经将其删除")):He("您的属性- "+t+"是保留字段，请避免其作为属性名"))}))}(t),function(e){void 0!==e.properties.$project&&(e.project=e.properties.$project,delete e.properties.$project),void 0!==e.properties.$token&&(e.token=e.properties.$token,delete e.properties.$token)}(e),function(e){I(e,(function(t,r){wt({propertyKey:r},(function(t,n,i){return t||"keyLength"===i||delete e[r],!0}))}))}(t),sr(t)):"properties"in e&&(e.properties={}),Te(e),function(e){"item_type"in e&&wt({item_type:e.item_type},(function(t){return t||delete e.item_type,!0})),"item_id"in e&&wt({item_id:e.item_id},(function(t,r,n){return t||"string"!==n||delete e.item_id,!0}))}(e)}var ur={init:function(){},interceptor:{formatData:{priority:0,entry:function(e){return cr(e),e}}}};function lr(){this.dataStage=ur}var pr=window.sensors_data_pre_config,dr=!!g(pr)&&pr.is_compliance_enabled;function fr(e){e&&(d.setup(He),i._=R(Le,At),i.ee=Vt,i.sendState=Lt,i.events=new i._.EventEmitterSa,i.batchSend=Ht,i.bridge=Ut,i.JSBridge=Mt,i.store=mt,i.vtrackBase=Bt,i.unlimitedDiv=qt,i.customProp=Jt,i.vtrackcollect=Ft,i.vapph5collect=Kt,i.heatmap=Pt,i.detectMode=Qt,or(new ar(i)),or(new lr(i)));var t=e?Tt:er;for(var r in t)i[r]=t[r]}i.init=function(e){if(i.readyState&&i.readyState.state&&i.readyState.state>=2)return!1;dr&&fr(!0),i.ee.initSystemEvent(),i.setInitVar(),i.readyState.setState(2),i.initPara(e),i.bridge.supportAppCallJs(),i.detectMode(),i.iOSWebClickPolyfill()},dr?fr(!1):(fr(!0),I(["setItem","deleteItem","getAppStatus","track","quick","register","registerPage","registerOnce","trackSignup","setProfile","setOnceProfile","appendProfile","incrementProfile","deleteProfile","unsetProfile","identify","login","logout","trackLink","clearAllRegister","clearPageRegister"],(function(e){var t=i[e];i[e]=function(){if(i.readyState.state<3)return P(i._q)||(i._q=[]),i._q.push([e,arguments]),!1;if(i.readyState.getState())return t.apply(i,arguments);try{console.error("请先初始化神策JS SDK")}catch(e){i.log(e)}}})));var hr=i;try{i.modules={},i.modules.Amp=function(){var e={sd:null,init:function(e){if(this.sd)return!1;if(this.sd=e,!this.sd||!this.sd._)return!1;var t=this.sd._.cookie.get("sensors_amp_id"),r=this.sd.store._state.distinct_id;if(t&&t.length>0){var n="amp-"===t.slice(0,4);if(t!==r){if(!n)return!1;this.sd.store._state.first_id?(this.sd.identify(t,!0),this.sd.saEvent.send({original_id:t,distinct_id:r,type:"track_signup",event:"$SignUp",properties:{}},null),this.setAmpId(r)):this.sd.identify(t,!0)}}else this.setAmpId(r);this.addListener()},addListener:function(){var e=this;this.sd.events.on("changeDistinctId",(function(t){e.setAmpId(t)})),this.sd.events.isReady()},setAmpId:function(e){this.sd._.cookie.set("sensors_amp_id",e)}};return window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.Amp=window.SensorsDataWebJSSDKPlugin.Amp||e:window.SensorsDataWebJSSDKPlugin={Amp:e},e}(),i.modules.Channel=function(){var e,t,r,n={event_list:[],latest_event_initial_time:null,max_save_time:2592e6,init:function(n){return!t&&!!(t=n)&&(e=t._,r=t.store,!!e.localStorage.isSupport()&&(t.para.max_string_length=1024,this.eventList.init(),this.addLatestChannelUrl(),void this.addIsChannelCallbackEvent()))},addIsChannelCallbackEvent:function(){t.registerPage({$is_channel_callback_event:function(e){if(e.event&&"$WebClick"!==e.event&&"$pageview"!==e.event&&"$WebStay"!==e.event&&"$SignUp"!==e.event)return!n.eventList.hasEvent(e.event)&&(n.eventList.add(e.event),!0)}})},addLatestChannelUrl:function(){var r=this.getUrlDomain(),i=this.cookie.getChannel();if("url解析失败"===r)this.registerAndSave({_sa_channel_landing_url:"",_sa_channel_landing_url_error:"url的domain解析失败"});else if(e.isReferralTraffic(document.referrer)){var o=e.getQueryParam(location.href,"sat_cf");e.isString(o)&&o.length>0?(this.registerAndSave({_sa_channel_landing_url:location.href}),n.channelLinkHandler()):this.registerAndSave({_sa_channel_landing_url:""})}else i?t.registerPage(i):t.registerPage({_sa_channel_landing_url:"",_sa_channel_landing_url_error:"取值异常"})},registerAndSave:function(e){t.registerPage(e),this.cookie.saveChannel(e)},cookie:{getChannel:function(){var t=e.decryptIfNeeded(e.cookie.get("sensorsdata2015jssdkchannel"));return t=e.safeJSONParse(t),!(!e.isObject(t)||!t.prop)&&t.prop},saveChannel:function(r){var n={prop:r},i=JSON.stringify(n);t.para.encrypt_cookie&&(i=e.encrypt(i)),e.cookie.set("sensorsdata2015jssdkchannel",i)}},channelLinkHandler:function(){this.eventList.reset(),t.track("$ChannelLinkReaching")},getUrlDomain:function(){var t=e.info.pageProp.url_domain;return""===t&&(t="url解析失败"),t},eventList:{init:function(){var t=this.get(),r=(new Date).getTime();if(t&&e.isNumber(t.latest_event_initial_time)&&e.isArray(t.eventList)){var i=r-t.latest_event_initial_time;i>0&&i<n.max_save_time?(n.event_list=t.eventList,n.latest_event_initial_time=t.latest_event_initial_time):this.reset()}else this.reset()},get:function(){var e={};try{e=r.readObjectVal("sawebjssdkchannel")}catch(e){t.log(e)}return e},add:function(e){n.event_list.push(e),this.save()},save:function(){var e={latest_event_initial_time:n.latest_event_initial_time,eventList:n.event_list};r.saveObjectVal("sawebjssdkchannel",e)},reset:function(){n.event_list=[],n.latest_event_initial_time=(new Date).getTime(),this.save()},hasEvent:function(t){var r=!1;return e.each(n.event_list,(function(e){e===t&&(r=!0)})),r}}};return window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.SensorsChannel=window.SensorsDataWebJSSDKPlugin.SensorsChannel||n:window.SensorsDataWebJSSDKPlugin={SensorsChannel:n},n}(),i.modules.Deeplink=function(){/micromessenger\/([\d.]+)/i.test(navigator.userAgent||"");var e,t=function(){var e={};return void 0!==document.hidden?(e.hidden="hidden",e.visibilityChange="visibilitychange"):void 0!==document.msHidden?(e.hidden="msHidden",e.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(e.hidden="webkitHidden",e.visibilityChange="webkitvisibilitychange"),e};function r(){return void 0!==e&&document[e]}e=t().hidden;var n={android:/Android/i,iOS:/iPhone|iPad|iPod/i},i=function(){for(var e in n)if(navigator.userAgent.match(n[e]))return e;return""}(),o=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},a={key:null,timer:null,sd:null,data:null,timeout:2500,apiURL:"{origin}/sdk/deeplink/param?key={key}&system_type=JS&project={project}",init:function(){if(this.sd)return this.log("deeplink已经初始化"),!1;if(o(sensorsDataAnalytic201505)&&(this.sd=sensorsDataAnalytic201505),this.log("init()"),null===this.sd)return this.log("神策JS SDK未成功引入"),!1;var e={};if(arguments.length>0&&(1===arguments.length&&o(arguments[0])?e=arguments[0]:arguments.length>=2&&o(arguments[1])&&(e=arguments[1])),!n.hasOwnProperty(i))return this.log("不支持当前系统，目前只支持Android和iOS"),!1;if(o(e)&&this.sd._.isNumber(e.timeout)&&e.timeout>=2500&&(this.timeout=e.timeout),!this.sd.para.server_url)return this.log("神策JS SDK配置项server_url未正确配置"),!1;var t,r,s={origin:(r=(t=this.sd)._.URL(t.para.server_url)).origin,project:r.searchParams.get("project")||"default"};this.apiURL=this.apiURL.replace("{origin}",s.origin).replace("{project}",s.project);var c=this.sd._.URL(window.location.href).searchParams.get("deeplink");if(!c)return this.log("当前页面缺少deeplink参数"),!1;var u=(c=window.decodeURIComponent(c)).match(/\/sd\/(\w+)\/(\w+)$/);if(!u)return this.log("当前页面的deeplink参数无效"),!1;this.key=u[2],this.apiURL=this.apiURL.replace("{key}",window.encodeURIComponent(u[2])),this.sd._.ajax({url:this.apiURL,type:"GET",cors:!0,credentials:!1,success:function(e){if(e.errorMsg)return a.log("API报错："+e.errorMsg),!1;a.data=e,a.log("API查询成功，数据："+JSON.stringify(e,null,"  ")),this.data.app_key&&(this.data.android_info&&this.data.android_info.url_schemes&&(this.data.android_info.url_schemes+="://sensorsdata/sd/"+this.data.app_key+"/"+this.key),this.data.ios_info&&this.data.ios_info.url_schemes&&(this.data.ios_info.url_schemes+="://sensorsdata/sd/"+this.data.app_key+"/"+this.key))}.bind(this),error:function(){a.log("API查询出错")}}),this.addListeners()},openDeepLink:function(){if(this.log("openDeeplink()"),!this.data)return this.log("没有Deep link数据!"),!1;if("iOS"===i){this.log("当前系统是iOS");var t=this.sd&&this.sd._&&this.sd._.getIOSVersion()>=9&&this.data.ios_info.ios_wake_url?this.data.ios_info.ios_wake_url:this.data.ios_info.url_schemes;this.log("唤起APP的地址："+t),n=this,o=t,a=this.data.ios_info.download_url,n.log("尝试唤起 iOS app:"+o),window.location.href=o,n.timer=setTimeout((function(){if(r())return n.log("The page is hidden, stop navigating to download page"),!1;n.log("App可能未安装，跳转到下载地址"),window.location.href=a}),n.timeout),n.log("new timer:"+n.timer)}else this.log("当前系统是 android"),function(t,n,i){t.log("尝试唤起 android app");var o=n;t.log("唤起APP的地址："+o),window.location=o,t.timer=setTimeout((function(){var n=r();if(t.log("hide:"+e+":"+document[e]),n)return t.log("The page is hidden, stop navigating to download page"),!1;t.log("App可能未安装，跳转到下载地址"),window.location=i}),t.timeout)}(this,this.data.android_info.url_schemes,this.data.android_info.download_url);var n,o,a},log:function(e){this.sd&&this.sd.log(e)},addListeners:function(){var e=t().visibilityChange;e&&document.addEventListener(e,function(){clearTimeout(this.timer),this.log("visibilitychange, clear timeout:"+this.timer)}.bind(this),!1),window.addEventListener("pagehide",function(){this.log("page hide, clear timeout:"+this.timer),clearTimeout(this.timer)}.bind(this),!1)}};return o(window.SensorsDataWebJSSDKPlugin)?(window.SensorsDataWebJSSDKPlugin.Deeplink=window.SensorsDataWebJSSDKPlugin.Deeplink||a,window.SensorsDataWebJSSDKPlugin.deeplink=window.SensorsDataWebJSSDKPlugin.deeplink||a):window.SensorsDataWebJSSDKPlugin={Deeplink:a,deeplink:a},a}(),i.modules.Pageleave=function(){function e(){this.sd=null,this.start_time=+new Date,this.page_show_status=!0,this.page_hidden_status=!1,this._={},this.timer=null,this.current_page_url=document.referrer,this.url=location.href,this.option={},this.heartbeat_interval_time=5e3,this.heartbeat_interval_timer=null,this.page_id=null,this.storage_name="sawebjssdkpageleave"}e.prototype.init=function(e,t){if(e){if(this.sd=e,this._=this.sd._,t){this.option=t;var r=t.heartbeat_interval_time;r&&(this._.isNumber(r)||this._.isNumber(1*r))&&1*r>0&&(this.heartbeat_interval_time=1e3*r)}this.page_id=Number(String(this._.getRandom()).slice(2,5)+String(this._.getRandom()).slice(2,4)+String((new Date).getTime()).slice(-4)),this.addEventListener(),!0===document.hidden?this.page_show_status=!1:this.addHeartBeatInterval(),this.log("PageLeave初始化完毕")}else this.log("神策JS SDK未成功引入")},e.prototype.log=function(e){this.sd&&this.sd.log(e)},e.prototype.refreshPageEndTimer=function(){var e=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((function(){e.page_hidden_status=!1}),5e3)},e.prototype.hiddenStatusHandler=function(){clearTimeout(this.timer),this.timer=null,this.page_hidden_status=!1},e.prototype.pageStartHandler=function(){this.start_time=+new Date,1==!document.hidden?this.page_show_status=!0:this.page_show_status=!1,this.url=location.href},e.prototype.pageEndHandler=function(){if(!0!==this.page_hidden_status){var e=this.getPageLeaveProperties();!1===this.page_show_status&&delete e.event_duration,this.page_show_status=!1,this.page_hidden_status=!0,this.isCollectUrl(this.url)&&this.sd.track("$WebPageLeave",e),this.refreshPageEndTimer(),this.delHeartBeatData()}},e.prototype.addEventListener=function(){this.addPageStartListener(),this.addPageSwitchListener(),this.addSinglePageListener(),this.addPageEndListener()},e.prototype.addPageStartListener=function(){var e=this;"onpageshow"in window&&this._.addEvent(window,"pageshow",(function(){e.pageStartHandler(),e.hiddenStatusHandler()}))},e.prototype.isCollectUrl=function(e){return"function"!=typeof this.option.isCollectUrl||"string"!=typeof e||""===e||this.option.isCollectUrl(e)},e.prototype.addSinglePageListener=function(){var e=this;this.sd.ee&&this.sd.ee.spa.prepend("switch",(function(t){t!==location.href&&(e.url=t,e.pageEndHandler(),e.stopHeartBeatInterval(),e.current_page_url=e.url,e.pageStartHandler(),e.hiddenStatusHandler(),e.startHeartBeatInterval())}))},e.prototype.addPageEndListener=function(){var e=this;this._.each(["pagehide","beforeunload","unload"],(function(t){"on"+t in window&&e._.addEvent(window,t,(function(){e.pageEndHandler(),e.stopHeartBeatInterval()}))}))},e.prototype.addPageSwitchListener=function(){var e=this;this._.listenPageState({visible:function(){e.pageStartHandler(),e.hiddenStatusHandler(),e.startHeartBeatInterval()},hidden:function(){e.url=location.href,e.pageEndHandler(),e.stopHeartBeatInterval()}})},e.prototype.addHeartBeatInterval=function(){this._.localStorage.isSupport()&&this.startHeartBeatInterval()},e.prototype.startHeartBeatInterval=function(){var e=this;this.heartbeat_interval_timer&&this.stopHeartBeatInterval();var t=!0;this.isCollectUrl(this.url)||(t=!1),this.heartbeat_interval_timer=setInterval((function(){t&&e.saveHeartBeatData()}),this.heartbeat_interval_time),t&&this.saveHeartBeatData("is_first_heartbeat"),this.reissueHeartBeatData()},e.prototype.stopHeartBeatInterval=function(){clearInterval(this.heartbeat_interval_timer),this.heartbeat_interval_timer=null},e.prototype.saveHeartBeatData=function(e){var t=this.getPageLeaveProperties();t.$time=new Date,"is_first_heartbeat"===e&&(t.event_duration=3.14);var r=this.sd.kit.buildData({type:"track",event:"$WebPageLeave",properties:t});r.heartbeat_interval_time=this.heartbeat_interval_time,this.sd.store.saveObjectVal(this.storage_name+"-"+this.page_id,r)},e.prototype.delHeartBeatData=function(e){this._.localStorage.remove(e||this.storage_name+"-"+this.page_id)},e.prototype.reissueHeartBeatData=function(){for(var e=window.localStorage.length-1;e>=0;e--){var t=window.localStorage.key(e);if(t&&t!==this.storage_name+"-"+this.page_id&&0===t.indexOf(this.storage_name+"-")){var r=this.sd.store.readObjectVal(t);this._.isObject(r)&&1*new Date-r.time>r.heartbeat_interval_time+5e3&&(delete r.heartbeat_interval_time,this.sd.kit.sendData(r),this.delHeartBeatData(t))}}},e.prototype.getPageLeaveProperties=function(){var e=(+new Date-this.start_time)/1e3;(isNaN(e)||e<0)&&(e=0),e=Number(e.toFixed(3));var t=this._.getReferrer(this.current_page_url),r=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body&&document.body.scrollTop||0;r=Math.round(r)||0;var n={$title:document.title,$url:this._.getURL(this.url),$url_path:location.pathname,$referrer_host:t?this._.getHostname(t):"",$referrer:t,$viewport_position:r};return 0!==e&&(n.event_duration=e),this._.extend(n,this.option.custom_props)};var t=new e;return window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.PageLeave=window.SensorsDataWebJSSDKPlugin.PageLeave||t:window.SensorsDataWebJSSDKPlugin={PageLeave:t},t}(),i.modules.Pageload=function(){var e={init:function(e){function t(){var r=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance,n=0,i={$url_path:location.pathname,$referrer:e._.getReferrer(null,!0)};if(r&&r.timing){var o=r.timing;0===o.fetchStart||0===o.domContentLoadedEventEnd?e.log("performance 数据获取异常"):n=o.domContentLoadedEventEnd-o.fetchStart,function(t,r){if(t.getEntries&&"function"==typeof t.getEntries){for(var n=t.getEntries(),i=null,o=0;o<n.length;o++)"transferSize"in n[o]&&(i+=n[o].transferSize);e._.isNumber(i)&&i>=0&&i<10737418240&&(r.$page_resource_size=Number((i/1024).toFixed(3)))}}(r,i)}else e.log("浏览器未支持 performance API.");n>0&&(i.event_duration=Number((n/1e3).toFixed(3))),e.track("$WebPageLoad",i),window.removeEventListener?window.removeEventListener("load",t):window.detachEvent&&window.detachEvent("onload",t)}"complete"==document.readyState?t():window.addEventListener?window.addEventListener("load",t):window.attachEvent&&window.attachEvent("onload",t)}};return window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.PageLoad=window.SensorsDataWebJSSDKPlugin.PageLoad||e:window.SensorsDataWebJSSDKPlugin={PageLoad:e},e}(),i.modules.RegisterPropertyPageHeight=function(){var e,t,r=window.console&&window.console.log||function(){};function n(n){try{if("$pageview"!==n.event&&(!n.type||"profile"!==n.type.slice(0,7))){var i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,o=document.documentElement.scrollHeight||0,a={$page_height:Math.max(i,o)||0};n.properties=e._.extend(n.properties||{},a)}}catch(e){r("页面高度获取异常。")}return t.call(e.kit,n)}var i={init:function(i){r=(e=i)&&e.log||r,i&&i.kit&&i.kit.buildData?(t=e.kit.buildData,e.kit.buildData=n,r("RegisterPropertyPageHeight 插件初始化完成")):r("RegisterPropertyPageHeight 插件初始化失败,当前主sdk不支持 RegisterPropertyPageHeight 插件，请升级主sdk")}};return window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.RegisterPropertyPageHeight=window.SensorsDataWebJSSDKPlugin.RegisterPropertyPageHeight||i:window.SensorsDataWebJSSDKPlugin={RegisterPropertyPageHeight:i},i}(),function(){var e={getPart:function(e){var t=this.option.length;if(t)for(var r=0;r<t;r++)if(e.indexOf(this.option[r].part_url)>-1)return!0;return!1},getPartHash:function(e){var t=this.option.length;if(t)for(var r=0;r<t;r++)if(e.indexOf(this.option[r].part_url)>-1)return this.option[r].after_hash;return!1},getCurrenId:function(){var e=this.store.getDistinctId()||"",t=this.store.getFirstId()||"";return this._.urlSafeBase64&&this._.urlSafeBase64.encode?e=e?this._.urlSafeBase64.trim(this._.urlSafeBase64.encode(this._.base64Encode(e))):"":this._.rot13obfs&&(e=e?this._.rot13obfs(e):""),encodeURIComponent(t?"f"+e:"d"+e)},rewriteUrl:function(e,t){var r=/([^?#]+)(\?[^#]*)?(#.*)?/.exec(e),n="";if(r){var i,o=r[1]||"",a=r[2]||"",s=r[3]||"";return this.getPartHash(e)?(i=s.indexOf("_sasdk"),n=s.indexOf("?")>-1?i>-1?o+a+"#"+s.substring(1,i)+"_sasdk="+this.getCurrenId():o+a+"#"+s.substring(1)+"&_sasdk="+this.getCurrenId():o+a+"#"+s.substring(1)+"?_sasdk="+this.getCurrenId()):(i=a.indexOf("_sasdk"),n=/^\?(\w)+/.test(a)?i>-1?o+"?"+a.substring(1,i)+"_sasdk="+this.getCurrenId()+s:o+"?"+a.substring(1)+"&_sasdk="+this.getCurrenId()+s:o+"?"+a.substring(1)+"_sasdk="+this.getCurrenId()+s),t&&(t.href=n),n}},getUrlId:function(){var e=location.href.match(/_sasdk=([aufd][^\?\#\&\=]+)/);if(this._.isArray(e)&&e[1]){var t=decodeURIComponent(e[1]);return!t||"f"!==t.substring(0,1)&&"d"!==t.substring(0,1)||(this._.urlSafeBase64&&this._.urlSafeBase64.isUrlSafeBase64&&this._.urlSafeBase64.isUrlSafeBase64(t)?t=t.substring(0,1)+this._.base64Decode(this._.urlSafeBase64.decode(t.substring(1))):this._.rot13defs&&(t=t.substring(0,1)+this._.rot13defs(t.substring(1)))),t}return""},setRefferId:function(){var e=this.store.getDistinctId(),t=this.getUrlId();if(""===t)return!1;var r="a"===t.substring(0,1)||"d"===t.substring(0,1);if((t=t.substring(1))===e)return!1;t&&r&&this.store.getFirstId()&&(this.sd.identify(t,!0),this.sd.saEvent.send({original_id:t,distinct_id:e,type:"track_signup",event:"$SignUp",properties:{}},null)),t&&r&&!this.store.getFirstId()&&this.sd.identify(t,!0),!t||r||this.store.getFirstId()||this.sd.login(t)},addListen:function(){var e=this,t=function(t){var r,n,i=t.target,o=i.tagName.toLowerCase(),a=i.parentNode;if("a"===o&&i.href||a&&a.tagName&&"a"===a.tagName.toLowerCase()&&a.href){"a"===o&&i.href?(r=i.href,n=i):(r=a.href,n=a);var s=e._.URL(r).protocol;"http:"!==s&&"https:"!==s||e.getPart(r)&&e.rewriteUrl(r,n)}};e._.addEvent(document,"mousedown",t),window.PointerEvent&&"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>=0&&e._.addEvent(document,"pointerdown",t)},init:function(e,t){this.sd=e,this._=e._,this.store=e.store,this.para=e.para,this._.isObject(t)&&this._.isArray(t.linker)&&t.linker.length>0?(this.setRefferId(),this.addListen(),this.option=t.linker,this.option=function(t){for(var r=t.length,n=[],i=0;i<r;i++)/[A-Za-z0-9]+\./.test(t[i].part_url)&&"[object Boolean]"==Object.prototype.toString.call(t[i].after_hash)?n.push(t[i]):e.log("linker 配置的第 "+(i+1)+" 项格式不正确，请检查参数格式！");return n}(this.option)):e.log("请配置打通域名参数！")}};window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.SiteLinker=window.SensorsDataWebJSSDKPlugin.SiteLinker||e:window.SensorsDataWebJSSDKPlugin={SiteLinker:e}}(),"string"==typeof window.sensorsDataAnalytic201505?(i.para=window[sensorsDataAnalytic201505].para,i._q=window[sensorsDataAnalytic201505]._q,window[sensorsDataAnalytic201505]=i,window.sensorsDataAnalytic201505=i,i.init()):void 0===window.sensorsDataAnalytic201505?window.sensorsDataAnalytic201505=i:hr=window.sensorsDataAnalytic201505}catch(e){if("object"==typeof console&&console.log)try{console.log(e)}catch(_){i.log(_)}}const gr=hr;var _r,mr=r(32),vr=r(162),yr=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){_r=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,vr.HK)(this)||this;return _r.apply(r,e)}},e.id="FunctionToString",e}(),br=r(565),wr=r(217),Sr=r(528),kr=r(706),Pr=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],xr=function(){function e(t){void 0===t&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(t,r){t((function(t){var n=r();if(n){var i=n.getIntegration(e);if(i){var o=n.getClient(),a=o?o.getOptions():{},s=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),{allowUrls:(0,mr.fl)(e.whitelistUrls||[],e.allowUrls||[],t.whitelistUrls||[],t.allowUrls||[]),denyUrls:(0,mr.fl)(e.blacklistUrls||[],e.denyUrls||[],t.blacklistUrls||[],t.denyUrls||[]),ignoreErrors:(0,mr.fl)(e.ignoreErrors||[],t.ignoreErrors||[],Pr),ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(i._options,a);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?((0,br.c)()&&wr.kg.warn("Event dropped due to being internal Sentry Error.\nEvent: "+(0,Sr.jH)(e)),!0):function(e,t){return!(!t||!t.length)&&function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},r=t.type,n=void 0===r?"":r,i=t.value,o=void 0===i?"":i;return[""+o,n+": "+o]}catch(t){return(0,br.c)()&&wr.kg.error("Cannot extract message for event "+(0,Sr.jH)(e)),[]}return[]}(e).some((function(e){return t.some((function(t){return(0,kr.zC)(e,t)}))}))}(e,t.ignoreErrors)?((0,br.c)()&&wr.kg.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+(0,Sr.jH)(e)),!0):function(e,t){if(!t||!t.length)return!1;var r=Er(e);return!!r&&t.some((function(e){return(0,kr.zC)(r,e)}))}(e,t.denyUrls)?((0,br.c)()&&wr.kg.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+(0,Sr.jH)(e)+".\nUrl: "+Er(e)),!0):!function(e,t){if(!t||!t.length)return!0;var r=Er(e);return!r||t.some((function(e){return(0,kr.zC)(r,e)}))}(e,t.allowUrls)&&((0,br.c)()&&wr.kg.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+(0,Sr.jH)(e)+".\nUrl: "+Er(e)),!0)}(t,s)?null:t}}return t}))},e.id="InboundFilters",e}();function Or(e){void 0===e&&(e=[]);for(var t=e.length-1;t>=0;t--){var r=e[t];if(r&&"<anonymous>"!==r.filename&&"[native code]"!==r.filename)return r.filename||null}return null}function Er(e){try{if(e.stacktrace)return Or(e.stacktrace.frames);var t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?Or(t):null}catch(t){return(0,br.c)()&&wr.kg.error("Cannot extract url for event "+(0,Sr.jH)(e)),null}}var Tr,jr=r(158),Ar=r(486);!function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(Tr||(Tr={}));var Dr=r(165),Cr=r(674),Ir=r(786),Nr=r(60);function Rr(e,t,r){void 0===t&&(t=1/0),void 0===r&&(r=1/0);try{return $r("",e,t,r)}catch(e){return{ERROR:"**non-serializable** ("+e+")"}}}function Lr(e,t,r){void 0===t&&(t=3),void 0===r&&(r=102400);var n,i=Rr(e,t);return n=i,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(n))>r?Lr(e,t-1,r):i}function $r(e,t,n,i,o){var a,s;void 0===n&&(n=1/0),void 0===i&&(i=1/0),void 0===o&&(a="function"==typeof WeakSet,s=a?new WeakSet:[],o=[function(e){if(a)return!!s.has(e)||(s.add(e),!1);for(var t=0;t<s.length;t++)if(s[t]===e)return!0;return s.push(e),!1},function(e){if(a)s.delete(e);else for(var t=0;t<s.length;t++)if(s[t]===e){s.splice(t,1);break}}]);var c=(0,mr.CR)(o,2),u=c[0],l=c[1],p=t;if(p&&"function"==typeof p.toJSON)try{return p.toJSON()}catch(e){}if(null===t||["number","boolean","string"].includes(typeof t)&&!(0,Cr.i2)(t))return t;var d=function(e,t){try{return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":void 0!==r.g&&t===r.g?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":(0,Cr.Cy)(t)?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+(0,Nr.$P)(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":"[object "+Object.getPrototypeOf(t).constructor.name+"]"}catch(e){return"**non-serializable** ("+e+")"}}(e,t);if(!d.startsWith("[object "))return d;if(0===n)return d.replace("object ","");if(u(t))return"[Circular ~]";var f=Array.isArray(t)?[]:{},h=0,g=(0,Cr.VZ)(t)||(0,Cr.cO)(t)?(0,vr.Sh)(t):t;for(var _ in g)if(Object.prototype.hasOwnProperty.call(g,_)){if(h>=i){f[_]="[MaxProperties ~]";break}var m=g[_];f[_]=$r(_,m,n-1,i,o),h+=1}return l(t),f}var Hr=r(362),Ur="?";function Mr(e,t,r,n){var i={filename:e,function:t,in_app:!0};return void 0!==r&&(i.lineno=r),void 0!==n&&(i.colno=n),i}var Br=/^\s*at (?:(.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,qr=/\((\S*)(?::(\d+))(?::(\d+))\)/,Jr=[30,function(e){var t=Br.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){var r=qr.exec(t[2]);r&&(t[2]=r[1],t[3]=r[2],t[4]=r[3])}var n=(0,mr.CR)(Qr(t[1]||Ur,t[2]),2),i=n[0];return Mr(n[1],i,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],Fr=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Wr=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Kr=[50,function(e){var t,r=Fr.exec(e);if(r){if(r[3]&&r[3].indexOf(" > eval")>-1){var n=Wr.exec(r[3]);n&&(r[1]=r[1]||"eval",r[3]=n[1],r[4]=n[2],r[5]="")}var i=r[3],o=r[1]||Ur;return o=(t=(0,mr.CR)(Qr(o,i),2))[0],Mr(i=t[1],o,r[4]?+r[4]:void 0,r[5]?+r[5]:void 0)}}],zr=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Vr=[40,function(e){var t=zr.exec(e);return t?Mr(t[2],t[1]||Ur,+t[3],t[4]?+t[4]:void 0):void 0}],Xr=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Gr=[10,function(e){var t=Xr.exec(e);return t?Mr(t[2],t[3]||Ur,+t[1]):void 0}],Yr=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Zr=[20,function(e){var t=Yr.exec(e);return t?Mr(t[5],t[3]||t[4]||Ur,+t[1],+t[2]):void 0}],Qr=function(e,t){var r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:Ur,r?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]};function en(e){var t=rn(e),r={type:e&&e.name,value:on(e)};return t.length&&(r.stacktrace={frames:t}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function tn(e){return{exception:{values:[en(e)]}}}function rn(e){var t=e.stacktrace||e.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(nn.test(e.message))return 1}return 0}(e);try{return(0,Nr.pE)(Gr,Zr,Jr,Vr,Kr)(t,r)}catch(e){}return[]}var nn=/Minified React error #\d+;/i;function on(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function an(e,t,r,n){var i;if((0,Cr.VW)(e)&&e.error)return tn(e.error);if((0,Cr.TX)(e)||(0,Cr.fm)(e)){var o=e;if("stack"in e)i=tn(e);else{var a=o.name||((0,Cr.TX)(o)?"DOMError":"DOMException"),s=o.message?a+": "+o.message:a;i=sn(s,t,r),(0,Sr.Db)(i,s)}return"code"in o&&(i.tags=(0,mr.pi)((0,mr.pi)({},i.tags),{"DOMException.code":""+o.code})),i}return(0,Cr.VZ)(e)?tn(e):(0,Cr.PO)(e)||(0,Cr.cO)(e)?(i=function(e,t,r){var n={exception:{values:[{type:(0,Cr.cO)(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:"Non-Error "+(r?"promise rejection":"exception")+" captured with keys: "+(0,vr.zf)(e)}]},extra:{__serialized__:Lr(e)}};if(t){var i=rn(t);i.length&&(n.stacktrace={frames:i})}return n}(e,t,n),(0,Sr.EG)(i,{synthetic:!0}),i):(i=sn(e,t,r),(0,Sr.Db)(i,""+e,void 0),(0,Sr.EG)(i,{synthetic:!0}),i)}function sn(e,t,r){var n={message:e};if(r&&t){var i=rn(t);i.length&&(n.stacktrace={frames:i})}return n}function cn(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=(0,Ar.Gd)();if(n&&n[e])return n[e].apply(n,(0,mr.fl)(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function un(e,t){return cn("captureException",e,{captureContext:t,originalException:e,syntheticException:new Error("Sentry syntheticException")})}function ln(e){cn("withScope",e)}var pn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r]);return e}),dn=function(e){function t(t){var r=this.constructor,n=e.call(this,t)||this;return n.message=t,n.name=r.prototype.constructor.name,pn(n,r.prototype),n}return(0,mr.ZT)(t,e),t}(Error),fn=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function hn(e,t){void 0===t&&(t=!1);var r=e.host,n=e.path,i=e.pass,o=e.port,a=e.projectId;return e.protocol+"://"+e.publicKey+(t&&i?":"+i:"")+"@"+r+(o?":"+o:"")+"/"+(n?n+"/":n)+a}function gn(e){return"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),{user:e.publicKey||"",protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function _n(e){var t="string"==typeof e?function(e){var t=fn.exec(e);if(!t)throw new dn("Invalid Sentry Dsn: "+e);var r=(0,mr.CR)(t.slice(1),6),n=r[0],i=r[1],o=r[2],a=void 0===o?"":o,s=r[3],c=r[4],u=void 0===c?"":c,l="",p=r[5],d=p.split("/");if(d.length>1&&(l=d.slice(0,-1).join("/"),p=d.pop()),p){var f=p.match(/^\d+/);f&&(p=f[0])}return gn({host:s,pass:a,path:l,projectId:p,port:u,protocol:n,publicKey:i})}(e):gn(e);return function(e){if((0,br.c)()){var t=e.port,r=e.projectId,n=e.protocol;if(["protocol","publicKey","host","projectId"].forEach((function(t){if(!e[t])throw new dn("Invalid Sentry Dsn: "+t+" missing")})),!r.match(/^\d+$/))throw new dn("Invalid Sentry Dsn: Invalid projectId "+r);if(!function(e){return"http"===e||"https"===e}(n))throw new dn("Invalid Sentry Dsn: Invalid protocol "+n);if(t&&isNaN(parseInt(t,10)))throw new dn("Invalid Sentry Dsn: Invalid port "+t)}}(t),t}function mn(e,t,r){return{initDsn:e,metadata:t||{},dsn:_n(e),tunnel:r}}function vn(e){var t=e.protocol?e.protocol+":":"",r=e.port?":"+e.port:"";return t+"//"+e.host+r+(e.path?"/"+e.path:"")+"/api/"}function yn(e,t){return""+vn(e)+e.projectId+"/"+t+"/"}function bn(e){return(0,vr._j)({sentry_key:e.publicKey,sentry_version:"7"})}function wn(e){return yn(e,"store")}function Sn(e){return wn(e)+"?"+bn(e)}function kn(e,t){return t||function(e){return yn(e,"envelope")}(e)+"?"+bn(e)}!function(){function e(e,t,r){void 0===t&&(t={}),this.dsn=e,this._dsnObject=_n(e),this.metadata=t,this._tunnel=r}e.prototype.getDsn=function(){return this._dsnObject},e.prototype.forceEnvelope=function(){return!!this._tunnel},e.prototype.getBaseApiEndpoint=function(){return vn(this._dsnObject)},e.prototype.getStoreEndpoint=function(){return wn(this._dsnObject)},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return Sn(this._dsnObject)},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return kn(this._dsnObject,this._tunnel)}}();var Pn=(0,jr.R)(),xn=0;function On(){return xn>0}function En(){xn+=1,setTimeout((function(){xn-=1}))}function Tn(e,t,r){if(void 0===t&&(t={}),"function"!=typeof e)return e;try{var n=e.__sentry_wrapped__;if(n)return n;if((0,vr.HK)(e))return e}catch(t){return e}var i=function(){var n=Array.prototype.slice.call(arguments);try{r&&"function"==typeof r&&r.apply(this,arguments);var i=n.map((function(e){return Tn(e,t)}));return e.apply(this,i)}catch(e){throw En(),ln((function(r){r.addEventProcessor((function(e){return t.mechanism&&((0,Sr.Db)(e,void 0,void 0),(0,Sr.EG)(e,t.mechanism)),e.extra=(0,mr.pi)((0,mr.pi)({},e.extra),{arguments:n}),e})),un(e)})),e}};try{for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}catch(e){}(0,vr.$Q)(i,e),(0,vr.xp)(e,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get:function(){return e.name}})}catch(e){}return i}var jn=function(){function e(t){this.name=e.id,this._installFunc={onerror:An,onunhandledrejection:Dn},this._options=(0,mr.pi)({onerror:!0,onunhandledrejection:!0},t)}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50;var e,t=this._options;for(var r in t){var n=this._installFunc[r];n&&t[r]&&(e=r,(0,br.c)()&&wr.kg.log("Global Handler attached: "+e),n(),this._installFunc[r]=void 0)}},e.id="GlobalHandlers",e}();function An(){(0,Dr.o)("error",(function(e){var t=(0,mr.CR)(Nn(),2),r=t[0],n=t[1];if(r.getIntegration(jn)){var i=e.msg,o=e.url,a=e.line,s=e.column,c=e.error;if(!(On()||c&&c.__sentry_own_request__)){var u=void 0===c&&(0,Cr.HD)(i)?function(e,t,r,n){var i=(0,Cr.VW)(e)?e.message:e,o="Error",a=i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);return a&&(o=a[1],i=a[2]),Cn({exception:{values:[{type:o,value:i}]}},t,r,n)}(i,o,a,s):Cn(an(c||i,void 0,n,!1),o,a,s);u.level=Tr.Error,In(r,c,u,"onerror")}}}))}function Dn(){(0,Dr.o)("unhandledrejection",(function(e){var t=(0,mr.CR)(Nn(),2),r=t[0],n=t[1];if(r.getIntegration(jn)){var i=e;try{"reason"in e?i=e.reason:"detail"in e&&"reason"in e.detail&&(i=e.detail.reason)}catch(e){}if(On()||i&&i.__sentry_own_request__)return!0;var o=(0,Cr.pt)(i)?{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(i)}]}}:an(i,void 0,n,!0);o.level=Tr.Error,In(r,i,o,"onunhandledrejection")}}))}function Cn(e,t,r,n){var i=e.exception=e.exception||{},o=i.values=i.values||[],a=o[0]=o[0]||{},s=a.stacktrace=a.stacktrace||{},c=s.frames=s.frames||[],u=isNaN(parseInt(n,10))?void 0:n,l=isNaN(parseInt(r,10))?void 0:r,p=(0,Cr.HD)(t)&&t.length>0?t:(0,Ir.l)();return 0===c.length&&c.push({colno:u,filename:p,function:"?",in_app:!0,lineno:l}),e}function In(e,t,r,n){(0,Sr.EG)(r,{handled:!1,type:n}),e.captureEvent(r,{originalException:t})}function Nn(){var e=(0,Ar.Gd)(),t=e.getClient();return[e,t&&t.getOptions().attachStacktrace]}var Rn=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ln=function(){function e(t){this.name=e.id,this._options=(0,mr.pi)({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}return e.prototype.setupOnce=function(){var e=(0,jr.R)();this._options.setTimeout&&(0,vr.hl)(e,"setTimeout",$n),this._options.setInterval&&(0,vr.hl)(e,"setInterval",$n),this._options.requestAnimationFrame&&(0,vr.hl)(e,"requestAnimationFrame",Hn),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&(0,vr.hl)(XMLHttpRequest.prototype,"send",Un);var t=this._options.eventTarget;t&&(Array.isArray(t)?t:Rn).forEach(Mn)},e.id="TryCatch",e}();function $n(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0];return t[0]=Tn(n,{mechanism:{data:{function:(0,Nr.$P)(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function Hn(e){return function(t){return e.apply(this,[Tn(t,{mechanism:{data:{function:"requestAnimationFrame",handler:(0,Nr.$P)(e)},handled:!0,type:"instrument"}})])}}function Un(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this,i=["onload","onerror","onprogress","onreadystatechange"];return i.forEach((function(e){e in n&&"function"==typeof n[e]&&(0,vr.hl)(n,e,(function(t){var r={mechanism:{data:{function:e,handler:(0,Nr.$P)(t)},handled:!0,type:"instrument"}},n=(0,vr.HK)(t);return n&&(r.mechanism.data.handler=(0,Nr.$P)(n)),Tn(t,r)}))})),e.apply(this,t)}}function Mn(e){var t=(0,jr.R)(),r=t[e]&&t[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&((0,vr.hl)(r,"addEventListener",(function(t){return function(r,n,i){try{"function"==typeof n.handleEvent&&(n.handleEvent=Tn(n.handleEvent.bind(n),{mechanism:{data:{function:"handleEvent",handler:(0,Nr.$P)(n),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.apply(this,[r,Tn(n,{mechanism:{data:{function:"addEventListener",handler:(0,Nr.$P)(n),target:e},handled:!0,type:"instrument"}}),i])}})),(0,vr.hl)(r,"removeEventListener",(function(e){return function(t,r,n){var i=r;try{var o=i&&i.__sentry_wrapped__;o&&e.call(this,t,o,n)}catch(e){}return e.call(this,t,i,n)}})))}var Bn=["fatal","error","warning","log","info","debug","critical"];function qn(e){return"warn"===e?Tr.Warning:function(e){return-1!==Bn.indexOf(e)}(e)?e:Tr.Log}var Jn=function(){function e(t){this.name=e.id,this._options=(0,mr.pi)({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}return e.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&(0,Ar.Gd)().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:(0,Sr.jH)(e)},{event:e})},e.prototype.setupOnce=function(){var e;this._options.console&&(0,Dr.o)("console",Fn),this._options.dom&&(0,Dr.o)("dom",(e=this._options.dom,function(t){var r,n="object"==typeof e?e.serializeAttribute:void 0;"string"==typeof n&&(n=[n]);try{r=t.event.target?(0,Ir.R)(t.event.target,n):(0,Ir.R)(t.event,n)}catch(e){r="<unknown>"}0!==r.length&&(0,Ar.Gd)().addBreadcrumb({category:"ui."+t.name,message:r},{event:t.event,name:t.name,global:t.global})})),this._options.xhr&&(0,Dr.o)("xhr",Wn),this._options.fetch&&(0,Dr.o)("fetch",Kn),this._options.history&&(0,Dr.o)("history",zn)},e.id="Breadcrumbs",e}();function Fn(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:qn(e.level),message:(0,kr.nK)(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+((0,kr.nK)(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}(0,Ar.Gd)().addBreadcrumb(t,{input:e.args,level:e.level})}function Wn(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},r=t.method,n=t.url,i=t.status_code,o=t.body;(0,Ar.Gd)().addBreadcrumb({category:"xhr",data:{method:r,url:n,status_code:i},type:"http"},{xhr:e.xhr,input:o})}}function Kn(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?(0,Ar.Gd)().addBreadcrumb({category:"fetch",data:e.fetchData,level:Tr.Error,type:"http"},{data:e.error,input:e.args}):(0,Ar.Gd)().addBreadcrumb({category:"fetch",data:(0,mr.pi)((0,mr.pi)({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))}function zn(e){var t=(0,jr.R)(),r=e.from,n=e.to,i=(0,Sr.en)(t.location.href),o=(0,Sr.en)(r),a=(0,Sr.en)(n);o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(n=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),(0,Ar.Gd)().addBreadcrumb({category:"navigation",data:{from:r,to:n}})}var Vn=r(344),Xn=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._key=t.key||"cause",this._limit=t.limit||5}return e.prototype.setupOnce=function(){(0,Vn.c)((function(t,r){var n=(0,Ar.Gd)().getIntegration(e);return n?function(e,t,r,n){if(!(r.exception&&r.exception.values&&n&&(0,Cr.V9)(n.originalException,Error)))return r;var i=Gn(t,n.originalException,e);return r.exception.values=(0,mr.fl)(i,r.exception.values),r}(n._key,n._limit,t,r):t}))},e.id="LinkedErrors",e}();function Gn(e,t,r,n){if(void 0===n&&(n=[]),!(0,Cr.V9)(t[r],Error)||n.length+1>=e)return n;var i=en(t[r]);return Gn(e,t[r],r,(0,mr.fl)([i],n))}var Yn=(0,jr.R)(),Zn=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){(0,Vn.c)((function(t){if((0,Ar.Gd)().getIntegration(e)){if(!Yn.navigator&&!Yn.location&&!Yn.document)return t;var r=t.request&&t.request.url||Yn.location&&Yn.location.href,n=(Yn.document||{}).referrer,i=(Yn.navigator||{}).userAgent,o=(0,mr.pi)((0,mr.pi)((0,mr.pi)({},t.request&&t.request.headers),n&&{Referer:n}),i&&{"User-Agent":i}),a=(0,mr.pi)((0,mr.pi)({},r&&{url:r}),{headers:o});return(0,mr.pi)((0,mr.pi)({},t),{request:a})}return t}))},e.id="UserAgent",e}(),Qn=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(t,r){t((function(t){var n=r().getIntegration(e);if(n){try{if(function(e,t){return!!t&&(!!function(e,t){var r=e.message,n=t.message;return!(!r&&!n)&&(!(r&&!n||!r&&n)&&(r===n&&(!!ti(e,t)&&!!ei(e,t))))}(e,t)||!!function(e,t){var r=ri(t),n=ri(e);return!(!r||!n)&&(r.type===n.type&&r.value===n.value&&(!!ti(e,t)&&!!ei(e,t)))}(e,t))}(t,n._previousEvent))return(0,br.c)()&&wr.kg.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){return n._previousEvent=t}return n._previousEvent=t}return t}))},e.id="Dedupe",e}();function ei(e,t){var r=ni(e),n=ni(t);if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;if(r=r,(n=n).length!==r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i],a=r[i];if(o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1}return!0}function ti(e,t){var r=e.fingerprint,n=t.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;r=r,n=n;try{return!(r.join("")!==n.join(""))}catch(e){return!1}}function ri(e){return e.exception&&e.exception.values&&e.exception.values[0]}function ni(e){var t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}else if(e.stacktrace)return e.stacktrace.frames}var ii={},oi=(0,jr.R)();oi.Sentry&&oi.Sentry.Integrations&&(ii=oi.Sentry.Integrations);var ai=(0,mr.pi)((0,mr.pi)((0,mr.pi)({},ii),e),t),si="6.19.3",ci=r(601),ui=[];function li(e){return e.reduce((function(e,t){return e.every((function(e){return t.name!==e.name}))&&e.push(t),e}),[])}var pi="Not capturing exception because it's already been captured.",di=function(){function e(e,t){this._integrations={},this._numProcessing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=_n(t.dsn))}return e.prototype.captureException=function(e,t,r){var n=this;if(!(0,Sr.YO)(e)){var i=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then((function(e){return n._captureEvent(e,t,r)})).then((function(e){i=e}))),i}(0,br.c)()&&wr.kg.log(pi)},e.prototype.captureMessage=function(e,t,r,n){var i=this,o=r&&r.event_id,a=(0,Cr.pt)(e)?this._getBackend().eventFromMessage(String(e),t,r):this._getBackend().eventFromException(e,r);return this._process(a.then((function(e){return i._captureEvent(e,r,n)})).then((function(e){o=e}))),o},e.prototype.captureEvent=function(e,t,r){if(!(t&&t.originalException&&(0,Sr.YO)(t.originalException))){var n=t&&t.event_id;return this._process(this._captureEvent(e,t,r).then((function(e){n=e}))),n}(0,br.c)()&&wr.kg.log(pi)},e.prototype.captureSession=function(e){this._isEnabled()?"string"!=typeof e.release?(0,br.c)()&&wr.kg.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1})):(0,br.c)()&&wr.kg.warn("SDK not enabled, will not capture session.")},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.getTransport=function(){return this._getBackend().getTransport()},e.prototype.flush=function(e){var t=this;return this._isClientDoneProcessing(e).then((function(r){return t.getTransport().close(e).then((function(e){return r&&e}))}))},e.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,e}))},e.prototype.setupIntegrations=function(){var e,t;this._isEnabled()&&!this._integrations.initialized&&(this._integrations=(e=this._options,t={},function(e){var t=e.defaultIntegrations&&(0,mr.fl)(e.defaultIntegrations)||[],r=e.integrations,n=(0,mr.fl)(li(t));Array.isArray(r)?n=(0,mr.fl)(n.filter((function(e){return r.every((function(t){return t.name!==e.name}))})),li(r)):"function"==typeof r&&(n=r(n),n=Array.isArray(n)?n:[n]);var i=n.map((function(e){return e.name})),o="Debug";return-1!==i.indexOf(o)&&n.push.apply(n,(0,mr.fl)(n.splice(i.indexOf(o),1))),n}(e).forEach((function(e){t[e.name]=e,function(e){-1===ui.indexOf(e.name)&&(e.setupOnce(Vn.c,Ar.Gd),ui.push(e.name),(0,br.c)()&&wr.kg.log("Integration installed: "+e.name))}(e)})),(0,vr.xp)(t,"initialized",!0),t))},e.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return(0,br.c)()&&wr.kg.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},e.prototype._updateSessionFromEvent=function(e,t){var r,n,i=!1,o=!1,a=t.exception&&t.exception.values;if(a){o=!0;try{for(var s=(0,mr.XA)(a),c=s.next();!c.done;c=s.next()){var u=c.value.mechanism;if(u&&!1===u.handled){i=!0;break}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}}var l="ok"===e.status;(l&&0===e.errors||l&&i)&&(e.update((0,mr.pi)((0,mr.pi)({},i&&{status:"crashed"}),{errors:e.errors||Number(o||i)})),this.captureSession(e))},e.prototype._sendSession=function(e){this._getBackend().sendSession(e)},e.prototype._isClientDoneProcessing=function(e){var t=this;return new Hr.cW((function(r){var n=0,i=setInterval((function(){0==t._numProcessing?(clearInterval(i),r(!0)):(n+=1,e&&n>=e&&(clearInterval(i),r(!1)))}),1)}))},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},e.prototype._prepareEvent=function(e,t,r){var n=this,i=this.getOptions(),o=i.normalizeDepth,a=void 0===o?3:o,s=i.normalizeMaxBreadth,c=void 0===s?1e3:s,u=(0,mr.pi)((0,mr.pi)({},e),{event_id:e.event_id||(r&&r.event_id?r.event_id:(0,Sr.DM)()),timestamp:e.timestamp||(0,ci.yW)()});this._applyClientOptions(u),this._applyIntegrationsMetadata(u);var l=t;r&&r.captureContext&&(l=Vn.s.clone(l).update(r.captureContext));var p=(0,Hr.WD)(u);return l&&(p=l.applyToEvent(u,r)),p.then((function(e){return e&&(e.sdkProcessingMetadata=(0,mr.pi)((0,mr.pi)({},e.sdkProcessingMetadata),{normalizeDepth:Rr(a)})),"number"==typeof a&&a>0?n._normalizeEvent(e,a,c):e}))},e.prototype._normalizeEvent=function(e,t,r){if(!e)return null;var n=(0,mr.pi)((0,mr.pi)((0,mr.pi)((0,mr.pi)((0,mr.pi)({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return(0,mr.pi)((0,mr.pi)({},e),e.data&&{data:Rr(e.data,t,r)})}))}),e.user&&{user:Rr(e.user,t,r)}),e.contexts&&{contexts:Rr(e.contexts,t,r)}),e.extra&&{extra:Rr(e.extra,t,r)});return e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace),n.sdkProcessingMetadata=(0,mr.pi)((0,mr.pi)({},n.sdkProcessingMetadata),{baseClientNormalized:!0}),n},e.prototype._applyClientOptions=function(e){var t=this.getOptions(),r=t.environment,n=t.release,i=t.dist,o=t.maxValueLength,a=void 0===o?250:o;"environment"in e||(e.environment="environment"in t?r:"production"),void 0===e.release&&void 0!==n&&(e.release=n),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=(0,kr.$G)(e.message,a));var s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=(0,kr.$G)(s.value,a));var c=e.request;c&&c.url&&(c.url=(0,kr.$G)(c.url,a))},e.prototype._applyIntegrationsMetadata=function(e){var t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=(0,mr.fl)(e.sdk.integrations||[],t))},e.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},e.prototype._captureEvent=function(e,t,r){return this._processEvent(e,t,r).then((function(e){return e.event_id}),(function(e){(0,br.c)()&&wr.kg.error(e)}))},e.prototype._processEvent=function(e,t,r){var n=this,i=this.getOptions(),o=i.beforeSend,a=i.sampleRate,s=this.getTransport();function c(e,t){s.recordLostEvent&&s.recordLostEvent(e,t)}if(!this._isEnabled())return(0,Hr.$2)(new dn("SDK not enabled, will not capture event."));var u="transaction"===e.type;return!u&&"number"==typeof a&&Math.random()>a?(c("sample_rate","event"),(0,Hr.$2)(new dn("Discarding event because it's not included in the random sample (sampling rate = "+a+")"))):this._prepareEvent(e,r,t).then((function(r){if(null===r)throw c("event_processor",e.type||"event"),new dn("An event processor returned null, will not send event.");return t&&t.data&&!0===t.data.__sentry__||u||!o?r:function(e){var t="`beforeSend` method has to return `null` or a valid event.";if((0,Cr.J8)(e))return e.then((function(e){if(!(0,Cr.PO)(e)&&null!==e)throw new dn(t);return e}),(function(e){throw new dn("beforeSend rejected with "+e)}));if(!(0,Cr.PO)(e)&&null!==e)throw new dn(t);return e}(o(r,t))})).then((function(t){if(null===t)throw c("before_send",e.type||"event"),new dn("`beforeSend` returned `null`, will not send event.");var i=r&&r.getSession&&r.getSession();return!u&&i&&n._updateSessionFromEvent(i,t),n._sendEvent(t),t})).then(null,(function(e){if(e instanceof dn)throw e;throw n.captureException(e,{data:{__sentry__:!0},originalException:e}),new dn("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},e.prototype._process=function(e){var t=this;this._numProcessing+=1,e.then((function(e){return t._numProcessing-=1,e}),(function(e){return t._numProcessing-=1,e}))},e}();function fi(e,t){return void 0===t&&(t=[]),[e,t]}function hi(e){var t=(0,mr.CR)(e,2),r=t[0],n=t[1],i=JSON.stringify(r);return n.reduce((function(e,t){var r=(0,mr.CR)(t,2),n=r[0],i=r[1],o=(0,Cr.pt)(i)?String(i):JSON.stringify(i);return e+"\n"+JSON.stringify(n)+"\n"+o}),i)}function gi(e){if(e.metadata&&e.metadata.sdk){var t=e.metadata.sdk;return{name:t.name,version:t.version}}}function _i(e,t){return t?(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=(0,mr.fl)(e.sdk.integrations||[],t.integrations||[]),e.sdk.packages=(0,mr.fl)(e.sdk.packages||[],t.packages||[]),e):e}function mi(e,t){var r=gi(t),n="aggregates"in e?"sessions":"session";return[fi((0,mr.pi)((0,mr.pi)({sent_at:(new Date).toISOString()},r&&{sdk:r}),!!t.tunnel&&{dsn:hn(t.dsn)}),[[{type:n},e]]),n]}var vi=function(){function e(){}return e.prototype.sendEvent=function(e){return(0,Hr.WD)({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:"skipped"})},e.prototype.close=function(e){return(0,Hr.WD)(!0)},e}(),yi=function(){function e(e){this._options=e,this._options.dsn||(0,br.c)()&&wr.kg.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return e.prototype.eventFromException=function(e,t){throw new dn("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(e,t,r){throw new dn("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(e){if(this._newTransport&&this._options.dsn&&this._options._experiments&&this._options._experiments.newTransport){var t=function(e,t){var r=gi(t),n=e.type||"event",i=(e.sdkProcessingMetadata||{}).transactionSampling||{},o=i.method,a=i.rate;return _i(e,t.metadata.sdk),e.tags=e.tags||{},e.extra=e.extra||{},e.sdkProcessingMetadata&&e.sdkProcessingMetadata.baseClientNormalized||(e.tags.skippedNormalization=!0,e.extra.normalizeDepth=e.sdkProcessingMetadata?e.sdkProcessingMetadata.normalizeDepth:"unset"),delete e.sdkProcessingMetadata,fi((0,mr.pi)((0,mr.pi)({event_id:e.event_id,sent_at:(new Date).toISOString()},r&&{sdk:r}),!!t.tunnel&&{dsn:hn(t.dsn)}),[[{type:n,sample_rates:[{id:o,rate:a}]},e]])}(e,mn(this._options.dsn,this._options._metadata,this._options.tunnel));this._newTransport.send(t).then(null,(function(e){(0,br.c)()&&wr.kg.error("Error while sending event:",e)}))}else this._transport.sendEvent(e).then(null,(function(e){(0,br.c)()&&wr.kg.error("Error while sending event:",e)}))},e.prototype.sendSession=function(e){if(this._transport.sendSession)if(this._newTransport&&this._options.dsn&&this._options._experiments&&this._options._experiments.newTransport){var t=mn(this._options.dsn,this._options._metadata,this._options.tunnel),r=(0,mr.CR)(mi(e,t),1)[0];this._newTransport.send(r).then(null,(function(e){(0,br.c)()&&wr.kg.error("Error while sending session:",e)}))}else this._transport.sendSession(e).then(null,(function(e){(0,br.c)()&&wr.kg.error("Error while sending session:",e)}));else(0,br.c)()&&wr.kg.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.getTransport=function(){return this._transport},e.prototype._setupTransport=function(){return new vi},e}(),bi=r(402);function wi(e){var t=[];function r(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return(0,Hr.$2)(new dn("Not adding Promise due to buffer limit reached."));var i=n();return-1===t.indexOf(i)&&t.push(i),i.then((function(){return r(i)})).then(null,(function(){return r(i).then(null,(function(){}))})),i},drain:function(e){return new Hr.cW((function(r,n){var i=t.length;if(!i)return r(!0);var o=setTimeout((function(){e&&e>0&&r(!1)}),e);t.forEach((function(e){(0,Hr.WD)(e).then((function(){--i||(clearTimeout(o),r(!0))}),n)}))}))}}}function Si(e,t){return e[t]||e.all||0}function ki(e,t,r){return void 0===r&&(r=Date.now()),Si(e,t)>r}function Pi(e,t,r){var n,i,o,a;void 0===r&&(r=Date.now());var s=(0,mr.pi)({},e),c=t["x-sentry-rate-limits"],u=t["retry-after"];if(c)try{for(var l=(0,mr.XA)(c.trim().split(",")),p=l.next();!p.done;p=l.next()){var d=p.value.split(":",2),f=parseInt(d[0],10),h=1e3*(isNaN(f)?60:f);if(d[1])try{for(var g=(o=void 0,(0,mr.XA)(d[1].split(";"))),_=g.next();!_.done;_=g.next())s[_.value]=r+h}catch(e){o={error:e}}finally{try{_&&!_.done&&(a=g.return)&&a.call(g)}finally{if(o)throw o.error}}else s.all=r+h}}catch(e){n={error:e}}finally{try{p&&!p.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}else u&&(s.all=r+function(e,t){void 0===t&&(t=Date.now());var r=parseInt(""+e,10);if(!isNaN(r))return 1e3*r;var n=Date.parse(""+e);return isNaN(n)?6e4:n-t}(u,r));return s}function xi(e){return e>=200&&e<300?"success":429===e?"rate_limit":e>=400&&e<500?"invalid":e>=500?"failed":"unknown"}function Oi(e,t,r){void 0===r&&(r=wi(e.bufferSize||30));var n={};return{send:function(e){var i=function(e){var t=(0,mr.CR)(e,2),r=(0,mr.CR)(t[1],1);return(0,mr.CR)(r[0],1)[0].type}(e),o="event"===i?"error":i,a={category:o,body:hi(e)};return ki(n,o)?(0,Hr.$2)({status:"rate_limit",reason:Ei(n,o)}):r.add((function(){return t(a).then((function(e){var t=e.body,r=e.headers,i=e.reason,a=xi(e.statusCode);return r&&(n=Pi(n,r)),"success"===a?(0,Hr.WD)({status:a,reason:i}):(0,Hr.$2)({status:a,reason:i||t||("rate_limit"===a?Ei(n,o):"Unknown transport error")})}))}))},flush:function(e){return r.drain(e)}}}function Ei(e,t){return"Too many "+t+" requests, backing off until: "+new Date(Si(e,t)).toISOString()}var Ti,ji=(0,jr.R)();function Ai(){if(Ti)return Ti;if((0,bi.Du)(ji.fetch))return Ti=ji.fetch.bind(ji);var e=ji.document,t=ji.fetch;if(e&&"function"==typeof e.createElement)try{var r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r);var n=r.contentWindow;n&&n.fetch&&(t=n.fetch),e.head.removeChild(r)}catch(e){(0,br.c)()&&wr.kg.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return Ti=t.bind(ji)}function Di(e){return"event"===e?"error":e}var Ci=(0,jr.R)(),Ii=function(){function e(e){var t=this;this.options=e,this._buffer=wi(30),this._rateLimits={},this._outcomes={},this._api=mn(e.dsn,e._metadata,e.tunnel),this.url=Sn(this._api.dsn),this.options.sendClientReports&&Ci.document&&Ci.document.addEventListener("visibilitychange",(function(){"hidden"===Ci.document.visibilityState&&t._flushOutcomes()}))}return e.prototype.sendEvent=function(e){return this._sendRequest(function(e,t){var r,n=gi(t),i=e.type||"event",o="transaction"===i||!!t.tunnel,a=(e.sdkProcessingMetadata||{}).transactionSampling||{},s=a.method,c=a.rate;_i(e,t.metadata.sdk),e.tags=e.tags||{},e.extra=e.extra||{},e.sdkProcessingMetadata&&e.sdkProcessingMetadata.baseClientNormalized||(e.tags.skippedNormalization=!0,e.extra.normalizeDepth=e.sdkProcessingMetadata?e.sdkProcessingMetadata.normalizeDepth:"unset"),delete e.sdkProcessingMetadata;try{r=JSON.stringify(e)}catch(t){e.tags.JSONStringifyError=!0,e.extra.JSONStringifyError=t;try{r=JSON.stringify(Rr(e))}catch(e){var u=e;r=JSON.stringify({message:"JSON.stringify error after renormalization",extra:{message:u.message,stack:u.stack}})}}var l={body:r,type:i,url:o?kn(t.dsn,t.tunnel):Sn(t.dsn)};if(o){var p=fi((0,mr.pi)((0,mr.pi)({event_id:e.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),!!t.tunnel&&{dsn:hn(t.dsn)}),[[{type:i,sample_rates:[{id:s,rate:c}]},l.body]]);l.body=hi(p)}return l}(e,this._api),e)},e.prototype.sendSession=function(e){return this._sendRequest(function(e,t){var r=(0,mr.CR)(mi(e,t),2),n=r[0],i=r[1];return{body:hi(n),type:i,url:kn(t.dsn,t.tunnel)}}(e,this._api),e)},e.prototype.close=function(e){return this._buffer.drain(e)},e.prototype.recordLostEvent=function(e,t){var r;if(this.options.sendClientReports){var n=Di(t)+":"+e;(0,br.c)()&&wr.kg.log("Adding outcome: "+n),this._outcomes[n]=(null!=(r=this._outcomes[n])?r:0)+1}},e.prototype._flushOutcomes=function(){if(this.options.sendClientReports){var e=this._outcomes;if(this._outcomes={},Object.keys(e).length){(0,br.c)()&&wr.kg.log("Flushing outcomes:\n"+JSON.stringify(e,null,2));var t,r,n=kn(this._api.dsn,this._api.tunnel),i=(t=Object.keys(e).map((function(t){var r=(0,mr.CR)(t.split(":"),2),n=r[0];return{reason:r[1],category:n,quantity:e[t]}})),fi((r=this._api.tunnel&&hn(this._api.dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:(0,ci.yW)(),discarded_events:t}]]));try{!function(e,t){if("[object Navigator]"===Object.prototype.toString.call(ji&&ji.navigator)&&"function"==typeof ji.navigator.sendBeacon)return ji.navigator.sendBeacon.bind(ji.navigator)(e,t);(0,bi.Ak)()&&Ai()(e,{body:t,method:"POST",credentials:"omit",keepalive:!0}).then(null,(function(e){console.error(e)}))}(n,hi(i))}catch(e){(0,br.c)()&&wr.kg.error(e)}}else(0,br.c)()&&wr.kg.log("No outcomes to flush")}},e.prototype._handleResponse=function(e){var t=e.requestType,r=e.response,n=e.headers,i=e.resolve,o=e.reject,a=xi(r.status);this._rateLimits=Pi(this._rateLimits,n),this._isRateLimited(t)&&(0,br.c)()&&(0,br.c)()&&wr.kg.warn("Too many "+t+" requests, backing off until: "+this._disabledUntil(t)),"success"!==a?o(r):i({status:a})},e.prototype._disabledUntil=function(e){var t=Di(e);return new Date(Si(this._rateLimits,t))},e.prototype._isRateLimited=function(e){var t=Di(e);return ki(this._rateLimits,t)},e}(),Ni=function(e){function t(t,r){void 0===r&&(r=Ai());var n=e.call(this,t)||this;return n._fetch=r,n}return(0,mr.ZT)(t,e),t.prototype._sendRequest=function(e,t){var r=this;if(this._isRateLimited(e.type))return this.recordLostEvent("ratelimit_backoff",e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429});var n={body:e.body,method:"POST",referrerPolicy:(0,bi.hv)()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(n,this.options.fetchParameters),void 0!==this.options.headers&&(n.headers=this.options.headers),this._buffer.add((function(){return new Hr.cW((function(t,i){r._fetch(e.url,n).then((function(n){var o={"x-sentry-rate-limits":n.headers.get("X-Sentry-Rate-Limits"),"retry-after":n.headers.get("Retry-After")};r._handleResponse({requestType:e.type,response:n,headers:o,resolve:t,reject:i})})).catch(i)}))})).then(void 0,(function(t){throw t instanceof dn?r.recordLostEvent("queue_overflow",e.type):r.recordLostEvent("network_error",e.type),t}))},t}(Ii),Ri=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,mr.ZT)(t,e),t.prototype._sendRequest=function(e,t){var r=this;return this._isRateLimited(e.type)?(this.recordLostEvent("ratelimit_backoff",e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429})):this._buffer.add((function(){return new Hr.cW((function(t,n){var i=new XMLHttpRequest;for(var o in i.onreadystatechange=function(){if(4===i.readyState){var o={"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")};r._handleResponse({requestType:e.type,response:i,headers:o,resolve:t,reject:n})}},i.open("POST",e.url),r.options.headers)Object.prototype.hasOwnProperty.call(r.options.headers,o)&&i.setRequestHeader(o,r.options.headers[o]);i.send(e.body)}))})).then(void 0,(function(t){throw t instanceof dn?r.recordLostEvent("queue_overflow",e.type):r.recordLostEvent("network_error",e.type),t}))},t}(Ii),Li=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,mr.ZT)(t,e),t.prototype.eventFromException=function(e,t){return function(e,t,r){var n=an(e,t&&t.syntheticException||void 0,r);return(0,Sr.EG)(n),n.level=Tr.Error,t&&t.event_id&&(n.event_id=t.event_id),(0,Hr.WD)(n)}(e,t,this._options.attachStacktrace)},t.prototype.eventFromMessage=function(e,t,r){return void 0===t&&(t=Tr.Info),function(e,t,r,n){void 0===t&&(t=Tr.Info);var i=sn(e,r&&r.syntheticException||void 0,n);return i.level=t,r&&r.event_id&&(i.event_id=r.event_id),(0,Hr.WD)(i)}(e,t,r,this._options.attachStacktrace)},t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t,r,n=(0,mr.pi)((0,mr.pi)({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata}),i=mn(n.dsn,n._metadata,n.tunnel),o=kn(i.dsn,i.tunnel);if(this._options.transport)return new this._options.transport(n);if((0,bi.Ak)()){var a=(0,mr.pi)({},n.fetchParameters);return this._newTransport=(t={requestOptions:a,url:o},void 0===r&&(r=Ai()),Oi({bufferSize:t.bufferSize},(function(e){var n=(0,mr.pi)({body:e.body,method:"POST",referrerPolicy:"origin"},t.requestOptions);return r(t.url,n).then((function(e){return e.text().then((function(t){return{body:t,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")},reason:e.statusText,statusCode:e.status}}))}))}))),new Ni(n)}return this._newTransport=function(e){return Oi({bufferSize:e.bufferSize},(function(t){return new Hr.cW((function(r,n){var i=new XMLHttpRequest;for(var o in i.onreadystatechange=function(){if(4===i.readyState){var e={body:i.response,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")},reason:i.statusText,statusCode:i.status};r(e)}},i.open("POST",e.url),e.headers)Object.prototype.hasOwnProperty.call(e.headers,o)&&i.setRequestHeader(o,e.headers[o]);i.send(t.body)}))}))}({url:o,headers:n.headers}),new Ri(n)},t}(yi),$i=function(e){function t(t){return void 0===t&&(t={}),t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:si}],version:si},e.call(this,Li,t)||this}return(0,mr.ZT)(t,e),t.prototype.showReportDialog=function(e){void 0===e&&(e={}),(0,jr.R)().document&&(this._isEnabled()?function(e){if(void 0===e&&(e={}),Pn.document)if(e.eventId)if(e.dsn){var t=Pn.document.createElement("script");t.async=!0,t.src=function(e,t){var r=_n(e),n=vn(r)+"embed/error-page/",i="dsn="+hn(r);for(var o in t)if("dsn"!==o)if("user"===o){if(!t.user)continue;t.user.name&&(i+="&name="+encodeURIComponent(t.user.name)),t.user.email&&(i+="&email="+encodeURIComponent(t.user.email))}else i+="&"+encodeURIComponent(o)+"="+encodeURIComponent(t[o]);return n+"?"+i}(e.dsn,e),e.onLoad&&(t.onload=e.onLoad);var r=Pn.document.head||Pn.document.body;r&&r.appendChild(t)}else(0,br.c)()&&wr.kg.error("Missing dsn option in showReportDialog call");else(0,br.c)()&&wr.kg.error("Missing eventId option in showReportDialog call")}((0,mr.pi)((0,mr.pi)({},e),{dsn:e.dsn||this.getDsn()})):(0,br.c)()&&wr.kg.error("Trying to call showReportDialog with Sentry Client disabled"))},t.prototype._prepareEvent=function(t,r,n){return t.platform=t.platform||"javascript",e.prototype._prepareEvent.call(this,t,r,n)},t.prototype._sendEvent=function(t){var r=this.getIntegration(Jn);r&&r.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},t}(di),Hi=[new xr,new yr,new Ln,new Jn,new jn,new Xn,new Qn,new Zn];function Ui(e){e.startSession({ignoreDuration:!0}),e.captureSession()}var Mi=r(82),Bi=r(512),qi=r(617),Ji=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$"),Fi=r(470),Wi=(0,jr.R)(),Ki=r(55),zi=function(e,t,r){var n;return function(i){t.value>=0&&(i||r)&&(t.delta=t.value-(n||0),(t.delta||void 0===n)&&(n=t.value,e(t)))}},Vi=function(e,t){return{name:e,value:null!=t?t:-1,delta:0,entries:[],id:"v2-"+Date.now()+"-"+(Math.floor(8999999999999*Math.random())+1e12)}},Xi=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var r=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return r.observe({type:e,buffered:!0}),r}}catch(e){}},Gi=function(e,t){var r=function(n){"pagehide"!==n.type&&"hidden"!==(0,jr.R)().document.visibilityState||(e(n),t&&(removeEventListener("visibilitychange",r,!0),removeEventListener("pagehide",r,!0)))};addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)},Yi=-1,Zi=function(){return Yi<0&&(Yi="hidden"===(0,jr.R)().document.visibilityState?0:1/0,Gi((function(e){var t=e.timeStamp;Yi=t}),!0)),{get firstHiddenTime(){return Yi}}},Qi={},eo=(0,jr.R)(),to=function(){function e(e){void 0===e&&(e=!1),this._reportAllChanges=e,this._measurements={},this._performanceCursor=0,!(0,Ki.KV)()&&eo&&eo.performance&&eo.document&&(eo.performance.mark&&eo.performance.mark("sentry-tracing-init"),this._trackCLS(),this._trackLCP(),this._trackFID())}return e.prototype.addPerformanceEntries=function(e){var t=this;if(eo&&eo.performance&&eo.performance.getEntries&&ci.Z1){(0,br.c)()&&wr.kg.log("[Tracing] Adding & adjusting spans using Performance API");var r,n,i=(0,qi.XL)(ci.Z1);if(eo.performance.getEntries().slice(this._performanceCursor).forEach((function(o){var a=(0,qi.XL)(o.startTime),s=(0,qi.XL)(o.duration);if(!("navigation"===e.op&&i+a<e.startTimestamp))switch(o.entryType){case"navigation":!function(e,t,r){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((function(n){ro(e,t,n,r)})),ro(e,t,"secureConnection",r,"TLS/SSL","connectEnd"),ro(e,t,"fetch",r,"cache","domainLookupStart"),ro(e,t,"domainLookup",r,"DNS"),function(e,t,r){no(e,{op:"browser",description:"request",startTimestamp:r+(0,qi.XL)(t.requestStart),endTimestamp:r+(0,qi.XL)(t.responseEnd)}),no(e,{op:"browser",description:"response",startTimestamp:r+(0,qi.XL)(t.responseStart),endTimestamp:r+(0,qi.XL)(t.responseEnd)})}(e,t,r)}(e,o,i),r=i+(0,qi.XL)(o.responseStart),n=i+(0,qi.XL)(o.requestStart);break;case"mark":case"paint":case"measure":var c=function(e,t,r,n,i){var o=i+r,a=o+n;return no(e,{description:t.name,endTimestamp:a,op:t.entryType,startTimestamp:o}),o}(e,o,a,s,i),u=Zi(),l=o.startTime<u.firstHiddenTime;"first-paint"===o.name&&l&&((0,br.c)()&&wr.kg.log("[Measurements] Adding FP"),t._measurements.fp={value:o.startTime},t._measurements["mark.fp"]={value:c}),"first-contentful-paint"===o.name&&l&&((0,br.c)()&&wr.kg.log("[Measurements] Adding FCP"),t._measurements.fcp={value:o.startTime},t._measurements["mark.fcp"]={value:c});break;case"resource":var p=o.name.replace(eo.location.origin,"");!function(e,t,r,n,i,o){if("xmlhttprequest"!==t.initiatorType&&"fetch"!==t.initiatorType){var a={};"transferSize"in t&&(a["Transfer Size"]=t.transferSize),"encodedBodySize"in t&&(a["Encoded Body Size"]=t.encodedBodySize),"decodedBodySize"in t&&(a["Decoded Body Size"]=t.decodedBodySize);var s=o+n;no(e,{description:r,endTimestamp:s+i,op:t.initiatorType?"resource."+t.initiatorType:"resource",startTimestamp:s,data:a})}}(e,o,p,a,s,i)}})),this._performanceCursor=Math.max(performance.getEntries().length-1,0),this._trackNavigator(e),"pageload"===e.op){var o=(0,qi.XL)(ci.Z1);"number"==typeof r&&((0,br.c)()&&wr.kg.log("[Measurements] Adding TTFB"),this._measurements.ttfb={value:1e3*(r-e.startTimestamp)},"number"==typeof n&&n<=r&&(this._measurements["ttfb.requestTime"]={value:1e3*(r-n)})),["fcp","fp","lcp"].forEach((function(r){if(t._measurements[r]&&!(o>=e.startTimestamp)){var n=t._measurements[r].value,i=o+(0,qi.XL)(n),a=Math.abs(1e3*(i-e.startTimestamp)),s=a-n;(0,br.c)()&&wr.kg.log("[Measurements] Normalized "+r+" from "+n+" to "+a+" ("+s+")"),t._measurements[r].value=a}})),this._measurements["mark.fid"]&&this._measurements.fid&&no(e,{description:"first input delay",endTimestamp:this._measurements["mark.fid"].value+(0,qi.XL)(this._measurements.fid.value),op:"web.vitals",startTimestamp:this._measurements["mark.fid"].value}),"fcp"in this._measurements||delete this._measurements.cls,e.setMeasurements(this._measurements),function(e,t,r){t&&((0,br.c)()&&wr.kg.log("[Measurements] Adding LCP Data"),t.element&&e.setTag("lcp.element",(0,Ir.R)(t.element)),t.id&&e.setTag("lcp.id",t.id),t.url&&e.setTag("lcp.url",t.url.trim().slice(0,200)),e.setTag("lcp.size",t.size)),r&&r.sources&&((0,br.c)()&&wr.kg.log("[Measurements] Adding CLS Data"),r.sources.forEach((function(t,r){return e.setTag("cls.source."+(r+1),(0,Ir.R)(t.node))})))}(e,this._lcpEntry,this._clsEntry),e.setTag("sentry_reportAllChanges",this._reportAllChanges)}}},e.prototype._trackNavigator=function(e){var t=eo.navigator;if(t){var r=t.connection;r&&(r.effectiveType&&e.setTag("effectiveConnectionType",r.effectiveType),r.type&&e.setTag("connectionType",r.type),io(r.rtt)&&(this._measurements["connection.rtt"]={value:r.rtt}),io(r.downlink)&&(this._measurements["connection.downlink"]={value:r.downlink})),io(t.deviceMemory)&&e.setTag("deviceMemory",String(t.deviceMemory)),io(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}},e.prototype._trackCLS=function(){var e,t,r,n,i,o,a,s=this;e=function(e){var t=e.entries.pop();t&&((0,br.c)()&&wr.kg.log("[Measurements] Adding CLS"),s._measurements.cls={value:e.value},s._clsEntry=t)},r=Vi("CLS",0),n=0,i=[],(a=Xi("layout-shift",o=function(e){if(e&&!e.hadRecentInput){var o=i[0],a=i[i.length-1];n&&0!==i.length&&e.startTime-a.startTime<1e3&&e.startTime-o.startTime<5e3?(n+=e.value,i.push(e)):(n=e.value,i=[e]),n>r.value&&(r.value=n,r.entries=i,t&&t())}}))&&(t=zi(e,r,undefined),Gi((function(){a.takeRecords().map(o),t(!0)})))},e.prototype._trackLCP=function(){var e=this;!function(t,r){var n,i=Zi(),o=Vi("LCP"),a=function(e){var t=e.startTime;t<i.firstHiddenTime&&(o.value=t,o.entries.push(e)),n&&n()},s=Xi("largest-contentful-paint",a);if(s){n=zi((function(t){var r=t.entries.pop();if(r){var n=(0,qi.XL)(ci.Z1),i=(0,qi.XL)(r.startTime);(0,br.c)()&&wr.kg.log("[Measurements] Adding LCP"),e._measurements.lcp={value:t.value},e._measurements["mark.lcp"]={value:n+i},e._lcpEntry=r}}),o,r);var c=function(){Qi[o.id]||(s.takeRecords().map(a),s.disconnect(),Qi[o.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),Gi(c,!0)}}(0,this._reportAllChanges)},e.prototype._trackFID=function(){var e,t,r,n,i,o,a=this;e=function(e){var t=e.entries.pop();if(t){var r=(0,qi.XL)(ci.Z1),n=(0,qi.XL)(t.startTime);(0,br.c)()&&wr.kg.log("[Measurements] Adding FID"),a._measurements.fid={value:e.value},a._measurements["mark.fid"]={value:r+n}}},r=Zi(),n=Vi("FID"),(o=Xi("first-input",i=function(e){t&&e.startTime<r.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),t(!0))}))&&(t=zi(e,n,undefined),Gi((function(){o.takeRecords().map(i),o.disconnect()}),!0))},e}();function ro(e,t,r,n,i,o){var a=o?t[o]:t[r+"End"],s=t[r+"Start"];s&&a&&no(e,{op:"browser",description:null!=i?i:r,startTimestamp:n+(0,qi.XL)(s),endTimestamp:n+(0,qi.XL)(a)})}function no(e,t){var r=t.startTimestamp,n=(0,mr._T)(t,["startTimestamp"]);return r&&e.startTimestamp>r&&(e.startTimestamp=r),e.startChild((0,mr.pi)({startTimestamp:r},n))}function io(e){return"number"==typeof e&&isFinite(e)}var oo={traceFetch:!0,traceXHR:!0,tracingOrigins:["localhost",/^\//]};var ao=(0,jr.R)(),so=(0,mr.pi)({idleTimeout:Bi.nT,markBackgroundTransactions:!0,maxTransactionDuration:600,routingInstrumentation:function(e,t,r){if(void 0===t&&(t=!0),void 0===r&&(r=!0),ao&&ao.location){var n,i=ao.location.href;t&&(n=e({name:ao.location.pathname,op:"pageload"})),r&&(0,Dr.o)("history",(function(t){var r=t.to,o=t.from;void 0===o&&i&&-1!==i.indexOf(r)?i=void 0:o!==r&&(i=void 0,n&&((0,br.c)()&&wr.kg.log("[Tracing] Finishing current transaction with op: "+n.op),n.finish()),n=e({name:ao.location.pathname,op:"navigation"}))}))}else(0,br.c)()&&wr.kg.warn("Could not initialize routing instrumentation due to invalid location")},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0},oo),co=function(){function e(t){this.name=e.id,this._configuredIdleTimeout=void 0;var r=oo.tracingOrigins;t&&(this._configuredIdleTimeout=t.idleTimeout,t.tracingOrigins&&Array.isArray(t.tracingOrigins)&&0!==t.tracingOrigins.length?r=t.tracingOrigins:(0,br.c)()&&(this._emitOptionsWarning=!0)),this.options=(0,mr.pi)((0,mr.pi)((0,mr.pi)({},so),t),{tracingOrigins:r});var n=this.options._metricOptions;this._metrics=new to(n&&n._reportAllChanges)}return e.prototype.setupOnce=function(e,t){var r=this;this._getCurrentHub=t,this._emitOptionsWarning&&((0,br.c)()&&wr.kg.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),(0,br.c)()&&wr.kg.warn("[Tracing] We added a reasonable default for you: "+oo.tracingOrigins));var n=this.options,i=n.routingInstrumentation,o=n.startTransactionOnLocationChange,a=n.startTransactionOnPageLoad,s=n.markBackgroundTransactions,c=n.traceFetch,u=n.traceXHR,l=n.tracingOrigins,p=n.shouldCreateSpanForRequest;i((function(e){return r._createRouteTransaction(e)}),a,o),s&&(Wi&&Wi.document?Wi.document.addEventListener("visibilitychange",(function(){var e=(0,qi.x1)();if(Wi.document.hidden&&e){(0,br.c)()&&wr.kg.log("[Tracing] Transaction: cancelled -> since tab moved to the background, op: "+e.op),e.status||e.setStatus("cancelled"),e.setTag("visibilitychange","document.hidden"),e.setTag(Fi.d,Fi.x[2]),e.finish()}})):(0,br.c)()&&wr.kg.warn("[Tracing] Could not set up background tab detection due to lack of global document")),function(e){var t=(0,mr.pi)((0,mr.pi)({},oo),e),r=t.traceFetch,n=t.traceXHR,i=t.tracingOrigins,o=t.shouldCreateSpanForRequest,a={},s=function(e){if(a[e])return a[e];var t=i;return a[e]=t.some((function(t){return(0,kr.zC)(e,t)}))&&!(0,kr.zC)(e,"sentry_key"),a[e]},c=s;"function"==typeof o&&(c=function(e){return s(e)&&o(e)});var u={};r&&(0,Dr.o)("fetch",(function(e){!function(e,t,r){if((0,qi.zu)()&&e.fetchData&&t(e.fetchData.url))if(e.endTimestamp){var n=e.fetchData.__span;if(!n)return;(o=r[n])&&(e.response?o.setHttpStatus(e.response.status):e.error&&o.setStatus("internal_error"),o.finish(),delete r[n])}else{var i=(0,qi.x1)();if(i){var o=i.startChild({data:(0,mr.pi)((0,mr.pi)({},e.fetchData),{type:"fetch"}),description:e.fetchData.method+" "+e.fetchData.url,op:"http.client"});e.fetchData.__span=o.spanId,r[o.spanId]=o;var a=e.args[0]=e.args[0],s=e.args[1]=e.args[1]||{},c=s.headers;(0,Cr.V9)(a,Request)&&(c=a.headers),c?"function"==typeof c.append?c.append("sentry-trace",o.toTraceparent()):c=Array.isArray(c)?(0,mr.fl)(c,[["sentry-trace",o.toTraceparent()]]):(0,mr.pi)((0,mr.pi)({},c),{"sentry-trace":o.toTraceparent()}):c={"sentry-trace":o.toTraceparent()},s.headers=c}}}(e,c,u)})),n&&(0,Dr.o)("xhr",(function(e){!function(e,t,r){if(!(!(0,qi.zu)()||e.xhr&&e.xhr.__sentry_own_request__)&&e.xhr&&e.xhr.__sentry_xhr__&&t(e.xhr.__sentry_xhr__.url)){var n=e.xhr.__sentry_xhr__;if(e.endTimestamp){var i=e.xhr.__sentry_xhr_span_id__;if(!i)return;(a=r[i])&&(a.setHttpStatus(n.status_code),a.finish(),delete r[i])}else{var o=(0,qi.x1)();if(o){var a=o.startChild({data:(0,mr.pi)((0,mr.pi)({},n.data),{type:"xhr",method:n.method,url:n.url}),description:n.method+" "+n.url,op:"http.client"});if(e.xhr.__sentry_xhr_span_id__=a.spanId,r[e.xhr.__sentry_xhr_span_id__]=a,e.xhr.setRequestHeader)try{e.xhr.setRequestHeader("sentry-trace",a.toTraceparent())}catch(e){}}}}}(e,c,u)}))}({traceFetch:c,traceXHR:u,tracingOrigins:l,shouldCreateSpanForRequest:p})},e.prototype._createRouteTransaction=function(e){var t=this;if(this._getCurrentHub){var r=this.options,n=r.beforeNavigate,i=r.idleTimeout,o=r.maxTransactionDuration,a="pageload"===e.op?function(){var e,t=("sentry-trace",(e=(0,jr.R)().document.querySelector("meta[name=sentry-trace]"))?e.getAttribute("content"):null);if(t)return function(e){var t=e.match(Ji);if(t){var r=void 0;return"1"===t[3]?r=!0:"0"===t[3]&&(r=!1),{traceId:t[1],parentSampled:r,parentSpanId:t[2]}}}(t)}():void 0,s=(0,mr.pi)((0,mr.pi)((0,mr.pi)({},e),a),{trimEnd:!0}),c="function"==typeof n?n(s):s,u=void 0===c?(0,mr.pi)((0,mr.pi)({},s),{sampled:!1}):c;!1===u.sampled&&(0,br.c)()&&wr.kg.log("[Tracing] Will not send "+u.op+" transaction because of beforeNavigate."),(0,br.c)()&&wr.kg.log("[Tracing] Starting "+u.op+" transaction on scope");var l=this._getCurrentHub(),p=(0,jr.R)().location,d=(0,Mi.lb)(l,u,i,!0,{location:p});return d.registerBeforeFinishCallback((function(e,r){t._metrics.addPerformanceEntries(e),function(e,t,r){var n=r-t.startTimestamp;r&&(n>e||n<0)&&(t.setStatus("deadline_exceeded"),t.setTag("maxTransactionDurationExceeded","true"))}((0,qi.WB)(o),e,r)})),d.setTag("idleTimeout",this._configuredIdleTimeout),d}(0,br.c)()&&wr.kg.warn("[Tracing] Did not create "+e.op+" transaction because _getCurrentHub is invalid.")},e.id="BrowserTracing",e}();(0,Mi.ro)();var uo=(0,jr.R)(),lo=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._levels=wr.RU,t.levels&&(this._levels=t.levels)}return e.prototype.setupOnce=function(t,r){"console"in uo&&this._levels.forEach((function(t){t in uo.console&&(0,vr.hl)(uo.console,t,(function(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=r();a.getIntegration(e)&&a.withScope((function(e){e.setLevel(qn(t)),e.setExtra("arguments",i),e.addEventProcessor((function(e){return e.logger="console",e}));var r=(0,kr.nK)(i," ");"assert"===t?!1===i[0]&&(r="Assertion failed: "+((0,kr.nK)(i.slice(1)," ")||"console.assert"),e.setExtra("arguments",i.slice(1)),a.captureMessage(r)):"error"===t&&i[0]instanceof Error?a.captureException(i[0]):a.captureMessage(r)})),n&&n.apply(uo.console,i)}}))}))},e.id="CaptureConsole",e}();function po(e){var t=e.level,r=void 0===t?"log":t,n=e.type,i=e.msg;console[r]("[".concat(r," ").concat(n,"] ").concat(i))}var fo="wx-mini-schema-map";function ho(e){window.localStorage.setItem(fo,JSON.stringify(e))}function go(e,t){return void 0===t&&(t=3e3),new Promise((function(r,n){var i=void 0!==window.document.hidden?"hidden":void 0!==window.document.msHidden?"msHidden":void 0!==window.document.webkitHidden?"webkitHidden":"hidden",o=null,a=setInterval((function(){document[i]&&(clearInterval(a),clearTimeout(o),r())}),500);o=setTimeout((function(){clearInterval(a),document[i]?r():n()}),t),window.location.href=e}))}var _o=r(474);function mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(r),!0).forEach((function(t){ko(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yo(e){return yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yo(e)}function bo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function So(e,t,r){return t&&wo(e.prototype,t),r&&wo(e,r),e}function ko(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Po(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oo(e,t)}function xo(e){return xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xo(e)}function Oo(e,t){return Oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Oo(e,t)}function Eo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function To(e,t,r){return To=Eo()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&Oo(i,r.prototype),i},To.apply(null,arguments)}function jo(e){var t="function"==typeof Map?new Map:void 0;return jo=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return To(e,arguments,xo(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Oo(n,e)},jo(e)}function Ao(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Do(e){var t=Eo();return function(){var r,n=xo(e);if(t){var i=xo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ao(this,r)}}function Co(e){return function(e){if(Array.isArray(e))return Io(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Io(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Io(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Io(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function No(e){if(!Array.isArray(e))throw new TypeError("Middlewares must be an array!");for(var t=e.length,r=0;r<t;r++)if("function"!=typeof e[r])throw new TypeError("Middleware must be componsed of function");return function(t,r){var n=-1;return function i(o){if(o<=n)return Promise.reject(new Error("next() should not be called multiple times in one middleware!"));n=o;var a=e[o]||r;if(!a)return Promise.resolve();try{return Promise.resolve(a(t,(function(){return i(o+1)})))}catch(e){return Promise.reject(e)}}(0)}}r(638);var Ro=function(){function e(t){if(bo(this,e),!Array.isArray(t))throw new TypeError("Default middlewares must be an array!");this.defaultMiddlewares=Co(t),this.middlewares=[]}return So(e,[{key:"use",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!1,core:!1,defaultInstance:!1},n=!1,i=!1,o=!1;"number"==typeof r?(process&&process.env,n=!0,i=!1):"object"===yo(r)&&r&&(i=r.global||!1,n=r.core||!1,o=r.defaultInstance||!1),i?e.globalMiddlewares.splice(e.globalMiddlewares.length-e.defaultGlobalMiddlewaresLength,0,t):n?e.coreMiddlewares.splice(e.coreMiddlewares.length-e.defaultCoreMiddlewaresLength,0,t):o?this.defaultMiddlewares.push(t):this.middlewares.push(t)}},{key:"execute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=No([].concat(Co(this.middlewares),Co(this.defaultMiddlewares),Co(e.globalMiddlewares),Co(e.coreMiddlewares)));return r(t)}}]),e}();Ro.globalMiddlewares=[],Ro.defaultGlobalMiddlewaresLength=0,Ro.coreMiddlewares=[],Ro.defaultCoreMiddlewaresLength=0;var Lo=function(){function e(t){bo(this,e),this.cache=new Map,this.timer={},this.extendOptions(t)}return So(e,[{key:"extendOptions",value:function(e){this.maxCache=e.maxCache||0}},{key:"get",value:function(e){return this.cache.get(JSON.stringify(e))}},{key:"set",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e4;if(this.maxCache>0&&this.cache.size>=this.maxCache){var i=Co(this.cache.keys())[0];this.cache.delete(i),this.timer[i]&&clearTimeout(this.timer[i])}var o=JSON.stringify(e);this.cache.set(o,t),n>0&&(this.timer[o]=setTimeout((function(){r.cache.delete(o),delete r.timer[o]}),n))}},{key:"delete",value:function(e){var t=JSON.stringify(e);return delete this.timer[t],this.cache.delete(t)}},{key:"clear",value:function(){return this.timer={},this.cache.clear()}}]),e}(),$o=function(e){Po(r,e);var t=Do(r);function r(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RequestError";return bo(this,r),(i=t.call(this,e)).name="RequestError",i.request=n,i.type=o,i}return r}(jo(Error)),Ho=function(e){Po(r,e);var t=Do(r);function r(e,n,i,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ResponseError";return bo(this,r),(a=t.call(this,n||e.statusText)).name="ResponseError",a.data=i,a.response=e,a.request=o,a.type=s,a}return r}(jo(Error));function Uo(e){return new Promise((function(t,r){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=r,n.readAsText(e,"GBK")}))}function Mo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{return JSON.parse(e)}catch(i){if(t)throw new Ho(r,"JSON.parse fail",e,n,"ParseError")}return e}function Bo(e,t,r){return new Promise((function(n,i){setTimeout((function(){i(new $o(t||"timeout of ".concat(e,"ms exceeded"),r,"Timeout"))}),e)}))}function qo(e){return new Promise((function(t,r){e.cancelToken&&e.cancelToken.promise.then((function(e){r(e)}))}))}var Jo=Object.prototype.toString;function Fo(){var e;return"undefined"!=typeof process&&"[object process]"===Jo.call(process)&&(e="NODE"),"undefined"!=typeof XMLHttpRequest&&(e="BROWSER"),e}function Wo(e){return"object"===yo(e)&&"[object Array]"===Object.prototype.toString.call(e)}function Ko(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function zo(e){return null!==e&&"object"===yo(e)}function Vo(e,t){if(e)if("object"!==yo(e)&&(e=[e]),Wo(e))for(var r=0;r<e.length;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function Xo(e){return Ko(e)?(0,_o.parse)(e.toString(),{strictNullHandling:!0}):"string"==typeof e?[e]:e}function Go(e){return(0,_o.stringify)(e,{arrayFormat:"repeat",strictNullHandling:!0})}function Yo(e,t){return vo(vo(vo({},e),t),{},{headers:vo(vo({},e.headers),t.headers),params:vo(vo({},Xo(e.params)),Xo(t.params)),method:(t.method||e.method||"get").toLowerCase()})}function Zo(e,t){var r=t.method;return"get"===(void 0===r?"get":r).toLowerCase()}var Qo=[function(e,t){if(!e)return t();var r=e.req,n=(r=void 0===r?{}:r).options,i=void 0===n?{}:n,o=i.method;if(-1===["post","put","patch","delete"].indexOf((void 0===o?"get":o).toLowerCase()))return t();var a=i.requestType,s=void 0===a?"json":a,c=i.data;if(c){var u=Object.prototype.toString.call(c);"[object Object]"===u||"[object Array]"===u?"json"===s?(i.headers=vo({Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},i.headers),i.body=JSON.stringify(c)):"form"===s&&(i.headers=vo({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},i.headers),i.body=Go(c)):(i.headers=vo({Accept:"application/json"},i.headers),i.body=c)}return e.req.options=i,t()},function(e,t){if(!e)return t();var r=e.req,n=(r=void 0===r?{}:r).options,i=void 0===n?{}:n,o=i.paramsSerializer,a=i.params,s=e.req,c=(s=void 0===s?{}:s).url,u=void 0===c?"":c;i.method=i.method?i.method.toUpperCase():"GET",i.credentials=i.credentials||"same-origin";var l=function(e,t){var r,n;return e&&(t?r=t(e):Ko(e)?r=e.toString():Wo(e)?(n=[],Vo(e,(function(e){null==e?n.push(e):n.push(zo(e)?JSON.stringify(e):e)})),r=Go(n)):(n={},Vo(e,(function(e,t){var r,i=e;null==e?n[t]=e:"object"===yo(r=e)&&"[object Date]"===Object.prototype.toString.call(r)?i=e.toISOString():Wo(e)?i=e:zo(e)&&(i=JSON.stringify(e)),n[t]=i})),r=Go(n))),r}(a,o);if(e.req.originUrl=u,l){var p=-1!==u.indexOf("?")?"&":"?";e.req.url="".concat(u).concat(p).concat(l)}return e.req.options=i,t()},function(e,t){var r;return t().then((function(){if(e){var t=e.res,n=void 0===t?{}:t,i=e.req,o=void 0===i?{}:i,a=(o||{}).options,s=(a=void 0===a?{}:a).responseType,c=void 0===s?"json":s,u=a.charset,l=void 0===u?"utf8":u,p=(a.getResponse,a.throwErrIfParseFail),d=void 0!==p&&p,f=a.parseResponse;if((void 0===f||f)&&n&&n.clone){if((r="BROWSER"===Fo()?n.clone():n).useCache=n.useCache||!1,"gbk"===l)try{return n.blob().then(Uo).then((function(e){return Mo(e,!1,r,o)}))}catch(e){throw new Ho(r,e.message,null,o,"ParseError")}else if("json"===c)return n.text().then((function(e){return Mo(e,d,r,o)}));try{return n[c]()}catch(e){throw new Ho(r,"responseType not support",null,o,"ParseError")}}}})).then((function(t){if(e){e.res;var n=e.req,i=void 0===n?{}:n,o=(i||{}).options,a=(o=void 0===o?{}:o).getResponse,s=void 0!==a&&a;if(r){if(r.status>=200&&r.status<300)return s?void(e.res={data:t,response:r}):void(e.res=t);throw new Ho(r,"http error",t,i,"HttpError")}}})).catch((function(t){if(t instanceof $o||t instanceof Ho)throw t;var r=e.req,n=e.res;throw t.request=t.request||r,t.response=t.response||n,t.type=t.type||t.name,t.data=t.data||void 0,t}))}],ea=[function(e,t){if(!e)return t();var r=e.req,n=(r=void 0===r?{}:r).options,i=void 0===n?{}:n,o=r.url,a=void 0===o?"":o,s=e.cache,c=e.responseInterceptors,u=i.timeout,l=void 0===u?0:u,p=i.timeoutMessage,d=i.__umiRequestCoreType__,f=void 0===d?"normal":d,h=i.useCache,g=void 0!==h&&h,_=i.method,m=void 0===_?"get":_,v=i.params,y=i.ttl,b=i.validateCache,w=void 0===b?Zo:b;if("normal"!==f)return process&&process.env,t();var S=fetch;if(!S)throw new Error("Global fetch not exist!");var k,P="BROWSER"===Fo(),x=w(a,i)&&g&&P;if(x){var O=s.get({url:a,params:v,method:m});if(O)return(O=O.clone()).useCache=!0,e.res=O,t()}return k=l>0?Promise.race([qo(i),S(a,i),Bo(l,p,e.req)]):Promise.race([qo(i),S(a,i)]),c.forEach((function(e){k=k.then((function(t){var r="function"==typeof t.clone?t.clone():t;return e(r,i)}))})),k.then((function(r){if(x&&200===r.status){var n=r.clone();n.useCache=!0,s.set({url:a,params:v,method:m},n,y)}return e.res=r,t()}))}];Ro.globalMiddlewares=Qo,Ro.defaultGlobalMiddlewaresLength=Qo.length,Ro.coreMiddlewares=ea,Ro.defaultCoreMiddlewaresLength=ea.length;var ta=function(){function e(t){bo(this,e),this.onion=new Ro([]),this.fetchIndex=0,this.mapCache=new Lo(t),this.initOptions=t,this.instanceRequestInterceptors=[],this.instanceResponseInterceptors=[]}return So(e,[{key:"use",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!1,core:!1};return this.onion.use(e,t),this}},{key:"extendOptions",value:function(e){this.initOptions=Yo(this.initOptions,e),this.mapCache.extendOptions(e)}},{key:"dealRequestInterceptors",value:function(t){return[].concat(Co(e.requestInterceptors),Co(this.instanceRequestInterceptors)).reduce((function(e,r){return e.then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.req.url=e.url||t.req.url,t.req.options=e.options||t.req.options,r(t.req.url,t.req.options)}))}),Promise.resolve()).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.req.url=e.url||t.req.url,t.req.options=e.options||t.req.options,Promise.resolve()}))}},{key:"request",value:function(t,r){var n=this,i=this.onion,o={req:{url:t,options:vo(vo({},r),{},{url:t})},res:null,cache:this.mapCache,responseInterceptors:[].concat(Co(e.responseInterceptors),Co(this.instanceResponseInterceptors))};if("string"!=typeof t)throw new Error("url MUST be a string");return new Promise((function(e,t){n.dealRequestInterceptors(o).then((function(){return i.execute(o)})).then((function(){e(o.res)})).catch((function(r){var n=o.req.options.errorHandler;if(n)try{var i=n(r);e(i)}catch(e){t(e)}else t(r)}))}))}}],[{key:"requestUse",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!0};if("function"!=typeof t)throw new TypeError("Interceptor must be function!");r.global?e.requestInterceptors.push(t):this.instanceRequestInterceptors.push(t)}},{key:"responseUse",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{global:!0};if("function"!=typeof t)throw new TypeError("Interceptor must be function!");r.global?e.responseInterceptors.push(t):this.instanceResponseInterceptors.push(t)}}]),e}();function ra(e){this.message=e}function na(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new ra(e),t(r.reason))}))}function ia(e){return!(!e||!e.__CANCEL__)}ta.requestInterceptors=[function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.prefix,n=t.suffix;return r&&(e="".concat(r).concat(e)),n&&(e="".concat(e).concat(n)),{url:e,options:t}}],ta.responseInterceptors=[],ra.prototype.toString=function(){return this.message?"Cancel: ".concat(this.message):"Cancel"},ra.prototype.__CANCEL__=!0,na.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},na.source=function(){var e;return{token:new na((function(t){e=t})),cancel:e}};var oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new ta(e),r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Yo(t.initOptions,r);return t.request(e,n)};r.use=t.use.bind(t),r.fetchIndex=t.fetchIndex,r.interceptors={request:{use:ta.requestUse.bind(t)},response:{use:ta.responseUse.bind(t)}};var n=["get","post","delete","put","patch","head","options","rpc"];return n.forEach((function(e){r[e]=function(t,n){return r(t,vo(vo({},n),{},{method:e}))}})),r.Cancel=ra,r.CancelToken=na,r.isCancel=ia,r.extendOptions=t.extendOptions.bind(t),r.middlewares={instance:t.onion.middlewares,defaultInstance:t.onion.defaultMiddlewares,global:Ro.globalMiddlewares,core:Ro.coreMiddlewares},r};oa({parseResponse:!1});const aa=oa({});function sa(e,t){return aa.get("//ads-link-dev.sensorsdata.cn/redirect/wechat_mina/schema_urls/".concat(e),{params:{s:null==t?void 0:t.s,t:null==t?void 0:t.t},timeout:1e4})}var ca,ua,la=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},pa=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function da(e,t){document.querySelector(e).innerText=t}(function(e){if(void 0===e&&(e={}),void 0===e.defaultIntegrations&&(e.defaultIntegrations=Hi),void 0===e.release){var t=(0,jr.R)();t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id)}void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0),function(e,t){!0===t.debug&&((0,br.c)()?wr.kg.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));var r=(0,Ar.Gd)(),n=r.getScope();n&&n.update(t.initialScope);var i=new e(t);r.bindClient(i)}($i,e),e.autoSessionTracking&&function(){if(void 0!==(0,jr.R)().document){var e=(0,Ar.Gd)();e.captureSession&&(Ui(e),(0,Dr.o)("history",(function(e){var t=e.from,r=e.to;void 0!==t&&t!==r&&Ui((0,Ar.Gd)())})))}else(0,br.c)()&&wr.kg.warn("Session tracking in non-browser environment with @sentry/browser is not supported.")}()})({environment:"production",release:"wx-mini-link@".concat("1.0.0-feature-1.0.0-init"),dsn:"https://903ad944be7c45da9a0eaff78ab5058b@horus.sensorsdata.com/19",integrations:[new co,new ai.GlobalHandlers({onerror:!0,onunhandledrejection:!0}),new ai.Breadcrumbs({console:!0,dom:!0,fetch:!0,history:!0,xhr:!0}),new lo({levels:["error","warn","assert"]})],tracesSampleRate:1}),gr.init({server_url:"https://sa.datasink.sensorsdata.cn/sa?token=null&project=production",use_client_time:!0,send_type:"beacon",heatmap:{clickmap:"default",scroll_notice_map:"not_collect"}}),gr.quick("autoTrack"),function(e){e.AUTO_SUCCESS="auto-success",e.AUTO_FAIL="auto-fail",e.CLICK_SUCCESS="click-success",e.CLICK_FAIL="click-fail"}(ca||(ca={})),function(e){e.STORAGE="storage",e.SERVER="server"}(ua||(ua={})),la(void 0,void 0,void 0,(function(){var e,t,r,n,i,o,a,s,c,u,l,p,d;return pa(this,(function(f){switch(f.label){case 0:if(po({type:"Page",msg:"页面初始化"}),h=new RegExp("(^|&)".concat("k","=([^&]*)(&|$)"),"i"),g=window.location.search.slice(1).match(h),!(e=null!==g?decodeURIComponent(g[2]):null))return po({level:"warn",type:"Page",msg:"链接缺少 k 参数"}),da("#tip","url 链接格式不正确"),[2];if(t=function(){var e=window.localStorage.getItem(fo);try{var t=JSON.parse(e||"{}"),r=Date.now(),n=Object.keys(t).filter((function(e){return function(e,t){return e+2592e6>t}(t[e].t,r)})),i={};return n.forEach((function(e){i[e]=t[e]})),window.localStorage.setItem(fo,JSON.stringify(i)),i}catch(e){return po({level:"error",type:"Storage",msg:"本地缓存序列化失败 ".concat(e.message)}),{}}}(),r=t[e],n=ua.STORAGE,r&&!("click"===(null==r?void 0:r.tp)&&(null==r?void 0:r.ft)<=3))return[3,4];r||po({type:"Storage",msg:"本地无 schema 缓存, key: ".concat(e)}),gr.track("$AdWxH5LinkReaching",{key:e,hasStorage:!!r}),n=ua.SERVER,po({type:"Ajax",msg:"调用后端接口, key: ".concat(e)}),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,sa(e,{s:null==r?void 0:r.s,t:null==r?void 0:r.t})];case 2:return i=f.sent().schema,r={s:i,t:Date.now(),ft:(null==r?void 0:r.ft)||0},[3,4];case 3:return o=f.sent(),(null===(l=null==o?void 0:o.data)||void 0===l?void 0:l.error_code)?da("#tip",(null===(p=null==o?void 0:o.data)||void 0===p?void 0:p.error)||"当前服务调用异常"):da("#tip","当前服务调用异常"),po({level:"error",type:"Ajax",msg:(null===(d=null==o?void 0:o.data)||void 0===d?void 0:d.error)||o.message}),[2];case 4:t[e]=r,ho(t),a=new Date(r.t).toLocaleString(),s=!1,c=document.querySelector("#js-open-btn"),u=document.querySelector("#js-app-btn"),c.addEventListener("click",(function(){return la(void 0,void 0,void 0,(function(){return pa(this,(function(i){switch(i.label){case 0:po({type:"Page",msg:"用户点击手动跳转, key: ".concat(e)}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,go(r.s)];case 2:return i.sent(),da("#tip","小程序打开成功，重新打开请点击下方按钮"),s=!0,delete r.tp,delete r.ft,po({type:"Open",msg:"手动打开成功, ".concat(e,": ").concat(r.s,", schema 创建时间: ").concat(a)}),[3,4];case 3:return i.sent(),r.tp="click",r.ft=((null==r?void 0:r.ft)||0)+1,po({level:"error",type:"Open",msg:"手动打开失败, key: ".concat(e,", schema: ").concat(r.s,", 手动失败次数: ").concat(r.ft,", schema 创建时间: ").concat(a)}),s||(da("#tip","小程序打开失败，请尝试下载微信"),c.style.display="none",u.style.display="block"),[3,4];case 4:return t[e]=r,ho(t),gr.track("$AdWxH5LinkOpenResult",{key:e,schemaType:n,openStatus:ca.CLICK_FAIL}),[2]}}))}))})),u.addEventListener("click",(function(){po({type:"Page",msg:"用户点击跳转应用宝 H5, key: ".concat(e)}),location.href="https://a.app.qq.com/o/simple.jsp?pkgname=com.tencent.mm"})),po({type:"Page",msg:"页面初始化结束"}),po({type:"Open",msg:"尝试自动打开小程序"}),f.label=5;case 5:return f.trys.push([5,7,,8]),[4,go(r.s)];case 6:return f.sent(),da("#tip","小程序打开成功，重新打开请点击下方按钮"),s=!0,[3,8];case 7:return f.sent(),da("#tip","小程序加载失败，请点击下方按钮打开"),[3,8];case 8:return po({level:s?"log":"error",type:"Open",msg:"自动打开".concat(s?"成功":"失败",", key: ").concat(e,", schema: ").concat(r.s,", schema 创建时间: ").concat(a)}),gr.track("$AdWxH5LinkOpenResult",{key:e,schemaType:n,openStatus:s?ca.AUTO_SUCCESS:ca.AUTO_FAIL}),c.style.display="block",[2]}var h,g}))}))})()})();